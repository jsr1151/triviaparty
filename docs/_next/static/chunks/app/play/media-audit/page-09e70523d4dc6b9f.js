(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[604],{2495:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(5155),l=a(2619),r=a.n(l),i=a(2115);function n(){let[e,t]=(0,i.useState)({count:0,items:[]}),[a,l]=(0,i.useState)(!0),[n,d]=(0,i.useState)(null),[o,c]=(0,i.useState)(""),[m,u]=(0,i.useState)("all");(0,i.useEffect)(()=>{(async()=>{d(null);try{let e=Array.from(new Set(["".concat("/triviaparty","/data/questions/flagged-media-questions.json"),"/triviaparty/data/questions/flagged-media-questions.json","/data/questions/flagged-media-questions.json"])),a=!1,s="";for(let l of e){let e=await fetch(l);if(!e.ok){s="".concat(l," -> ").concat(e.status);continue}let r=await e.json();t({count:Number((null==r?void 0:r.count)||0),items:Array.isArray(null==r?void 0:r.items)?r.items:[]}),a=!0;break}a||(t({count:0,items:[]}),d(s||"No valid audit dataset endpoint responded."))}finally{l(!1)}})()},[]);let x=(0,i.useMemo)(()=>["all",...Array.from(new Set(e.items.map(e=>e.reason).filter(Boolean)))],[e.items]),g=(0,i.useMemo)(()=>{let t=o.trim().toLowerCase();return e.items.filter(e=>{var a,s;if("all"!==m&&e.reason!==m)return!1;if(!t)return!0;let l="string"==typeof e.category?e.category:(null==(a=e.category)?void 0:a.name)||"";return[e.question,l,e.mediaUrl,(null==(s=e.audit)?void 0:s.title)||""].join(" ").toLowerCase().includes(t)})},[e.items,m,o]),h=(0,i.useMemo)(()=>{let t={};for(let a of e.items)t[a.reason]=(t[a.reason]||0)+1;return t},[e.items]);return(0,s.jsx)("main",{className:"min-h-screen bg-gray-950 text-white p-8",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-yellow-400",children:"Media Audit"}),(0,s.jsx)(r(),{href:"/",className:"bg-gray-800 hover:bg-gray-700 px-4 py-2 rounded-lg font-bold",children:"Main Menu"})]}),(0,s.jsxs)("div",{className:"bg-gray-900 rounded-xl p-4 mb-6",children:[(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-3 mb-3",children:[(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"Total flagged"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-yellow-300",children:e.count})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"Shown"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-cyan-300",children:g.length})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"Reasons"}),(0,s.jsx)("div",{className:"text-sm text-gray-200",children:Object.keys(h).length})]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-4 gap-3",children:[(0,s.jsx)("input",{value:o,onChange:e=>c(e.target.value),placeholder:"Search question/category/video title",className:"md:col-span-3 bg-gray-800 border border-gray-700 rounded-lg p-2"}),(0,s.jsx)("select",{value:m,onChange:e=>u(e.target.value),className:"bg-gray-800 border border-gray-700 rounded-lg p-2",children:x.map(e=>(0,s.jsx)("option",{value:e,children:"all"===e?"All reasons":"".concat(e," (").concat(h[e]||0,")")},e))})]})]}),a?(0,s.jsx)("div",{className:"text-gray-400",children:"Loading audit listâ€¦"}):n?(0,s.jsxs)("div",{className:"text-red-300",children:["Could not load audit items: ",n]}):0===g.length?(0,s.jsx)("div",{className:"text-gray-400",children:"No flagged items for this filter."}):(0,s.jsx)("div",{className:"space-y-3",children:g.map((e,t)=>{var a,l;let r="string"==typeof e.category?e.category:(null==(a=e.category)?void 0:a.name)||"uncategorized";return(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[(0,s.jsx)("div",{className:"text-sm text-purple-300 mb-1",children:r}),(0,s.jsx)("div",{className:"font-bold mb-2",children:e.question}),(0,s.jsx)("div",{className:"text-xs text-red-300 mb-2",children:e.reason}),(null==(l=e.audit)?void 0:l.title)&&(0,s.jsxs)("div",{className:"text-xs text-gray-300 mb-2",children:["Current video title: ",(0,s.jsx)("span",{className:"text-gray-100",children:e.audit.title}),"number"==typeof e.audit.overlapRatio&&(0,s.jsxs)("span",{className:"ml-2 text-yellow-300",children:["overlap ",e.audit.overlapRatio]})]}),(0,s.jsx)("a",{href:e.mediaUrl,target:"_blank",rel:"noreferrer",className:"text-sm text-blue-300 underline break-all",children:e.mediaUrl})]},"".concat(e.question,"-").concat(t))})})]})})}},2779:(e,t,a)=>{Promise.resolve().then(a.bind(a,2495))}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=2779)),_N_E=e.O()}]);