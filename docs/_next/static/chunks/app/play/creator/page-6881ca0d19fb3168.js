(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[546],{1419:(e,t,a)=>{"use strict";a.d(t,{BH:()=>l,BU:()=>n,Ms:()=>y,O0:()=>h,Qf:()=>x,nL:()=>m,o8:()=>r,oW:()=>o});let s="triviaparty-github-config";function r(){try{let e=localStorage.getItem(s);if(!e)return null;let t=JSON.parse(e);if(!t.token||!t.owner||!t.repo)return null;return t}catch(e){return null}}function n(e){localStorage.setItem(s,JSON.stringify(e))}function l(){localStorage.removeItem(s)}function o(){return null!==r()}let i="https://api.github.com";function c(e){return{Authorization:"Bearer ".concat(e),Accept:"application/vnd.github.v3+json","Content-Type":"application/json"}}async function d(e,t){let a="".concat(i,"/repos/").concat(e.owner,"/").concat(e.repo,"/contents/").concat(t),s=await fetch(a,{headers:c(e.token)});if(404===s.status)return null;if(!s.ok){let e=await s.text();throw Error("GitHub API error fetching ".concat(t,": ").concat(s.status," ").concat(e))}let r=await s.json();if(!r.sha)throw Error("GitHub API response for ".concat(t," is missing SHA"));let n="string"==typeof r.content?r.content:"";if(!n&&r.git_url){let a=await fetch(r.git_url,{headers:c(e.token)});if(!a.ok){let e=await a.text();throw Error("GitHub blob API error fetching ".concat(t,": ").concat(a.status," ").concat(e))}let s=await a.json();n="string"==typeof s.content?s.content:""}if(!n){var l;throw Error("GitHub did not return file content for ".concat(t," (size=").concat(null!=(l=r.size)?l:"unknown","). ")+"Aborting to prevent accidental overwrite of existing data.")}return{sha:r.sha,content:n}}async function u(e,t,a,s,r){let n="".concat(i,"/repos/").concat(e.owner,"/").concat(e.repo,"/contents/").concat(t),l={message:s,content:function(e){let t=new TextEncoder().encode(e),a="";for(let e=0;e<t.length;e++)a+=String.fromCharCode(t[e]);return btoa(a)}(a)};r&&(l.sha=r);let o=await fetch(n,{method:"PUT",headers:c(e.token),body:JSON.stringify(l)});if(!o.ok){let e=await o.text();throw Error("GitHub API error writing ".concat(t,": ").concat(o.status," ").concat(e))}}async function g(e,t,a,s){let r="public/".concat(t),n="docs/".concat(t),l=await d(e,r),o=null;if(l)try{o=JSON.parse(function(e){let t=atob(e.replace(/\n/g,"")),a=new Uint8Array(t.length);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);return new TextDecoder("utf-8").decode(a)}(l.content))}catch(e){throw Error("Failed to parse existing JSON at ".concat(r,". Aborting update to avoid data loss."))}let i=JSON.stringify(s(o),null,2)+"\n";await u(e,r,i,a,null==l?void 0:l.sha);let c=await d(e,n);await u(e,n,i,a,null==c?void 0:c.sha)}async function p(e,t,a,s){let r="public/".concat(t),n="docs/".concat(t),l=await d(e,r);await u(e,r,a,s,null==l?void 0:l.sha);let o=await d(e,n);await u(e,n,a,s,null==o?void 0:o.sha)}async function m(e,t){let a=0,s=0;function r(e){var t;let a=(e.question||"").trim().toLowerCase(),s="string"==typeof e.category?e.category.trim().toLowerCase():((null==(t=e.category)?void 0:t.name)||"").trim().toLowerCase();return"".concat(e.type,"|").concat(s,"|").concat(a)}return await g(e,"data/questions/sheets-import-questions.json","feat: add ".concat(t.length," question(s) via Creator"),e=>{let n=(null==e?void 0:e.questions)||[],l=new Set(n.map(e=>r(e))),o=[];for(let e of t){if(!e.type||!e.question){s++;continue}let t=r(e);if(l.has(t)){s++;continue}l.add(t),o.push(e)}a=o.length;let i=[...n,...o];return{count:i.length,questions:i}}),{added:a,skipped:s}}async function x(e,t){var a,s;let r=t.gameId,n="game-".concat(r,".json"),l=JSON.stringify(t,null,2)+"\n";await p(e,"data/jeopardy/".concat(n),l,"feat: add/update Jeopardy game ".concat(r," via Creator"));let o={gameId:r,showNumber:t.showNumber||0,airDate:t.airDate||"",season:null!=(a=t.season)?a:null,isSpecial:t.isSpecial||!1,tournamentType:null!=(s=t.tournamentType)?s:null,file:n};await g(e,"data/jeopardy/index.json","feat: update Jeopardy index for game ".concat(r),e=>[o,...(Array.isArray(e)?e:[]).filter(e=>e.gameId!==r)].sort((e,t)=>t.gameId-e.gameId))}async function h(e,t,a){let s=/^g(\d+)-/.exec(t);if(!s)throw Error("Invalid clueId format: ".concat(t));let r=Number(s[1]);await g(e,"data/jeopardy/game-".concat(r,".json"),"feat: update tags for clue ".concat(t),e=>{if(!e)throw Error("Game file for game-".concat(r," not found"));return{...e,categories:e.categories.map(e=>({...e,clues:e.clues.map(e=>e.clueId!==t?e:{...e,topicTags:a})}))}})}async function y(e){try{let t="".concat(i,"/repos/").concat(e.owner,"/").concat(e.repo);return(await fetch(t,{headers:c(e.token)})).ok}catch(e){return!1}}},2321:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>L});var s=a(5155),r=a(2115),n=a(2619),l=a.n(n),o=a(1419),i=a(5388);let c=[{value:"multiple_choice",label:"Multiple Choice",icon:"\uD83D\uDD24"},{value:"open_ended",label:"Open Ended",icon:"✍️"},{value:"list",label:"List",icon:"\uD83D\uDCCB"},{value:"grouping",label:"Grouping",icon:"\uD83D\uDDC2️"},{value:"this_or_that",label:"This or That",icon:"⚔️"},{value:"ranking",label:"Ranking",icon:"\uD83D\uDCCA"},{value:"media",label:"Media",icon:"\uD83D\uDDBC️"},{value:"prompt",label:"Prompt",icon:"\uD83E\uDDE9"}],d=["very_easy","easy","medium","hard","very_hard"],u="triviaparty-creator-questions";function g(e){return e.split(/[\s,]+/).map(e=>e.trim().toLowerCase()).filter(Boolean)}function p(e){return e.toLowerCase().trim()}function m(e,t){return"".concat(p(e),"|").concat(p(t?"string"==typeof t?t:t.name||"":""))}function x(e){let{onClose:t,onSaved:a}=e,n=(0,o.o8)(),[l,i]=(0,r.useState)((null==n?void 0:n.token)||""),[c,d]=(0,r.useState)((null==n?void 0:n.owner)||"jsr1151"),[u,g]=(0,r.useState)((null==n?void 0:n.repo)||"triviaparty"),[p,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)("");async function y(){if(!l.trim())return void h("Token is required");m(!0),h("Testing connection…");let e=await (0,o.Ms)({token:l.trim(),owner:c.trim(),repo:u.trim()});m(!1),h(e?"✅ Connected successfully!":"❌ Cannot access repo. Check token/permissions.")}return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:t,children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-6 max-w-md w-full",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-4",children:"GitHub Connection"}),(0,s.jsxs)("p",{className:"text-sm text-gray-400 mb-4",children:["Connect to GitHub to save questions and games directly to your repo from any device. Create a ",(0,s.jsx)("a",{href:"https://github.com/settings/tokens/new?scopes=repo&description=TriviaParty+Creator",target:"_blank",rel:"noopener",className:"text-purple-400 underline",children:"Personal Access Token"})," with ",(0,s.jsx)("code",{className:"bg-gray-700 px-1 rounded",children:"repo"})," scope."]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Personal Access Token"}),(0,s.jsx)("input",{type:"password",value:l,onChange:e=>i(e.target.value),placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500 font-mono text-sm"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Owner"}),(0,s.jsx)("input",{value:c,onChange:e=>d(e.target.value),className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500 text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Repo"}),(0,s.jsx)("input",{value:u,onChange:e=>g(e.target.value),className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500 text-sm"})]})]})]}),x&&(0,s.jsx)("p",{className:"text-sm mt-3 ".concat(x.startsWith("✅")?"text-green-400":x.startsWith("❌")?"text-red-400":"text-gray-300"),children:x}),(0,s.jsxs)("div",{className:"flex justify-between mt-5",children:[(0,s.jsx)("button",{onClick:function(){(0,o.BH)(),i(""),h("Disconnected"),a()},className:"px-3 py-2 rounded-lg bg-red-800 hover:bg-red-700 text-sm font-medium",children:"Disconnect"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:y,disabled:p,className:"px-3 py-2 rounded-lg bg-gray-600 hover:bg-gray-500 text-sm font-medium disabled:opacity-50",children:p?"Testing…":"Test"}),(0,s.jsx)("button",{onClick:t,className:"px-3 py-2 rounded-lg bg-gray-600 hover:bg-gray-500 text-sm font-medium",children:"Cancel"}),(0,s.jsx)("button",{onClick:function(){if(!l.trim())return void h("Token is required");(0,o.BU)({token:l.trim(),owner:c.trim(),repo:u.trim()}),a(),t()},className:"px-3 py-2 rounded-lg bg-purple-600 hover:bg-purple-500 text-sm font-bold",children:"Save"})]})]})]})})}function h(e){let t={question:"",difficulty:"medium",category:""};switch(e){case"multiple_choice":return{...t,type:e,options:["","","",""],correctAnswer:""};case"open_ended":return{...t,type:e,answer:"",acceptedAnswers:[]};case"list":return{...t,type:e,answers:[""],minRequired:1};case"grouping":return{...t,type:e,groupName:"",correctItems:[""],items:["",""]};case"this_or_that":return{...t,type:e,categoryA:"",categoryB:"",categoryC:"",items:[{text:"",answer:"A"}]};case"ranking":return{...t,type:e,criteria:"",items:[{text:"",rank:1,value:""}]};case"media":return{...t,type:e,mediaType:"image",mediaUrl:"",answer:"",acceptedAnswers:[]};case"prompt":return{...t,type:e,prompt:"",answer:"",acceptedAnswers:[]}}}function y(e){let{items:t,onChange:a,placeholder:n,label:l}=e,[o,i]=(0,r.useState)("");return(0,s.jsxs)("div",{children:[l&&(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:l}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 bg-gray-700 rounded-lg p-2 min-h-[42px]",children:[t.map((e,r)=>(0,s.jsxs)("span",{className:"inline-flex items-center bg-purple-700/60 text-sm rounded-full px-3 py-1",children:[e,(0,s.jsx)("button",{onClick:()=>a(t.filter((e,t)=>t!==r)),className:"ml-1 text-gray-300 hover:text-white",children:"\xd7"})]},r)),(0,s.jsx)("input",{value:o,onChange:e=>i(e.target.value),onKeyDown:e=>{("Enter"===e.key||","===e.key)&&o.trim()&&(e.preventDefault(),a([...t,o.trim()]),i("")),"Backspace"===e.key&&!o&&t.length&&a(t.slice(0,-1))},placeholder:0===t.length?n:"",className:"flex-1 min-w-[120px] bg-transparent outline-none text-white text-sm placeholder-gray-500"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Press Enter or comma to add"})]})}function b(e,t,a,s){return"g".concat(e,"-").concat("single"===t?"s":"double"===t?"d":"f","-c").concat(a,"-r").concat(s)}function f(e,t,a){let s="double"===t?400:200,r=Array.from({length:"final"===t?1:5}).map((r,n)=>{let l="final"===t;return{clueId:b(e,t,a,n),question:"",answer:"",value:l?null:s*(n+1),dailyDouble:!1,tripleStumper:!1,isFinalJeopardy:l,category:"",round:t,rowIndex:n}});return{name:"final"===t?"FINAL JEOPARDY":"CATEGORY ".concat(a+1),round:t,position:a,clues:r}}function v(){return{gameId:0,showNumber:0,airDate:new Date().toISOString().slice(0,10),season:null,isSpecial:!1,tournamentType:null,categories:[...Array.from({length:6}).map((e,t)=>f(0,"single",t)),...Array.from({length:6}).map((e,t)=>f(0,"double",t)),f(0,"final",0)]}}function j(e){let{q:t,set:a}=e,r=t.options||["","","",""];return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400",children:"Options (click the left dot to mark the correct answer)"}),r.map((e,n)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>a({...t,correctAnswer:e}),className:"w-6 h-6 rounded-full border border-gray-400 flex items-center justify-center hover:border-green-400",title:"Mark as correct",children:(0,s.jsx)("span",{className:"w-3 h-3 rounded-full ".concat(t.correctAnswer===e&&e.trim()?"bg-green-500":"bg-transparent")})}),(0,s.jsx)("input",{value:e,onChange:e=>a(function(e,t,a){let s=[...e.options||[]],r=s[t]||"";return s[t]=a,{...e,options:s,correctAnswer:e.correctAnswer===r?a:e.correctAnswer}}(t,n,e.target.value)),placeholder:"Option ".concat(n+1),className:"flex-1 bg-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500"}),r.length>2&&(0,s.jsx)("button",{onClick:()=>{let s=r.filter((e,t)=>t!==n);a({...t,options:s,correctAnswer:t.correctAnswer===e?"":t.correctAnswer})},className:"text-red-400 hover:text-red-300 text-sm",children:"✕"})]},n)),r.length<8&&(0,s.jsx)("button",{onClick:()=>a({...t,options:[...r,""]}),className:"text-purple-400 hover:text-purple-300 text-sm",children:"+ Add Option"})]})}function w(e){let{q:t,set:a}=e;return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Answer"}),(0,s.jsx)("input",{value:t.answer||"",onChange:e=>a({...t,answer:e.target.value}),className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Primary answer"})]}),(0,s.jsx)(y,{items:t.acceptedAnswers||[],onChange:e=>a({...t,acceptedAnswers:e}),label:"Accepted Answers (alternatives)",placeholder:"Type an alternative answer…"})]})}function N(e){let{q:t,set:a}=e;return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(y,{items:t.answers||[],onChange:e=>a({...t,answers:e}),label:"All Valid Answers",placeholder:"Type an answer…"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Minimum Required"}),(0,s.jsx)("input",{type:"number",min:1,value:t.minRequired||1,onChange:e=>a({...t,minRequired:parseInt(e.target.value)||1}),className:"w-24 bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500"})]})]})}function k(e){let{q:t,set:a}=e;return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Group Name"}),(0,s.jsx)("input",{value:t.groupName||"",onChange:e=>a({...t,groupName:e.target.value}),className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"e.g. Wheel of Fortune Wedges"})]}),(0,s.jsx)(y,{items:t.correctItems||[],onChange:e=>a({...t,correctItems:e}),label:"Correct Items (belong to the group)",placeholder:"Type a correct item…"}),(0,s.jsx)(y,{items:t.items||[],onChange:e=>a({...t,items:e}),label:"All Items Shown (correct + incorrect, shuffled)",placeholder:"Type an item…"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"All items includes both correct and incorrect options that will be displayed to the player."})]})}function C(e){let{q:t,set:a}=e,r=t.items||[];return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Category A"}),(0,s.jsx)("input",{value:t.categoryA||"",onChange:e=>a({...t,categoryA:e.target.value}),className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"e.g. Wheel of Fortune"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Category B"}),(0,s.jsx)("input",{value:t.categoryB||"",onChange:e=>a({...t,categoryB:e.target.value}),className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"e.g. Jeopardy!"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Category C (optional)"}),(0,s.jsx)("input",{value:t.categoryC||"",onChange:e=>a({...t,categoryC:e.target.value}),className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"(optional)"})]})]}),(0,s.jsx)("label",{className:"block text-sm text-gray-400",children:"Items"}),r.map((e,n)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{value:e.text,onChange:s=>{let l=[...r];l[n]={...e,text:s.target.value},a({...t,items:l})},placeholder:"Item text",className:"flex-1 bg-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500"}),(0,s.jsxs)("select",{value:e.answer,onChange:s=>{let l=[...r];l[n]={...e,answer:s.target.value},a({...t,items:l})},className:"bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500",children:[(0,s.jsx)("option",{value:"A",children:t.categoryA||"A"}),(0,s.jsx)("option",{value:"B",children:t.categoryB||"B"}),t.categoryC&&(0,s.jsx)("option",{value:"C",children:t.categoryC||"C"})]}),r.length>1&&(0,s.jsx)("button",{onClick:()=>a({...t,items:r.filter((e,t)=>t!==n)}),className:"text-red-400 hover:text-red-300 text-sm",children:"✕"})]},n)),(0,s.jsx)("button",{onClick:()=>a({...t,items:[...r,{text:"",answer:"A"}]}),className:"text-purple-400 hover:text-purple-300 text-sm",children:"+ Add Item"})]})}function S(e){let{q:t,set:a}=e,r=t.items||[];return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Criteria (what are we ranking by?)"}),(0,s.jsx)("input",{value:t.criteria||"",onChange:e=>a({...t,criteria:e.target.value}),className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"e.g. Game Shows Aired First"})]}),(0,s.jsx)("label",{className:"block text-sm text-gray-400",children:"Items (in correct rank order, #1 first)"}),r.map((e,n)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-yellow-400 font-bold w-6 text-center",children:n+1}),(0,s.jsx)("input",{value:e.text,onChange:s=>{let l=[...r];l[n]={...e,text:s.target.value,rank:n+1},a({...t,items:l})},placeholder:"Item text",className:"flex-1 bg-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500"}),(0,s.jsx)("input",{value:e.value||"",onChange:s=>{let l=[...r];l[n]={...e,value:s.target.value},a({...t,items:l})},placeholder:"Value (optional, e.g. year)",className:"w-32 bg-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500"}),r.length>1&&(0,s.jsx)("button",{onClick:()=>{let e=r.filter((e,t)=>t!==n).map((e,t)=>({...e,rank:t+1}));a({...t,items:e})},className:"text-red-400 hover:text-red-300 text-sm",children:"✕"})]},n)),(0,s.jsx)("button",{onClick:()=>a({...t,items:[...r,{text:"",rank:r.length+1,value:""}]}),className:"text-purple-400 hover:text-purple-300 text-sm",children:"+ Add Item"})]})}function A(e){var t;let{q:a,set:r}=e,n=a.options||["","","",""],l=n.some(e=>e.trim().length>0)||!!(null==(t=a.correctAnswer)?void 0:t.trim());return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Media Type"}),(0,s.jsxs)("select",{value:a.mediaType||"image",onChange:e=>r({...a,mediaType:e.target.value}),className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500",children:[(0,s.jsx)("option",{value:"image",children:"Image"}),(0,s.jsx)("option",{value:"video",children:"Video"}),(0,s.jsx)("option",{value:"audio",children:"Audio"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Media URL"}),(0,s.jsx)("input",{value:a.mediaUrl||"",onChange:e=>r({...a,mediaUrl:e.target.value}),className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"https://..."})]})]}),a.mediaUrl&&(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-2 text-center",children:[("image"===a.mediaType||!a.mediaType)&&(0,s.jsx)("img",{src:a.mediaUrl,alt:"Preview",className:"max-h-40 mx-auto rounded"}),"video"===a.mediaType&&(0,s.jsx)("video",{src:a.mediaUrl,controls:!0,className:"max-h-40 mx-auto rounded"}),"audio"===a.mediaType&&(0,s.jsx)("audio",{src:a.mediaUrl,controls:!0,className:"mx-auto"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Answer Format"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>r({...a,options:void 0,correctAnswer:void 0}),className:"px-3 py-1.5 rounded-lg text-sm ".concat(l?"bg-gray-700 hover:bg-gray-600":"bg-purple-600 text-white"),children:"Open Ended"}),(0,s.jsx)("button",{type:"button",onClick:()=>{var e;return r({...a,options:(null==(e=a.options)?void 0:e.length)?a.options:["","","",""],correctAnswer:a.correctAnswer||""})},className:"px-3 py-1.5 rounded-lg text-sm ".concat(l?"bg-purple-600 text-white":"bg-gray-700 hover:bg-gray-600"),children:"Multiple Choice"})]})]}),l?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400",children:"Choices (click the left dot to mark correct)"}),n.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>r({...a,correctAnswer:e}),className:"w-6 h-6 rounded-full border border-gray-400 flex items-center justify-center hover:border-green-400",title:"Mark as correct",children:(0,s.jsx)("span",{className:"w-3 h-3 rounded-full ".concat(a.correctAnswer===e&&e.trim()?"bg-green-500":"bg-transparent")})}),(0,s.jsx)("input",{value:e,onChange:e=>r(function(e,t,a){let s=[...e.options||[]],r=s[t]||"";return s[t]=a,{...e,options:s,correctAnswer:e.correctAnswer===r?a:e.correctAnswer}}(a,t,e.target.value)),placeholder:"Option ".concat(t+1),className:"flex-1 bg-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500"}),n.length>2&&(0,s.jsx)("button",{onClick:()=>{let s=n.filter((e,a)=>a!==t);r({...a,options:s,correctAnswer:a.correctAnswer===e?"":a.correctAnswer})},className:"text-red-400 hover:text-red-300 text-sm",children:"✕"})]},t)),n.length<8&&(0,s.jsx)("button",{onClick:()=>r({...a,options:[...n,""]}),className:"text-purple-400 hover:text-purple-300 text-sm",children:"+ Add Option"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Answer"}),(0,s.jsx)("input",{value:a.answer||"",onChange:e=>r({...a,answer:e.target.value}),className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Primary answer"})]}),(0,s.jsx)(y,{items:a.acceptedAnswers||[],onChange:e=>r({...a,acceptedAnswers:e}),label:"Accepted Answers (alternatives)",placeholder:"Type an alternative answer…"})]})]})}function q(e){let{q:t,set:a}=e;return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Prompt Label"}),(0,s.jsx)("input",{value:t.prompt||"",onChange:e=>a({...t,prompt:e.target.value}),className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"e.g. Name It, Fill in the Blank"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Answer"}),(0,s.jsx)("input",{value:t.answer||"",onChange:e=>a({...t,answer:e.target.value}),className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Primary answer"})]}),(0,s.jsx)(y,{items:t.acceptedAnswers||[],onChange:e=>a({...t,acceptedAnswers:e}),label:"Accepted Answers (alternatives)",placeholder:"Type an alternative answer…"})]})}function I(e){let{question:t,setQuestion:a}=e;switch(t.type){case"multiple_choice":return(0,s.jsx)(j,{q:t,set:a});case"open_ended":return(0,s.jsx)(w,{q:t,set:a});case"list":return(0,s.jsx)(N,{q:t,set:a});case"grouping":return(0,s.jsx)(k,{q:t,set:a});case"this_or_that":return(0,s.jsx)(C,{q:t,set:a});case"ranking":return(0,s.jsx)(S,{q:t,set:a});case"media":return(0,s.jsx)(A,{q:t,set:a});case"prompt":return(0,s.jsx)(q,{q:t,set:a});default:return(0,s.jsx)("div",{className:"text-gray-400 text-sm",children:"Unknown type"})}}function D(e){let{q:t,isSelected:a,onSelect:r,onDelete:n}=e,l=c.find(e=>e.value===t.type);return(0,s.jsxs)("div",{onClick:r,className:"flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ".concat(a?"bg-purple-700/40 border border-purple-500":"bg-gray-800 hover:bg-gray-750 border border-gray-700"),children:[(0,s.jsx)("span",{className:"text-lg",children:(null==l?void 0:l.icon)||"❓"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"text-sm font-medium truncate",children:t.question||"(untitled)"}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:[(null==l?void 0:l.label)||t.type," \xb7 ",t.difficulty]})]}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),n()},className:"text-red-400 hover:text-red-300 text-sm p-1",title:"Delete",children:"\uD83D\uDDD1️"})]})}function T(e){let{onImport:t,onClose:a}=e,[n,l]=(0,r.useState)(""),[o,i]=(0,r.useState)("");return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:a,children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-6 max-w-lg w-full max-h-[80vh] overflow-auto",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Import Questions"}),(0,s.jsx)("textarea",{value:n,onChange:e=>{l(e.target.value),i("")},placeholder:'Paste JSON here (array of questions or {"questions": [...]})',className:"w-full h-48 bg-gray-700 rounded-lg p-3 text-sm text-white font-mono placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500 resize-y"}),o&&(0,s.jsx)("p",{className:"text-red-400 text-sm mt-2",children:o}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-4",children:[(0,s.jsx)("button",{onClick:a,className:"px-4 py-2 rounded-lg bg-gray-600 hover:bg-gray-500 text-sm font-bold",children:"Cancel"}),(0,s.jsx)("button",{onClick:function(){try{let e=JSON.parse(n),s=Array.isArray(e)?e:e.questions;if(!Array.isArray(s))return void i('JSON must be an array or have a "questions" array');t(s),a()}catch(e){i("Invalid JSON")}},className:"px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-500 text-sm font-bold",children:"Import"})]})]})})}function E(e){let{onClose:t,onImportQuestions:a,onLoadJeopardyGame:n}=e,l="/triviaparty",[o,i]=(0,r.useState)("pool"),[c,d]=(0,r.useState)(!1),[u,x]=(0,r.useState)(""),[h,y]=(0,r.useState)([]),[b,f]=(0,r.useState)(new Set),[v,j]=(0,r.useState)(""),[w,N]=(0,r.useState)(""),[k,C]=(0,r.useState)(!1),[S,A]=(0,r.useState)(""),[q,I]=(0,r.useState)(""),[D,T]=(0,r.useState)(""),[E,L]=(0,r.useState)([]);async function O(){d(!0),x("");try{let[e,t]=await Promise.all([fetch("".concat(l,"/data/questions/sheets-import-questions.json")),fetch("".concat(l,"/data/questions/flagged-media-questions.json"))]);if(!e.ok)throw Error("Failed to load question pool");let a=await e.json(),s=Array.isArray(null==a?void 0:a.questions)?a.questions:[],r=t.ok?await t.json():{items:[]},n=Array.isArray(null==r?void 0:r.items)?r.items:[],o=new Set(n.map(e=>m(e.question||"",e.category||"")).filter(e=>"|"!==e)),i=new Set(w.split(/[\s,]+/).map(e=>Number(e.trim())).filter(e=>Number.isFinite(e)&&e>0)),c=p(v),d=s.map((e,t)=>({key:"pool-".concat(t+1),question:e,questionIdLabel:"Q".concat(t+1),source:"pool",flagged:!0===e.needsMediaReview||o.has(m(e.question||"",e.category))})).filter(e=>{if(k&&!e.flagged)return!1;if(i.size>0){let t=Number(e.questionIdLabel.replace("Q",""));if(!i.has(t))return!1}return(!c||!!JSON.stringify(e.question).toLowerCase().includes(c))&&!0}).slice(0,500);y(d),f(new Set),L([])}catch(e){x(e instanceof Error?e.message:"Failed to load questions"),y([])}finally{d(!1)}}async function J(){d(!0),x("");try{let e=await fetch("".concat(l,"/data/jeopardy/index.json"));if(!e.ok)throw Error("Failed to load Jeopardy index");let t=await e.json(),a=g(S),s=g(q),r=g(D),n=t.filter(e=>{if(0===a.length)return!0;let t=String(e.gameId).toLowerCase(),s=String(e.showNumber).toLowerCase(),r=(e.airDate||"").toLowerCase();return a.some(e=>t.includes(e)||s.includes(e)||r.includes(e))}).slice(0,30),o=[];for(let e of n){let t=await fetch("".concat(l,"/data/jeopardy/").concat(e.file));if(!t.ok)continue;let a=await t.json();for(let e of a.categories)for(let t of e.clues){let n=(t.topicTags||[]).map(e=>e.toLowerCase());if(s.length&&!s.every(e=>n.includes(e)))continue;if(r.length){let e=(t.clueId||"").toLowerCase();if(!r.some(t=>e.includes(t)))continue}let l={type:"open_ended",question:t.question,difficulty:"medium",category:e.name,answer:t.answer,acceptedAnswers:t.answer?[t.answer]:[]};o.push({key:"clue-".concat(t.clueId),question:l,questionIdLabel:t.clueId,source:"jeopardy",tags:t.topicTags||[],episode:"Game ".concat(a.gameId," \xb7 Show ").concat(a.showNumber," \xb7 ").concat(a.airDate)})}}L(n),y(o.slice(0,500)),f(new Set)}catch(e){x(e instanceof Error?e.message:"Failed to load Jeopardy clues"),y([]),L([])}finally{d(!1)}}async function U(e){d(!0),x("");try{let a=await fetch("".concat(l,"/data/jeopardy/").concat(e.file));if(!a.ok)throw Error("Failed to load ".concat(e.file));let s=await a.json();n(s),t()}catch(e){x(e instanceof Error?e.message:"Failed to load Jeopardy episode")}finally{d(!1)}}return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:t,children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-6 max-w-5xl w-full max-h-[88vh] overflow-auto",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4 gap-3",children:[(0,s.jsx)("h3",{className:"text-xl font-bold",children:"Load Existing Questions"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{i("pool"),y([]),f(new Set)},className:"px-3 py-1 rounded-lg text-sm ".concat("pool"===o?"bg-purple-600":"bg-gray-700 hover:bg-gray-600"),children:"Question Pool"}),(0,s.jsx)("button",{onClick:()=>{i("jeopardy"),y([]),f(new Set)},className:"px-3 py-1 rounded-lg text-sm ".concat("jeopardy"===o?"bg-purple-600":"bg-gray-700 hover:bg-gray-600"),children:"Jeopardy"})]})]}),"pool"===o?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,s.jsx)("input",{value:v,onChange:e=>j(e.target.value),placeholder:"Search text",className:"bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500"}),(0,s.jsx)("input",{value:w,onChange:e=>N(e.target.value),placeholder:"Question IDs (e.g. 12, 51, 90)",className:"bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500"}),(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-200",children:[(0,s.jsx)("input",{type:"checkbox",checked:k,onChange:e=>C(e.target.checked)}),"Flagged only"]})]}),(0,s.jsx)("button",{onClick:O,disabled:c,className:"px-3 py-1.5 rounded-lg bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 text-sm font-medium",children:c?"Loading…":"Search"})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,s.jsx)("input",{value:S,onChange:e=>A(e.target.value),placeholder:"Episodes: gameId/show#/date (e.g. 1001, 9180)",className:"bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500"}),(0,s.jsx)("input",{value:q,onChange:e=>I(e.target.value),placeholder:"Tags (comma-separated)",className:"bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500"}),(0,s.jsx)("input",{value:D,onChange:e=>T(e.target.value),placeholder:"Question IDs (clueId, e.g. g1001-s-c0-r0)",className:"bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,s.jsx)("button",{onClick:J,disabled:c,className:"px-3 py-1.5 rounded-lg bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 text-sm font-medium",children:c?"Loading…":"Search"}),E.length>0&&(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-lg p-3 space-y-2",children:[(0,s.jsx)("p",{className:"text-sm text-gray-300",children:"Load full episode into Jeopardy Creator:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:E.slice(0,12).map(e=>(0,s.jsx)("button",{onClick:()=>U(e),className:"px-2.5 py-1 rounded bg-emerald-700 hover:bg-emerald-600 text-xs",children:"Game ".concat(e.gameId," \xb7 Show ").concat(e.showNumber)},e.file))})]})]}),u&&(0,s.jsx)("p",{className:"text-red-400 text-sm mt-3",children:u}),(0,s.jsx)("div",{className:"mt-4 border border-gray-700 rounded-xl max-h-[45vh] overflow-auto",children:0===h.length?(0,s.jsx)("div",{className:"p-4 text-sm text-gray-400",children:"No results yet. Run a search above."}):(0,s.jsx)("div",{className:"divide-y divide-gray-700",children:h.map(e=>{var t;let a=b.has(e.key);return(0,s.jsx)("label",{className:"block p-3 hover:bg-gray-750 cursor-pointer",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("input",{type:"checkbox",checked:a,onChange:()=>{var t;return t=e.key,void f(e=>{let a=new Set(e);return a.has(t)?a.delete(t):a.add(t),a})},className:"mt-1"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-gray-100 truncate",children:e.question.question}),(0,s.jsxs)("div",{className:"text-xs text-gray-400 mt-1 flex flex-wrap gap-x-3 gap-y-1",children:[(0,s.jsx)("span",{children:e.questionIdLabel}),(0,s.jsx)("span",{children:e.question.type}),(0,s.jsx)("span",{children:"string"==typeof e.question.category?e.question.category:(null==(t=e.question.category)?void 0:t.name)||"no-category"}),e.flagged&&(0,s.jsx)("span",{className:"text-amber-300",children:"flagged"}),e.episode&&(0,s.jsx)("span",{children:e.episode}),e.tags&&e.tags.length>0&&(0,s.jsx)("span",{children:"tags: ".concat(e.tags.join(", "))})]})]})]})},e.key)})})}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,s.jsx)("button",{onClick:t,className:"px-4 py-2 rounded-lg bg-gray-600 hover:bg-gray-500 text-sm font-medium",children:"Close"}),(0,s.jsxs)("button",{onClick:function(){let e=h.filter(e=>b.has(e.key)).map(e=>e.question);e.length&&(a(e),t())},disabled:0===b.size,className:"px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 text-sm font-medium",children:["Load Selected (",b.size,")"]})]})]})})}function L(){var e,t,a;let[n,g]=(0,r.useState)([]),[p,m]=(0,r.useState)(null),[y,f]=(0,r.useState)(!1),[j,w]=(0,r.useState)(!1),[N,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)(!1),[A,q]=(0,r.useState)(""),[L,O]=(0,r.useState)([]),[J,U]=(0,r.useState)("questions"),[P,_]=(0,r.useState)(()=>v()),[G,R]=(0,r.useState)(!1);(0,r.useEffect)(()=>{S((0,o.oW)())},[]),(0,r.useEffect)(()=>{g(function(){try{let e=localStorage.getItem(u);return e?JSON.parse(e):[]}catch(e){return[]}}()),fetch("".concat("/triviaparty","/data/questions/sheets-import-questions.json")).then(e=>e.json()).then(e=>{O([...new Set((e.questions||[]).map(e=>e.category).filter(Boolean))].sort())}).catch(()=>{})},[]),(0,r.useEffect)(()=>{localStorage.setItem(u,JSON.stringify(n))},[n]);let B=(0,r.useCallback)(e=>{q(e),setTimeout(()=>q(""),2500)},[]),F=null!==p?n[p]:null;function M(e){null!==p&&g(t=>t.map((t,a)=>a===p?e:t))}async function H(){if(!n.length)return void B("No questions to save");let e=(0,o.o8)();if(!e){k(!0),B("Connect to GitHub first");return}R(!0);try{let t=await (0,o.nL)(e,n);B("Pushed to GitHub: +".concat(t.added," added, ").concat(t.skipped," skipped"))}catch(e){B(e instanceof Error?e.message:"Failed to push to GitHub")}finally{R(!1)}}async function Q(){let e=(0,o.o8)();if(!e){k(!0),B("Connect to GitHub first");return}R(!0);try{let t={...P,categories:P.categories.map(e=>({...e,clues:e.clues.map((t,a)=>({...t,clueId:b(P.gameId,e.round,e.position,a),rowIndex:a,category:e.name,round:e.round,isFinalJeopardy:"final"===e.round,value:"final"===e.round?null:t.value}))}))};await (0,o.Qf)(e,t),B("Pushed game ".concat(t.gameId," (show #").concat(t.showNumber,") to GitHub"))}catch(e){B(e instanceof Error?e.message:"Failed to push Jeopardy game")}finally{R(!1)}}let z=F?function(e){var t,a,s,r,n,l,o,i,c,d,u,g,p,m;let x=[];switch(!e.question.trim()&&x.push("Question text is required"),e.type){case"multiple_choice":(e.options||[]).filter(e=>e.trim()).length<2&&x.push("Need at least 2 options"),(null==(t=e.correctAnswer)?void 0:t.trim())||x.push("Select a correct answer");break;case"open_ended":(null==(a=e.answer)?void 0:a.trim())||x.push("Answer is required");break;case"list":(null==(s=e.answers)?void 0:s.length)||x.push("Add at least one answer");break;case"grouping":(null==(r=e.correctItems)?void 0:r.length)||x.push("Add at least one correct item"),(null==(n=e.items)?void 0:n.length)&&!(e.items.length<2)||x.push("Add at least 2 total items");break;case"this_or_that":(null==(l=e.categoryA)?void 0:l.trim())||x.push("Category A is required"),(null==(o=e.categoryB)?void 0:o.trim())||x.push("Category B is required"),(null==(i=e.items)?void 0:i.length)||x.push("Add at least one item");break;case"ranking":(null==(c=e.items)?void 0:c.length)&&!(e.items.length<2)||x.push("Add at least 2 items");break;case"media":{let t=(e.options||[]).some(e=>e.trim().length>0)||!!(null==(d=e.correctAnswer)?void 0:d.trim());(null==(u=e.mediaUrl)?void 0:u.trim())||x.push("Media URL is required"),t?((e.options||[]).filter(e=>e.trim().length>0).length<2&&x.push("Media multiple choice needs at least 2 options"),(null==(p=e.correctAnswer)?void 0:p.trim())||x.push("Select the correct media option")):(null==(g=e.answer)?void 0:g.trim())||x.push("Answer is required");break}case"prompt":(null==(m=e.answer)?void 0:m.trim())||x.push("Answer is required")}return x}(F):[];return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-950 text-white",children:[A&&(0,s.jsx)("div",{className:"fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-xl z-50 animate-pulse",children:A}),y&&(0,s.jsx)(T,{onImport:function(e){g(t=>[...t,...e]),B("Imported ".concat(e.length," questions"))},onClose:()=>f(!1)}),N&&(0,s.jsx)(x,{onClose:()=>k(!1),onSaved:()=>S((0,o.oW)())}),j&&(0,s.jsx)(E,{onClose:()=>w(!1),onImportQuestions:e=>{g(t=>[...t,...e]),U("questions"),B("Loaded ".concat(e.length," question").concat(1===e.length?"":"s"))},onLoadJeopardyGame:e=>{_(e),U("jeopardy"),B("Loaded Jeopardy episode ".concat(e.gameId))}}),(0,s.jsx)("div",{className:"border-b border-gray-800 bg-gray-900/80 backdrop-blur sticky top-0 z-40",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(l(),{href:"/",className:"text-purple-300 hover:text-purple-200 font-bold",children:"← Menu"}),(0,s.jsx)("h1",{className:"text-xl font-bold",children:"✏️ Creator"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>U("questions"),className:"px-3 py-1 rounded-lg text-sm ".concat("questions"===J?"bg-purple-600":"bg-gray-700 hover:bg-gray-600"),children:"Questions"}),(0,s.jsx)("button",{onClick:()=>U("jeopardy"),className:"px-3 py-1 rounded-lg text-sm ".concat("jeopardy"===J?"bg-purple-600":"bg-gray-700 hover:bg-gray-600"),children:"Jeopardy Game"})]}),"questions"===J&&(0,s.jsxs)("span",{className:"text-sm text-gray-400",children:[n.length," question",1!==n.length?"s":""]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>k(!0),className:"px-3 py-1.5 rounded-lg text-sm font-medium ".concat(C?"bg-green-700 hover:bg-green-600":"bg-yellow-700 hover:bg-yellow-600"),children:C?"\uD83D\uDD17 GitHub Connected":"⚙️ Connect GitHub"}),"questions"===J?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>f(!0),className:"px-3 py-1.5 rounded-lg bg-gray-700 hover:bg-gray-600 text-sm font-medium",children:"Import"}),(0,s.jsx)("button",{onClick:()=>w(!0),className:"px-3 py-1.5 rounded-lg bg-indigo-600 hover:bg-indigo-500 text-sm font-medium",children:"Load Existing"}),(0,s.jsx)("button",{onClick:function(){if(!n.length)return void B("No questions to export");!function(e,t){let a=new Blob([JSON.stringify({questions:e,count:e.length},null,2)],{type:"application/json"}),s=URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download=t,r.click(),URL.revokeObjectURL(s)}(n,"triviaparty-questions-".concat(new Date().toISOString().slice(0,10),".json")),B("Exported ".concat(n.length," questions"))},className:"px-3 py-1.5 rounded-lg bg-blue-600 hover:bg-blue-500 text-sm font-medium",children:"Export JSON"}),(0,s.jsx)("button",{onClick:H,disabled:G,className:"px-3 py-1.5 rounded-lg bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50 text-sm font-medium",children:G?"Pushing…":"Push to GitHub"}),n.length>0&&(0,s.jsx)("button",{onClick:function(){confirm("Delete all questions? This cannot be undone.")&&(g([]),m(null))},className:"px-3 py-1.5 rounded-lg bg-red-700 hover:bg-red-600 text-sm font-medium",children:"Clear All"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>_(v()),className:"px-3 py-1.5 rounded-lg bg-gray-700 hover:bg-gray-600 text-sm font-medium",children:"New Game"}),(0,s.jsx)("button",{onClick:()=>w(!0),className:"px-3 py-1.5 rounded-lg bg-indigo-600 hover:bg-indigo-500 text-sm font-medium",children:"Load Existing"}),(0,s.jsx)("button",{onClick:function(){let e={...P,categories:P.categories.map(e=>({...e,clues:e.clues.map((t,a)=>({...t,clueId:b(P.gameId,e.round,e.position,a),rowIndex:a,category:e.name,round:e.round,isFinalJeopardy:"final"===e.round,value:"final"===e.round?null:t.value}))}))},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="game-".concat(P.gameId,".json"),s.click(),URL.revokeObjectURL(a);let r=new Blob([JSON.stringify({gameId:e.gameId,showNumber:e.showNumber,airDate:e.airDate,season:e.season,isSpecial:e.isSpecial,tournamentType:e.tournamentType,file:"game-".concat(e.gameId,".json")},null,2)],{type:"application/json"}),n=URL.createObjectURL(r),l=document.createElement("a");l.href=n,l.download="game-".concat(e.gameId,".index-entry.json"),l.click(),URL.revokeObjectURL(n),B("Exported Jeopardy game + index entry")},className:"px-3 py-1.5 rounded-lg bg-blue-600 hover:bg-blue-500 text-sm font-medium",children:"Export Game JSON"}),(0,s.jsx)("button",{onClick:Q,disabled:G,className:"px-3 py-1.5 rounded-lg bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50 text-sm font-medium",children:G?"Pushing…":"Push Game to GitHub"})]})]})]})}),"questions"===J?(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6 flex gap-6",style:{minHeight:"calc(100vh - 60px)"},children:[(0,s.jsx)("div",{className:"w-80 shrink-0",children:(0,s.jsxs)("div",{className:"sticky top-20",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-xs text-gray-400 uppercase mb-2 font-bold",children:"Add New Question"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:c.map(e=>(0,s.jsxs)("button",{onClick:()=>(function(e){let t=h(e);g(e=>[...e,t]),m(n.length)})(e.value),className:"flex items-center gap-2 p-2 rounded-lg bg-gray-800 hover:bg-gray-700 border border-gray-700 text-sm transition-colors",children:[(0,s.jsx)("span",{children:e.icon}),(0,s.jsx)("span",{className:"truncate",children:e.label})]},e.value))})]}),(0,s.jsxs)("div",{className:"space-y-2 max-h-[calc(100vh-220px)] overflow-y-auto pr-1",children:[0===n.length&&(0,s.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,s.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCDD"}),(0,s.jsxs)("p",{className:"text-sm",children:["No questions yet.",(0,s.jsx)("br",{}),"Click a type above to start!"]})]}),n.map((e,t)=>(0,s.jsx)(D,{q:e,isSelected:p===t,onSelect:()=>m(t),onDelete:()=>{g(e=>e.filter((e,a)=>a!==t)),p===t?m(null):null!==p&&p>t&&m(p-1)}},t))]})]})}),(0,s.jsx)("div",{className:"flex-1 min-w-0",children:F?(0,s.jsxs)("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:null==(e=c.find(e=>e.value===F.type))?void 0:e.icon}),(0,s.jsx)("select",{value:F.type,onChange:e=>{let t=h(e.target.value);t.question=F.question,t.difficulty=F.difficulty,t.category=F.category,M(t)},className:"bg-gray-700 rounded-lg px-3 py-2 text-white font-bold outline-none focus:ring-2 focus:ring-purple-500",children:c.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:function(){if(null===p||!F)return;let e=JSON.parse(JSON.stringify(F));g(t=>[...t.slice(0,p+1),e,...t.slice(p+1)]),m(p+1),B("Duplicated!")},className:"px-3 py-1.5 rounded-lg bg-gray-700 hover:bg-gray-600 text-sm",title:"Duplicate",children:"\uD83D\uDCCB Duplicate"}),(0,s.jsx)("button",{onClick:function(){null!==p&&(g(e=>e.filter((e,t)=>t!==p)),m(null))},className:"px-3 py-1.5 rounded-lg bg-red-700 hover:bg-red-600 text-sm",title:"Delete",children:"\uD83D\uDDD1️ Delete"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Question / Title"}),(0,s.jsx)("textarea",{value:F.question,onChange:e=>M({...F,question:e.target.value}),rows:2,className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500 resize-y",placeholder:"Enter your question…"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Difficulty"}),(0,s.jsx)("select",{value:F.difficulty,onChange:e=>M({...F,difficulty:e.target.value}),className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500",children:d.map(e=>(0,s.jsx)("option",{value:e,children:e.replace(/_/g," ")},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Category"}),(0,s.jsx)("input",{value:"string"==typeof F.category?F.category:(null==(t=F.category)?void 0:t.name)||"",onChange:e=>M({...F,category:e.target.value}),list:"category-list",className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"e.g. ancient-history"}),(0,s.jsx)("datalist",{id:"category-list",children:L.map(e=>(0,s.jsx)("option",{value:e},e))})]})]})]}),(0,s.jsx)("hr",{className:"border-gray-700"}),(0,s.jsx)(I,{question:F,setQuestion:M}),z.length>0&&(0,s.jsxs)("div",{className:"bg-red-900/30 border border-red-700 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-red-400 text-sm font-bold mb-1",children:"Issues:"}),(0,s.jsx)("ul",{className:"list-disc list-inside text-red-300 text-sm space-y-1",children:z.map((e,t)=>(0,s.jsx)("li",{children:e},t))})]}),(0,s.jsxs)("details",{className:"bg-gray-800 rounded-lg",children:[(0,s.jsx)("summary",{className:"px-4 py-2 text-sm text-gray-400 cursor-pointer hover:text-gray-300",children:"JSON Preview"}),(0,s.jsx)("pre",{className:"px-4 pb-3 text-xs text-green-300 overflow-x-auto",children:JSON.stringify(F,null,2)})]})]}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsxs)("div",{className:"text-center text-gray-500",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"✏️"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Question Creator"}),(0,s.jsx)("p",{className:"text-gray-400 max-w-md",children:"Create trivia questions for all game types. Click a question type on the left to get started, or import existing questions from JSON."})]})})})]}):(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,s.jsxs)("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Game ID"}),(0,s.jsx)("input",{type:"number",value:P.gameId,onChange:e=>{let t=Number(e.target.value)||P.gameId;_(e=>({...e,gameId:t,categories:e.categories.map(e=>({...e,clues:e.clues.map((a,s)=>({...a,clueId:b(t,e.round,e.position,s)}))}))}))},className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Show Number"}),(0,s.jsx)("input",{type:"number",value:P.showNumber,onChange:e=>{let t=Number(e.target.value)||0;_(e=>({...e,showNumber:t,gameId:t,categories:e.categories.map(e=>({...e,clues:e.clues.map((a,s)=>({...a,clueId:b(t,e.round,e.position,s)}))}))}))},className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Air Date"}),(0,s.jsx)("input",{value:P.airDate,onChange:e=>_(t=>({...t,airDate:e.target.value})),className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500",placeholder:"YYYY-MM-DD or long date"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Season (optional)"}),(0,s.jsx)("input",{type:"number",value:null!=(a=P.season)?a:"",onChange:e=>{let t=e.target.value.trim();_(e=>({...e,season:t?Number(t):null}))},className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Tournament Type (optional)"}),(0,s.jsx)("input",{value:P.tournamentType||"",onChange:e=>_(t=>({...t,tournamentType:e.target.value||null})),className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,s.jsx)("input",{type:"checkbox",checked:P.isSpecial,onChange:e=>_(t=>({...t,isSpecial:e.target.checked}))}),"Special Episode"]})})]}),["single","double","final"].map(e=>{let t=P.categories.filter(t=>t.round===e).sort((e,t)=>e.position-t.position);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold capitalize",children:[e," Round"]}),t.map(t=>(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-4 space-y-3 border border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-xs uppercase text-gray-400",children:["Category ",t.position+1]}),(0,s.jsx)("input",{value:t.name,onChange:a=>{let s=a.target.value;_(a=>({...a,categories:a.categories.map(a=>a.round!==e||a.position!==t.position?a:{...a,name:s,clues:a.clues.map(e=>({...e,category:s}))})}))},className:"flex-1 bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Category name"})]}),t.clues.map((a,r)=>{var n,l,o;let c=a=>{_(s=>({...s,categories:s.categories.map(s=>s.round!==e||s.position!==t.position?s:{...s,clues:s.clues.map((e,t)=>t===r?{...e,...a}:e)})}))},d=!!a.mediaUrl;return(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-2 items-start",children:["final"!==e&&(0,s.jsx)("input",{type:"number",value:null!=(n=a.value)?n:0,onChange:e=>c({value:Number(e.target.value)||0}),className:"md:col-span-2 bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500"}),(0,s.jsx)("textarea",{value:a.question,onChange:e=>c({question:e.target.value}),rows:2,className:"".concat("final"===e?"md:col-span-8":"md:col-span-6"," bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500"),placeholder:"Clue question"}),(0,s.jsx)("input",{value:a.answer,onChange:e=>c({answer:e.target.value}),className:"md:col-span-4 bg-gray-700 rounded-lg px-3 py-2 text-white outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Correct answer"}),(0,s.jsxs)("div",{className:"md:col-span-12 flex flex-wrap gap-4 text-sm text-gray-300",children:[(0,s.jsxs)("label",{className:"flex items-center gap-1",children:[(0,s.jsx)("input",{type:"checkbox",checked:a.dailyDouble,onChange:e=>c({dailyDouble:e.target.checked})}),"Daily Double"]}),(0,s.jsxs)("label",{className:"flex items-center gap-1",children:[(0,s.jsx)("input",{type:"checkbox",checked:a.tripleStumper,onChange:e=>c({tripleStumper:e.target.checked})}),"Triple Stumper"]}),(0,s.jsxs)("label",{className:"flex items-center gap-1",children:[(0,s.jsx)("input",{type:"checkbox",checked:d,onChange:e=>{e.target.checked?c({mediaUrl:"",mediaType:"image",obscureMedia:!1}):c({mediaUrl:void 0,mediaType:void 0,mediaStart:void 0,mediaEnd:void 0,obscureMedia:void 0})}}),"\uD83D\uDDBC️ Media"]})]})]}),void 0!==d&&void 0!==a.mediaUrl&&(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-lg p-3 ml-4 space-y-2",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-2",children:[(0,s.jsxs)("select",{value:a.mediaType||"image",onChange:e=>c({mediaType:e.target.value}),className:"md:col-span-2 bg-gray-700 rounded-lg px-3 py-2 text-white text-sm outline-none focus:ring-2 focus:ring-purple-500",children:[(0,s.jsx)("option",{value:"image",children:"\uD83D\uDDBC️ Image"}),(0,s.jsx)("option",{value:"video",children:"\uD83C\uDFAC Video"}),(0,s.jsx)("option",{value:"audio",children:"\uD83D\uDD0A Audio"})]}),(0,s.jsx)("input",{value:a.mediaUrl||"",onChange:e=>{let t=e.target.value,s=t?(0,i.sM)(t):a.mediaType||"image";c({mediaUrl:t,mediaType:s})},className:"md:col-span-7 bg-gray-700 rounded-lg px-3 py-2 text-white text-sm placeholder-gray-500 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Media URL (image, YouTube, audio…)"}),(0,s.jsxs)("label",{className:"md:col-span-3 flex items-center gap-2 text-sm text-gray-300",children:[(0,s.jsx)("input",{type:"checkbox",checked:a.obscureMedia||!1,onChange:e=>c({obscureMedia:e.target.checked})}),"Obscure media"]})]}),"video"===a.mediaType&&(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Start (sec)"}),(0,s.jsx)("input",{type:"number",value:null!=(l=a.mediaStart)?l:"",onChange:e=>c({mediaStart:e.target.value?Number(e.target.value):void 0}),className:"w-full bg-gray-700 rounded-lg px-3 py-1.5 text-white text-sm outline-none focus:ring-2 focus:ring-purple-500",placeholder:"0"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"End (sec)"}),(0,s.jsx)("input",{type:"number",value:null!=(o=a.mediaEnd)?o:"",onChange:e=>c({mediaEnd:e.target.value?Number(e.target.value):void 0}),className:"w-full bg-gray-700 rounded-lg px-3 py-1.5 text-white text-sm outline-none focus:ring-2 focus:ring-purple-500",placeholder:"∞"})]})]}),a.mediaUrl&&(0,s.jsxs)("div",{className:"bg-black rounded-lg overflow-hidden max-h-32 flex items-center justify-center",children:["image"===a.mediaType&&(0,s.jsx)("img",{src:a.mediaUrl,alt:"Preview",className:"max-h-32 mx-auto rounded"}),"video"===a.mediaType&&(0,s.jsx)("span",{className:"text-gray-400 text-xs py-4",children:"\uD83C\uDFAC Video preview available in-game"}),"audio"===a.mediaType&&(0,s.jsx)("audio",{src:a.mediaUrl,controls:!0,className:"mx-auto my-2"})]})]})]},a.clueId)})]},"".concat(e,"-").concat(t.position)))]},e)})]})})]})}},5388:(e,t,a)=>{"use strict";function s(e,t,a){try{let s=new URL(e);if(s.pathname.startsWith("/clip/"))return null;let r="",n="",l="";if(s.hostname.includes("youtu.be")?(r=s.pathname.replace("/","").split("?")[0],n=s.searchParams.get("t")||s.searchParams.get("start")||"",l=s.searchParams.get("end")||""):(s.hostname.includes("youtube.com")||s.hostname.includes("youtube-nocookie.com"))&&(s.pathname.startsWith("/shorts/")?r=s.pathname.replace("/shorts/","").split("/")[0]:(s.pathname.startsWith("/embed/")?(r=s.pathname.replace("/embed/","").split("/")[0],n=s.searchParams.get("start")||""):(r=s.searchParams.get("v")||"",n=s.searchParams.get("t")||s.searchParams.get("start")||""),l=s.searchParams.get("end")||"")),!r)return null;n=n.replace(/s$/,"");let o=null!=t&&t>0?String(t):n,i=null!=a&&a>0?String(a):l,c="https://www.youtube.com/embed/".concat(r,"?rel=0&modestbranding=1");return o&&(c+="&start=".concat(encodeURIComponent(o))),i&&(c+="&end=".concat(encodeURIComponent(i))),c}catch(e){return null}}function r(e){return/\.(png|jpg|jpeg|gif|webp|svg)(\?|$)/i.test(e)?"image":/\.(mp3|wav|ogg|flac|aac|m4a)(\?|$)/i.test(e)?"audio":/youtube\.com|youtu\.be|\.mp4|\.webm|\.ogg/i.test(e)?"video":"image"}function n(e){return/youtube\.com\/clip\//i.test(e)}function l(e){return/\.(mp4|webm|ogg)(\?|$)/i.test(e)}a.d(t,{UM:()=>s,fH:()=>n,jB:()=>l,sM:()=>r})},9485:(e,t,a)=>{Promise.resolve().then(a.bind(a,2321))}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=9485)),_N_E=e.O()}]);