(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[864],{1060:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>C});var a=l(5155),n=l(2115);let s="jeopardy:clue:",o="jeopardy:tags";function r(e){try{let t=window.localStorage.getItem(s+e);if(!t)return u(e);return{...u(e),...JSON.parse(t)}}catch(t){return u(e)}}function i(e){if(window.localStorage.setItem(s+e.clueId,JSON.stringify(e)),e.topicTags.length>0){let t=Array.from(new Set([...c(),...e.topicTags])).sort();window.localStorage.setItem(o,JSON.stringify(t))}}function c(){try{let e=window.localStorage.getItem(o);return e?JSON.parse(e):[]}catch(e){return[]}}function u(e){return{clueId:e,topicTags:[],flagged:!1,mediaFlag:!1}}async function d(e,t){var l,a,n,s,o,i;let c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,u=await fetch("".concat(e,"/data/jeopardy/index.json")),d=await u.json(),m=[],p=null==(l=t.search)?void 0:l.toLowerCase();for(let l of d){if(m.length>=c)break;if((null==(a=t.seasons)?void 0:a.length)&&!t.seasons.includes(null!=(s=l.season)?s:-1)||(null==(n=t.gameIds)?void 0:n.length)&&!t.gameIds.includes(l.gameId))continue;let u=await fetch("".concat(e,"/data/jeopardy/").concat(l.file)),d=await u.json(),x={gameId:d.gameId,showNumber:d.showNumber,airDate:d.airDate,season:d.season,isSpecial:d.isSpecial,tournamentType:d.tournamentType};for(let e of d.categories)if(null==(o=t.rounds)||!o.length||t.rounds.includes(e.round)){for(let l of e.clues){if(!l.clueId||t.tripleStumpersOnly&&!l.tripleStumper||t.dailyDoublesOnly&&!l.dailyDouble||t.finalOnly&&!l.isFinalJeopardy||null!=t.minValue&&null!=l.value&&l.value<t.minValue||null!=t.maxValue&&null!=l.value&&l.value>t.maxValue||p&&!"".concat(l.question," ").concat(l.answer," ").concat(l.category).toLowerCase().includes(p))continue;let e=r(l.clueId);if((!t.flaggedOnly||e.flagged)&&(!t.mediaFlaggedOnly||e.mediaFlag)){if((null==(i=t.topicTags)?void 0:i.length)&&!t.topicTags.every(t=>e.topicTags.includes(t)))continue;if(m.push({clue:l,userData:e,game:x}),m.length>=c)break}}if(m.length>=c)break}}return m}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"single";return[...e.flatMap(e=>e.categories.filter(e=>e.round===a&&e.clues.length>=l))].sort(()=>Math.random()-.5).slice(0,t).map(e=>({...e,clues:[...e.clues].sort(()=>Math.random()-.5).slice(0,l)}))}let p="triviaparty:users",x="triviaparty:active-user",g={gamesPlayed:0,totalEndMoney:0,averageEndMoney:0,episodesCompleted:0,correctAnswers:0,incorrectAnswers:0,skippedQuestions:0};function b(e){return"triviaparty:user:".concat(e.toLowerCase())}function h(e,t){try{let l=window.localStorage.getItem(e);if(!l)return t;return JSON.parse(l)}catch(e){return t}}function f(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function y(){return h(p,[])}function w(e){let t=e.trim();if(!t)return{profile:{username:"",createdAt:new Date().toISOString()},stats:{...g},clueProgress:{},completedEpisodes:[]};let l=v(t);if(l)return l;let a={username:t,createdAt:new Date().toISOString()},n={profile:a,stats:{...g},clueProgress:{},completedEpisodes:[]};f(b(t),n);let s=y();return s.some(e=>e.username.toLowerCase()===t.toLowerCase())||(s.push(a),s.sort((e,t)=>e.username.localeCompare(t.username)),f(p,s)),n}function v(e){return e.trim()?h(b(e),null):null}function N(e,t,l){var a;let n=w(e);if(!t.clueId)return;let s=n.clueProgress[t.clueId],o={clueId:t.clueId,question:t.question,answer:t.answer,value:t.value,dailyDouble:t.dailyDouble,tripleStumper:t.tripleStumper,isFinalJeopardy:t.isFinalJeopardy,category:t.category,round:t.round,outcomes:[...null!=(a=null==s?void 0:s.outcomes)?a:[],l].slice(-30),lastOutcome:l,updatedAt:new Date().toISOString()};n.clueProgress[t.clueId]=o,"correct"===l&&(n.stats.correctAnswers+=1),"incorrect"===l&&(n.stats.incorrectAnswers+=1),"skip"===l&&(n.stats.skippedQuestions+=1),f(b(e),n)}function j(e){let{clue:t,value:l,onCorrect:s,onIncorrect:o,onSkip:u,respondentLabel:d}=e,[m,p]=(0,n.useState)(!1),[x,g]=(0,n.useState)(!1),[b,h]=(0,n.useState)(!1),[f,y]=(0,n.useState)(!1),[w,v]=(0,n.useState)([]),[N,j]=(0,n.useState)(""),[S,k]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(!t.clueId)return;let e=r(t.clueId);h(e.flagged),y(e.mediaFlag),v(e.topicTags),k(c()),p(!1),g(!1),j("")},[t.clueId]);let I=(0,n.useCallback)((e,l)=>{if(t.clueId){var a;h(e),y(l),a=t.clueId,i({...r(a),flagged:e,mediaFlag:l})}},[t.clueId]),C=(0,n.useCallback)(e=>{if(t.clueId){var l;v(e),l=t.clueId,i({...r(l),topicTags:e}),k(c())}},[t.clueId]);function D(e){let t=e.trim().toLowerCase();!t||w.includes(t)||(C([...w,t]),j(""))}let F=S.filter(e=>e.includes(N.toLowerCase())&&!w.includes(e));return(0,a.jsxs)("div",{className:"fixed inset-0 bg-blue-950 flex flex-col items-center justify-center z-50 p-6 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"text-yellow-400 text-lg mb-2 uppercase tracking-wide text-center",children:[t.category," — $",l]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center mb-4",children:[t.dailyDouble&&(0,a.jsx)("span",{className:"bg-red-600 text-white text-sm md:text-base font-bold px-4 py-2 rounded-full animate-pulse",children:"Daily Double!"}),t.tripleStumper&&(0,a.jsx)("span",{className:"bg-orange-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:"Triple Stumper"}),t.isFinalJeopardy&&(0,a.jsx)("span",{className:"bg-purple-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:"Final Jeopardy"}),b&&(0,a.jsx)("span",{className:"bg-yellow-500 text-blue-950 text-xs font-bold px-3 py-1 rounded-full",children:"\uD83D\uDEA9 Flagged"}),f&&(0,a.jsx)("span",{className:"bg-gray-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:"\uD83C\uDFAC Media"}),w.map(e=>(0,a.jsxs)("span",{className:"bg-blue-700 text-white text-xs font-bold px-3 py-1 rounded-full",children:["#",e]},e))]}),(0,a.jsx)("div",{className:"text-white text-2xl md:text-3xl text-center font-bold max-w-3xl mb-6 leading-snug",children:t.question}),d&&(0,a.jsxs)("div",{className:"text-blue-200 text-sm md:text-base mb-4",children:["Responding: ",(0,a.jsx)("span",{className:"text-yellow-300 font-bold",children:d})]}),m&&(0,a.jsx)("div",{className:"text-yellow-300 text-xl md:text-2xl text-center mb-6 italic max-w-3xl",children:'"'.concat(t.answer,'"')}),x&&(0,a.jsxs)("div",{className:"bg-blue-900 rounded-xl p-4 mb-4 w-full max-w-lg",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:w.map(e=>(0,a.jsxs)("span",{className:"bg-blue-700 text-white text-sm px-2 py-1 rounded-full flex items-center gap-1",children:["#",e,(0,a.jsx)("button",{onClick:()=>{C(w.filter(t=>t!==e))},className:"text-blue-300 hover:text-white",children:"\xd7"})]},e))}),(0,a.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,a.jsx)("input",{type:"text",value:N,onChange:e=>j(e.target.value),onKeyDown:e=>{"Enter"===e.key&&D(N)},placeholder:"Add topic tag…",className:"flex-1 bg-blue-800 text-white placeholder-blue-400 border border-blue-600 rounded-lg px-3 py-2 text-sm"}),(0,a.jsx)("button",{onClick:()=>D(N),className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-2 rounded-lg text-sm font-bold",children:"Add"})]}),F.length>0&&N.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:F.slice(0,8).map(e=>(0,a.jsx)("button",{onClick:()=>D(e),className:"bg-blue-800 hover:bg-blue-700 text-blue-200 text-xs px-2 py-1 rounded",children:e},e))}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:()=>I(!b,f),className:"flex items-center gap-1 text-sm px-3 py-2 rounded-lg font-bold transition-colors ".concat(b?"bg-yellow-500 text-blue-950":"bg-blue-800 text-blue-200 hover:bg-blue-700"),children:["\uD83D\uDEA9 ",b?"Flagged":"Flag"]}),(0,a.jsxs)("button",{onClick:()=>I(b,!f),className:"flex items-center gap-1 text-sm px-3 py-2 rounded-lg font-bold transition-colors ".concat(f?"bg-gray-400 text-blue-950":"bg-blue-800 text-blue-200 hover:bg-blue-700"),children:["\uD83C\uDFAC ",f?"Media Flagged":"Media Flag"]})]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3 justify-center",children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:s,className:"bg-green-600 hover:bg-green-500 px-8 py-3 rounded-xl font-bold text-xl",children:"✓ Correct"}),(0,a.jsx)("button",{onClick:o,className:"bg-red-600 hover:bg-red-500 px-8 py-3 rounded-xl font-bold text-xl",children:"✗ Wrong"}),(0,a.jsx)("button",{onClick:u,className:"bg-gray-600 hover:bg-gray-500 px-8 py-3 rounded-xl font-bold text-xl",children:"Skip"}),(0,a.jsx)("button",{onClick:()=>g(e=>!e),className:"bg-blue-700 hover:bg-blue-600 text-white px-4 py-3 rounded-xl font-bold text-sm",children:"\uD83C\uDFF7️ Tags"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>p(!0),className:"bg-yellow-400 text-blue-950 px-8 py-3 rounded-xl font-bold text-xl",children:"Show Answer"}),(0,a.jsx)("button",{onClick:()=>g(e=>!e),className:"bg-blue-700 hover:bg-blue-600 text-white px-4 py-3 rounded-xl font-bold text-sm",children:"\uD83C\uDFF7️ Tags"})]})})]})}let S=[200,400,600,800,1e3],k=[400,800,1200,1600,2e3];function I(e){var t,l,a,n;let s=(null!=(t=e.categories)?t:[]).map(e=>{var t,l,a,n,s;return{id:String(null!=(t=e.id)?t:Math.random()),name:String(null!=(l=e.name)?l:""),round:String(null!=(a=e.round)?a:"single"),position:Number(null!=(n=e.position)?n:0),clues:(null!=(s=e.clues)?s:[]).map((t,l)=>{var a,n,s,o,r,i,c,u;return{id:String(null!=(n=null!=(a=t.id)?a:t.clueId)?n:Math.random()),clueId:String(null!=(s=t.clueId)?s:""),question:String(null!=(o=t.question)?o:""),answer:String(null!=(r=t.answer)?r:""),value:null!=t.value?Number(t.value):null,dailyDouble:!!t.dailyDouble,tripleStumper:!!t.tripleStumper,isFinalJeopardy:"final"===String(e.round),category:String(null!=(i=e.name)?i:""),round:String(null!=(c=e.round)?c:"single"),rowIndex:Number(null!=(u=t.rowIndex)?u:l)}})}});return{id:String(null!=(l=e.id)?l:Math.random()),gameId:null!=e.gameId?Number(e.gameId):void 0,showNumber:Number(null!=(a=e.showNumber)?a:0),airDate:String(null!=(n=e.airDate)?n:""),season:null!=e.season?Number(e.season):null,isSpecial:!!e.isSpecial,tournamentType:null!=e.tournamentType?String(e.tournamentType):null,categories:s}}function C(){let[e,t]=(0,n.useState)(!0),[l,s]=(0,n.useState)("api"),[o,i]=(0,n.useState)([]),[c,u]=(0,n.useState)([]),[p,h]=(0,n.useState)([]),[C,D]=(0,n.useState)(!1),[F,M]=(0,n.useState)("competition"),[T,O]=(0,n.useState)("replay"),[E,J]=(0,n.useState)(null),[A,L]=(0,n.useState)("single"),[P,q]=(0,n.useState)({}),[_,B]=(0,n.useState)(null),[$,G]=(0,n.useState)(0),[R,V]=(0,n.useState)("Team 1, Team 2"),[z,Q]=(0,n.useState)([]),[W,K]=(0,n.useState)(0),[U,H]=(0,n.useState)(!1),[X,Y]=(0,n.useState)({}),[Z,ee]=(0,n.useState)(""),[et,el]=(0,n.useState)(!1),[ea,en]=(0,n.useState)(6),[es,eo]=(0,n.useState)(!0),[er,ei]=(0,n.useState)(!0),[ec,eu]=(0,n.useState)(!1),[ed,em]=(0,n.useState)(""),[ep,ex]=(0,n.useState)(""),[eg,eb]=(0,n.useState)(!0),[eh,ef]=(0,n.useState)(""),[ey,ew]=(0,n.useState)(null),[ev,eN]=(0,n.useState)([]),ej=(0,n.useMemo)(()=>ey?function(e){var t;let l=v(e);return null!=(t=null==l?void 0:l.stats)?t:{...g}}(ey):null,[ey]);async function eS(){if(p.length>0)return p;D(!0);let e="/triviaparty",t=[];for(let l of c){let a=await fetch("".concat(e,"/data/jeopardy/").concat(l.file));t.push(await a.json())}return h(t),D(!1),t}function ek(){let e=R.split(",").map(e=>e.trim()).filter(Boolean).slice(0,8);return 0===e.length?[{name:"Team 1",score:0},{name:"Team 2",score:0}]:e.map(e=>({name:e,score:0}))}function eI(e,t){let l=e.categories.filter(e=>e.round===t),a="double"===t?k:"final"===t?[0]:S,n={};l.forEach(e=>{n[e.id]={},e.clues.forEach((l,s)=>{var o;let r="final"===t?0:null!=(o=a[s])?o:(s+1)*("double"===t?400:200);n[e.id][r]={revealed:!1,clue:l}})}),q(n),L(t),B(null)}async function eC(e){let t=e;if("files-index"===l&&0===e.categories.length&&e.sourceFile){var a,n;let l=await fetch("".concat("/triviaparty","/data/jeopardy/").concat(e.sourceFile));a=await l.json(),n=e.sourceFile,t={id:String(a.gameId),gameId:a.gameId,showNumber:a.showNumber,airDate:a.airDate,season:a.season,isSpecial:a.isSpecial,tournamentType:a.tournamentType,sourceFile:n,categories:a.categories.map((e,t)=>({id:"".concat(a.gameId,"-").concat(e.round,"-").concat(t),name:e.name,round:e.round,position:e.position,clues:e.clues.map((e,l)=>({...e,id:e.clueId||"".concat(a.gameId,"-").concat(t,"-").concat(l)}))}))}}0!==t.categories.length&&(J(t),G(0),Q("competition"===F?ek():[]),K(0),eI(t,"single"))}async function eD(){let e=function(){let e=ed?Number(ed):null,t=ep?Number(ep):null;return o.filter(l=>(!!eg||!l.isSpecial)&&(null==e||null!=l.season&&!(l.season<e))&&(null==t||null!=l.season&&!(l.season>t)))}();if(0===e.length)return void alert("No episodes match those replay filters.");let t=e[Math.floor(Math.random()*e.length)];await eC(t)}async function eF(){let e="api"===l?o.map(e=>{var t;return{gameId:null!=(t=e.gameId)?t:0,showNumber:e.showNumber,airDate:e.airDate,season:e.season,isSpecial:e.isSpecial,tournamentType:e.tournamentType,categories:e.categories.map(e=>({name:e.name,round:e.round,position:e.position,clues:e.clues}))}}):await eS();if(!e.length)return;let t=[],a=m(e,ea,5,"single").map((e,t)=>({id:"rnd-s-".concat(t),name:e.name,round:"single",position:t,clues:e.clues.filter(e=>!ec||e.tripleStumper).map((e,l)=>({...e,id:e.clueId||"rnd-s-".concat(t,"-").concat(l)}))}));if(t.push(...a),es){let l=m(e,ea,5,"double").map((e,t)=>({id:"rnd-d-".concat(t),name:e.name,round:"double",position:t,clues:e.clues.filter(e=>!ec||e.tripleStumper).map((e,l)=>({...e,id:e.clueId||"rnd-d-".concat(t,"-").concat(l)}))}));t.push(...l)}if(er){let l=e.flatMap(e=>e.categories).filter(e=>"final"===e.round).flatMap(e=>e.clues);if(l.length>0){let e=l[Math.floor(Math.random()*l.length)];t.push({id:"rnd-final",name:e.category||"Final Jeopardy",round:"final",position:0,clues:[{...e,id:e.clueId||"rnd-final-0"}]})}}let n={id:"random-".concat(Date.now()),showNumber:0,airDate:"",season:null,isSpecial:!1,tournamentType:null,categories:t};J(n),G(0),Q("competition"===F?ek():[]),K(0),eI(n,"single")}async function eM(){el(!0);let e={...X,search:Z||void 0};try{let t=await d("/triviaparty",e,300),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,a=new Map;for(let t of e){let e=t.clue.category;a.has(e)||a.set(e,[]),a.get(e).push(t.clue)}return[...a.entries()].filter(e=>{let[,t]=e;return t.length>=1}).sort(()=>Math.random()-.5).slice(0,t).map((e,t)=>{let[a,n]=e;return{name:a,round:n[0].round,position:t,clues:[...n].sort(()=>Math.random()-.5).slice(0,l)}})}(t,ea,5);if(0===l.length){alert("No clues matched your custom filter."),el(!1);return}let a={id:"custom-".concat(Date.now()),showNumber:0,airDate:"",season:null,isSpecial:!1,tournamentType:null,categories:l.map((e,t)=>({id:"cst-".concat(t),name:e.name,round:e.round,position:e.position,clues:e.clues.map((e,l)=>({...e,id:e.clueId||"cst-".concat(t,"-").concat(l)}))}))};J(a),G(0),Q("competition"===F?ek():[]),K(0),eI(a,"single")}catch(e){alert("Error building custom game.")}el(!1)}function eT(){_&&(q(e=>({...e,[_.catId]:{...e[_.catId],[_.value]:{...e[_.catId][_.value],revealed:!0}}})),B(null))}function eO(e){if("competition"===F)return void Q(t=>t.map((t,l)=>l===W?{...t,score:t.score+e}:t));G(t=>t+e)}function eE(e){let t=e.trim();t&&(w(t),function(e){if(!e)return window.localStorage.removeItem(x);window.localStorage.setItem(x,e)}(t),ew(t),eN(y().map(e=>e.username)),ef(""))}if((0,n.useEffect)(()=>{ew(window.localStorage.getItem(x)),eN(y().map(e=>e.username))},[]),(0,n.useEffect)(()=>{!async function(){var e;try{let l=await fetch("/api/jeopardy?limit=200"),a=(null!=(e=(await l.json()).games)?e:[]).map(I);if(a.length>0){i(a),s("api"),t(!1);return}}catch(e){}try{let e=await fetch("".concat("/triviaparty","/data/jeopardy/index.json")),l=await e.json();if(l.length>0){u(l),i(l.map(e=>({id:String(e.gameId),gameId:e.gameId,showNumber:e.showNumber,airDate:e.airDate,season:e.season,isSpecial:e.isSpecial,tournamentType:e.tournamentType,sourceFile:e.file,categories:[]}))),s("files-index"),t(!1);return}}catch(e){}s("empty"),t(!1)}()},[]),e)return(0,a.jsx)("div",{className:"min-h-screen bg-blue-950 flex items-center justify-center text-white text-2xl",children:"Loading…"});if(E){var eJ,eA;let e=E.categories.some(e=>"final"===e.round),t=E.categories.some(e=>"double"===e.round);return(0,a.jsxs)("div",{className:"min-h-screen bg-blue-950 text-white p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4 gap-3",children:[(0,a.jsx)("button",{onClick:function(){if(ey){var e;!function(e,t){let l=w(e);l.stats.gamesPlayed+=1,l.stats.totalEndMoney+=t.endMoney,l.stats.averageEndMoney=Math.round(l.stats.totalEndMoney/l.stats.gamesPlayed),t.showNumber&&!l.completedEpisodes.includes(t.showNumber)&&(l.completedEpisodes.push(t.showNumber),l.stats.episodesCompleted=l.completedEpisodes.length),f(b(e),l)}(ey,{endMoney:"competition"===F?0:$,showNumber:null!=(e=null==E?void 0:E.showNumber)?e:null})}J(null),B(null)},className:"text-yellow-400 hover:underline",children:"← Back"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-yellow-400",children:E.showNumber?"Show #".concat(E.showNumber):"Jeopardy"}),(0,a.jsxs)("div",{className:"text-sm text-gray-300",children:["competition"===F?"Competition":"Practice"," mode"]})]}),"competition"===F?(0,a.jsx)("div",{className:"text-right",children:z.map((e,t)=>(0,a.jsxs)("div",{className:"text-sm ".concat(t===W?"text-yellow-300 font-bold":"text-white"),children:[e.name,": $",e.score.toLocaleString()]},e.name))}):(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",$.toLocaleString()]})]}),"competition"===F&&z.length>0&&(0,a.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[(0,a.jsx)("label",{className:"text-sm text-blue-300",children:"Responding team:"}),(0,a.jsx)("select",{value:W,onChange:e=>K(Number(e.target.value)),className:"bg-blue-800 border border-blue-600 rounded px-2 py-1 text-sm",children:z.map((e,t)=>(0,a.jsx)("option",{value:t,children:e.name},e.name+t))})]}),(0,a.jsxs)("div",{className:"flex gap-2 mb-4 flex-wrap",children:[(0,a.jsx)("button",{onClick:()=>eI(E,"single"),className:"px-4 py-2 rounded-lg font-bold ".concat("single"===A?"bg-yellow-400 text-blue-950":"bg-blue-800"),children:"Jeopardy!"}),t&&(0,a.jsx)("button",{onClick:()=>eI(E,"double"),className:"px-4 py-2 rounded-lg font-bold ".concat("double"===A?"bg-yellow-400 text-blue-950":"bg-blue-800"),children:"Double Jeopardy!"}),e&&(0,a.jsx)("button",{onClick:()=>eI(E,"final"),className:"px-4 py-2 rounded-lg font-bold ".concat("final"===A?"bg-yellow-400 text-blue-950":"bg-blue-800"),children:"Final Jeopardy"})]}),_&&(0,a.jsx)(j,{clue:_.clue,value:_.value,onCorrect:function(){_&&(ey&&N(ey,_.clue,"correct"),eO(_.value),eT())},onIncorrect:function(){_&&(ey&&N(ey,_.clue,"incorrect"),eO(-_.value),eT())},onSkip:function(){_&&(ey&&N(ey,_.clue,"skip"),eT())},respondentLabel:"competition"===F&&null!=(eA=null==(eJ=z[W])?void 0:eJ.name)?eA:void 0}),function(){if(!E)return null;let e=E.categories.filter(e=>e.round===A);return(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:e.map(e=>(0,a.jsx)("th",{className:"bg-blue-800 p-3 text-center text-sm font-bold uppercase border border-blue-900",children:e.name},e.id))})}),(0,a.jsx)("tbody",{children:("double"===A?k:"final"===A?[0]:S).map(t=>(0,a.jsx)("tr",{children:e.map(e=>{var l;let n=null==(l=P[e.id])?void 0:l[t];if(!n)return(0,a.jsx)("td",{className:"border border-blue-900 p-1",children:(0,a.jsx)("div",{className:"w-full h-16 bg-blue-900 rounded"})},e.id);let s=n.clue.clueId?r(n.clue.clueId):null,o=null==s?void 0:s.flagged,i=null==s?void 0:s.mediaFlag,c=U?"bg-blue-700 hover:bg-blue-600 text-yellow-400":"bg-orange-800 hover:bg-orange-700 text-yellow-400";return(0,a.jsx)("td",{className:"border border-blue-900 p-1",children:n.revealed?(0,a.jsx)("div",{className:"w-full h-16 bg-blue-900 rounded"}):(0,a.jsxs)("button",{onClick:()=>(function(e,t,l){let a=l;if(e.dailyDouble&&"final"!==A){let e=window.prompt("Daily Double! Enter your wager:",String(Math.max(200,l))),t=e?Number(e.replace(/[^\d]/g,"")):NaN;!Number.isNaN(t)&&t>0&&(a=t)}B({clue:e,catId:t,value:a})})(n.clue,e.id,t),className:"w-full h-16 font-bold text-xl rounded transition-colors relative ".concat(n.clue.tripleStumper?c:"bg-blue-700 hover:bg-blue-600 text-yellow-400"),children:["final"===A?"FINAL":"$".concat(t),(o||i)&&(0,a.jsxs)("span",{className:"absolute top-1 right-1 text-xs",children:[o?"\uD83D\uDEA9":"",i?"\uD83C\uDFAC":""]})]})},e.id)})},t))})]})})}()]})}return(0,a.jsxs)("div",{className:"min-h-screen bg-blue-950 text-white p-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-yellow-400 mb-2 text-center",children:"Jeopardy!"}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto bg-blue-900 rounded-xl p-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:eh,onChange:e=>ef(e.target.value),placeholder:"Enter username",className:"bg-blue-800 border border-blue-600 rounded px-3 py-2 text-sm flex-1"}),(0,a.jsx)("button",{onClick:()=>eE(eh),className:"bg-yellow-400 text-blue-950 font-bold px-4 py-2 rounded",children:"Log In"}),ev.map(e=>(0,a.jsx)("button",{onClick:()=>eE(e),className:"bg-blue-800 hover:bg-blue-700 text-sm px-3 py-2 rounded",children:e},e))]}),ey&&ej&&(0,a.jsxs)("div",{className:"mt-3 text-sm text-blue-200 grid grid-cols-2 md:grid-cols-4 gap-2",children:[(0,a.jsxs)("div",{children:["User: ",(0,a.jsx)("span",{className:"text-yellow-300 font-bold",children:ey})]}),(0,a.jsxs)("div",{children:["Games: ",ej.gamesPlayed]}),(0,a.jsxs)("div",{children:["Avg end money: $",ej.averageEndMoney.toLocaleString()]}),(0,a.jsxs)("div",{children:["Episodes done: ",ej.episodesCompleted]}),(0,a.jsxs)("div",{children:["Correct: ",ej.correctAnswers]}),(0,a.jsxs)("div",{children:["Wrong: ",ej.incorrectAnswers]}),(0,a.jsxs)("div",{children:["Skipped: ",ej.skippedQuestions]})]})]}),(0,a.jsx)("div",{className:"flex justify-center gap-2 mb-4",children:["competition","practice"].map(e=>(0,a.jsx)("button",{onClick:()=>M(e),className:"px-5 py-2 rounded-lg font-bold capitalize ".concat(F===e?"bg-yellow-400 text-blue-950":"bg-blue-800 hover:bg-blue-700"),children:e},e))}),"competition"===F&&(0,a.jsxs)("div",{className:"max-w-3xl mx-auto bg-blue-900 rounded-xl p-4 mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-blue-300 mb-1",children:"Players/teams (comma separated)"}),(0,a.jsx)("input",{value:R,onChange:e=>V(e.target.value),placeholder:"Team 1, Team 2",className:"w-full bg-blue-800 border border-blue-600 rounded px-3 py-2"})]}),(0,a.jsxs)("div",{className:"max-w-3xl mx-auto flex items-center justify-center gap-2 mb-5 flex-wrap",children:[["replay","random","custom","learn"].map(e=>(0,a.jsx)("button",{onClick:()=>O(e),className:"px-4 py-2 rounded-lg font-bold capitalize ".concat(T===e?"bg-yellow-400 text-blue-950":"bg-blue-800 hover:bg-blue-700"),children:e},e)),(0,a.jsxs)("label",{className:"text-sm text-blue-300 flex items-center gap-2 ml-3",children:[(0,a.jsx)("input",{type:"checkbox",checked:U,onChange:e=>H(e.target.checked)}),"Triple Stumper as blue"]})]}),"replay"===T&&(0,a.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,a.jsxs)("div",{className:"bg-blue-900 rounded-xl p-4 mb-4 grid md:grid-cols-4 gap-3",children:[(0,a.jsx)("input",{value:ed,onChange:e=>em(e.target.value),placeholder:"Min season",className:"bg-blue-800 border border-blue-600 rounded px-3 py-2 text-sm"}),(0,a.jsx)("input",{value:ep,onChange:e=>ex(e.target.value),placeholder:"Max season",className:"bg-blue-800 border border-blue-600 rounded px-3 py-2 text-sm"}),(0,a.jsxs)("label",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:eg,onChange:e=>eb(e.target.checked)}),"Include specials"]}),(0,a.jsx)("button",{onClick:eD,className:"bg-yellow-400 text-blue-950 font-bold rounded px-3 py-2",children:"Random replay episode"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(e=>(0,a.jsxs)("button",{onClick:()=>eC(e),className:"bg-blue-800 hover:bg-blue-700 rounded-xl p-6 text-left",children:[(0,a.jsxs)("div",{className:"text-xl font-bold",children:["Show #",e.showNumber]}),(0,a.jsx)("div",{className:"text-sm text-blue-300",children:e.airDate}),e.season&&(0,a.jsxs)("div",{className:"text-sm text-blue-300",children:["Season ",e.season]})]},e.id))})]}),"random"===T&&(0,a.jsxs)("div",{className:"max-w-xl mx-auto bg-blue-900 rounded-xl p-6 space-y-3",children:[(0,a.jsx)("label",{className:"block text-sm text-blue-300",children:"Number of categories"}),(0,a.jsx)("input",{type:"number",min:2,max:8,value:ea,onChange:e=>en(Math.max(2,Math.min(8,Number(e.target.value)||6))),className:"w-full bg-blue-800 border border-blue-600 rounded px-3 py-2"}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:es,onChange:e=>eo(e.target.checked)})," Enable Double Jeopardy"]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:ec,onChange:e=>eu(e.target.checked)})," Triple Jeopardy (triple stumpers only)"]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:er,onChange:e=>ei(e.target.checked)})," Add Final Jeopardy"]}),(0,a.jsx)("button",{onClick:eF,disabled:C,className:"w-full bg-yellow-400 text-blue-950 font-bold py-3 rounded-xl disabled:opacity-60",children:C?"Loading clue library…":"Build Random Game"})]}),"custom"===T&&(0,a.jsxs)("div",{className:"max-w-2xl mx-auto bg-blue-900 rounded-xl p-6 space-y-4",children:[(0,a.jsx)("input",{type:"text",value:Z,onChange:e=>ee(e.target.value),placeholder:"Search clues, answers, categories",className:"w-full bg-blue-800 border border-blue-600 rounded px-3 py-2"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-3",children:[(0,a.jsxs)("label",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:!!X.dailyDoublesOnly,onChange:e=>Y(t=>({...t,dailyDoublesOnly:e.target.checked||void 0}))})," Daily Doubles only"]}),(0,a.jsxs)("label",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:!!X.tripleStumpersOnly,onChange:e=>Y(t=>({...t,tripleStumpersOnly:e.target.checked||void 0}))})," Triple stumpers only"]}),(0,a.jsxs)("label",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:!!X.finalOnly,onChange:e=>Y(t=>({...t,finalOnly:e.target.checked||void 0}))})," Final only"]}),(0,a.jsxs)("label",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:!!X.flaggedOnly,onChange:e=>Y(t=>({...t,flaggedOnly:e.target.checked||void 0}))})," Flagged only"]})]}),(0,a.jsx)("button",{onClick:eM,disabled:et,className:"w-full bg-yellow-400 text-blue-950 font-bold py-3 rounded-xl disabled:opacity-60",children:et?"Building…":"Build Custom Game"})]}),"learn"===T&&(0,a.jsxs)("div",{className:"max-w-xl mx-auto text-center bg-blue-900 rounded-xl p-6",children:[(0,a.jsx)("p",{className:"text-blue-200 mb-4",children:"Study from your missed and skipped clues."}),(0,a.jsx)("button",{onClick:function(){if(!ey)return void alert("Log in first to use Learn mode.");let e=function(e){let t=v(e);return t?Object.values(t.clueProgress).filter(e=>"incorrect"===e.lastOutcome||"skip"===e.lastOutcome).sort((e,t)=>t.updatedAt.localeCompare(e.updatedAt)):[]}(ey);if(0===e.length)return void alert("No missed clues yet. Miss or skip clues in play to build your Learn deck.");let t=new Map;for(let l of e)t.has(l.category)||t.set(l.category,[]),t.get(l.category).push({id:l.clueId,clueId:l.clueId,question:l.question,answer:l.answer,value:l.value,dailyDouble:l.dailyDouble,tripleStumper:l.tripleStumper,isFinalJeopardy:l.isFinalJeopardy,category:l.category,round:"single",rowIndex:0});let l=[...t.entries()].slice(0,ea).map((e,t)=>{let[l,a]=e;return{id:"learn-".concat(t),name:l,round:"single",position:t,clues:a.slice(0,5).map((e,t)=>({...e,rowIndex:t}))}}),a={id:"learn-".concat(Date.now()),showNumber:0,airDate:"",season:null,isSpecial:!1,tournamentType:null,categories:l};J(a),G(0),Q([]),eI(a,"single")},className:"bg-yellow-400 text-blue-950 px-8 py-3 rounded-xl font-bold",children:"Start Learn Game"})]}),"empty"===l&&(0,a.jsx)("p",{className:"text-center mt-6 text-blue-300",children:"No Jeopardy data loaded yet."})]})}},9705:(e,t,l)=>{Promise.resolve().then(l.bind(l,1060))}},e=>{e.O(0,[441,255,358],()=>e(e.s=9705)),_N_E=e.O()}]);