(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[864],{412:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>y});var a=t(5155),n=t(2115);let s="jeopardy:clue:",o="jeopardy:tags";function i(e){try{let l=window.localStorage.getItem(s+e);if(!l)return u(e);return{...u(e),...JSON.parse(l)}}catch(l){return u(e)}}function r(e){if(window.localStorage.setItem(s+e.clueId,JSON.stringify(e)),e.topicTags.length>0){let l=Array.from(new Set([...c(),...e.topicTags])).sort();window.localStorage.setItem(o,JSON.stringify(l))}}function c(){try{let e=window.localStorage.getItem(o);return e?JSON.parse(e):[]}catch(e){return[]}}function u(e){return{clueId:e,topicTags:[],flagged:!1,mediaFlag:!1}}async function d(e,l){var t,a,n,s,o,r;let c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,u=await fetch("".concat(e,"/data/jeopardy/index.json")),d=await u.json(),m=[],x=null==(t=l.search)?void 0:t.toLowerCase();for(let t of d){if(m.length>=c)break;if((null==(a=l.seasons)?void 0:a.length)&&!l.seasons.includes(null!=(s=t.season)?s:-1)||(null==(n=l.gameIds)?void 0:n.length)&&!l.gameIds.includes(t.gameId))continue;let u=await fetch("".concat(e,"/data/jeopardy/").concat(t.file)),d=await u.json(),p={gameId:d.gameId,showNumber:d.showNumber,airDate:d.airDate,season:d.season,isSpecial:d.isSpecial,tournamentType:d.tournamentType};for(let e of d.categories)if(null==(o=l.rounds)||!o.length||l.rounds.includes(e.round)){for(let t of e.clues){if(!t.clueId||l.tripleStumpersOnly&&!t.tripleStumper||l.dailyDoublesOnly&&!t.dailyDouble||l.finalOnly&&!t.isFinalJeopardy||null!=l.minValue&&null!=t.value&&t.value<l.minValue||null!=l.maxValue&&null!=t.value&&t.value>l.maxValue||x&&!"".concat(t.question," ").concat(t.answer," ").concat(t.category).toLowerCase().includes(x))continue;let e=i(t.clueId);if((!l.flaggedOnly||e.flagged)&&(!l.mediaFlaggedOnly||e.mediaFlag)){if((null==(r=l.topicTags)?void 0:r.length)&&!l.topicTags.every(l=>e.topicTags.includes(l)))continue;if(m.push({clue:t,userData:e,game:p}),m.length>=c)break}}if(m.length>=c)break}}return m}function m(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"single";return[...e.flatMap(e=>e.categories.filter(e=>e.round===a&&e.clues.length>=t))].sort(()=>Math.random()-.5).slice(0,l).map(e=>({...e,clues:[...e.clues].sort(()=>Math.random()-.5).slice(0,t)}))}function x(e){let{clue:l,value:t,onCorrect:s,onIncorrect:o,onSkip:u,respondentLabel:d}=e,[m,x]=(0,n.useState)(!1),[p,b]=(0,n.useState)(!1),[g,h]=(0,n.useState)(!1),[f,y]=(0,n.useState)(!1),[w,j]=(0,n.useState)([]),[v,N]=(0,n.useState)(""),[S,k]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(!l.clueId)return;let e=i(l.clueId);h(e.flagged),y(e.mediaFlag),j(e.topicTags),k(c()),x(!1),b(!1),N("")},[l.clueId]);let C=(0,n.useCallback)((e,t)=>{if(l.clueId){var a;h(e),y(t),a=l.clueId,r({...i(a),flagged:e,mediaFlag:t})}},[l.clueId]),I=(0,n.useCallback)(e=>{if(l.clueId){var t;j(e),t=l.clueId,r({...i(t),topicTags:e}),k(c())}},[l.clueId]);function D(e){let l=e.trim().toLowerCase();!l||w.includes(l)||(I([...w,l]),N(""))}let T=S.filter(e=>e.includes(v.toLowerCase())&&!w.includes(e));return(0,a.jsxs)("div",{className:"fixed inset-0 bg-blue-950 flex flex-col items-center justify-center z-50 p-6 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"text-yellow-400 text-lg mb-2 uppercase tracking-wide text-center",children:[l.category," — $",t]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center mb-4",children:[l.dailyDouble&&(0,a.jsx)("span",{className:"bg-red-600 text-white text-sm md:text-base font-bold px-4 py-2 rounded-full animate-pulse",children:"Daily Double!"}),l.tripleStumper&&(0,a.jsx)("span",{className:"bg-orange-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:"Triple Stumper"}),l.isFinalJeopardy&&(0,a.jsx)("span",{className:"bg-purple-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:"Final Jeopardy"}),g&&(0,a.jsx)("span",{className:"bg-yellow-500 text-blue-950 text-xs font-bold px-3 py-1 rounded-full",children:"\uD83D\uDEA9 Flagged"}),f&&(0,a.jsx)("span",{className:"bg-gray-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:"\uD83C\uDFAC Media"}),w.map(e=>(0,a.jsxs)("span",{className:"bg-blue-700 text-white text-xs font-bold px-3 py-1 rounded-full",children:["#",e]},e))]}),(0,a.jsx)("div",{className:"text-white text-2xl md:text-3xl text-center font-bold max-w-3xl mb-6 leading-snug",children:l.question}),d&&(0,a.jsxs)("div",{className:"text-blue-200 text-sm md:text-base mb-4",children:["Responding: ",(0,a.jsx)("span",{className:"text-yellow-300 font-bold",children:d})]}),m&&(0,a.jsx)("div",{className:"text-yellow-300 text-xl md:text-2xl text-center mb-6 italic max-w-3xl",children:'"'.concat(l.answer,'"')}),p&&(0,a.jsxs)("div",{className:"bg-blue-900 rounded-xl p-4 mb-4 w-full max-w-lg",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:w.map(e=>(0,a.jsxs)("span",{className:"bg-blue-700 text-white text-sm px-2 py-1 rounded-full flex items-center gap-1",children:["#",e,(0,a.jsx)("button",{onClick:()=>{I(w.filter(l=>l!==e))},className:"text-blue-300 hover:text-white",children:"\xd7"})]},e))}),(0,a.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,a.jsx)("input",{type:"text",value:v,onChange:e=>N(e.target.value),onKeyDown:e=>{"Enter"===e.key&&D(v)},placeholder:"Add topic tag…",className:"flex-1 bg-blue-800 text-white placeholder-blue-400 border border-blue-600 rounded-lg px-3 py-2 text-sm"}),(0,a.jsx)("button",{onClick:()=>D(v),className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-2 rounded-lg text-sm font-bold",children:"Add"})]}),T.length>0&&v.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:T.slice(0,8).map(e=>(0,a.jsx)("button",{onClick:()=>D(e),className:"bg-blue-800 hover:bg-blue-700 text-blue-200 text-xs px-2 py-1 rounded",children:e},e))}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:()=>C(!g,f),className:"flex items-center gap-1 text-sm px-3 py-2 rounded-lg font-bold transition-colors ".concat(g?"bg-yellow-500 text-blue-950":"bg-blue-800 text-blue-200 hover:bg-blue-700"),children:["\uD83D\uDEA9 ",g?"Flagged":"Flag"]}),(0,a.jsxs)("button",{onClick:()=>C(g,!f),className:"flex items-center gap-1 text-sm px-3 py-2 rounded-lg font-bold transition-colors ".concat(f?"bg-gray-400 text-blue-950":"bg-blue-800 text-blue-200 hover:bg-blue-700"),children:["\uD83C\uDFAC ",f?"Media Flagged":"Media Flag"]})]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3 justify-center",children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:s,className:"bg-green-600 hover:bg-green-500 px-8 py-3 rounded-xl font-bold text-xl",children:"✓ Correct"}),(0,a.jsx)("button",{onClick:o,className:"bg-red-600 hover:bg-red-500 px-8 py-3 rounded-xl font-bold text-xl",children:"✗ Wrong"}),(0,a.jsx)("button",{onClick:u,className:"bg-gray-600 hover:bg-gray-500 px-8 py-3 rounded-xl font-bold text-xl",children:"Skip"}),(0,a.jsx)("button",{onClick:()=>b(e=>!e),className:"bg-blue-700 hover:bg-blue-600 text-white px-4 py-3 rounded-xl font-bold text-sm",children:"\uD83C\uDFF7️ Tags"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>x(!0),className:"bg-yellow-400 text-blue-950 px-8 py-3 rounded-xl font-bold text-xl",children:"Show Answer"}),(0,a.jsx)("button",{onClick:()=>b(e=>!e),className:"bg-blue-700 hover:bg-blue-600 text-white px-4 py-3 rounded-xl font-bold text-sm",children:"\uD83C\uDFF7️ Tags"})]})})]})}let p=[200,400,600,800,1e3],b=[400,800,1200,1600,2e3],g=[600,1200,1800,2400,3e3];function h(e){var l,t,a,n;let s=(null!=(l=e.categories)?l:[]).map(e=>{var l,t,a,n,s;return{id:String(null!=(l=e.id)?l:Math.random()),name:String(null!=(t=e.name)?t:""),round:String(null!=(a=e.round)?a:"single"),position:Number(null!=(n=e.position)?n:0),clues:(null!=(s=e.clues)?s:[]).map((l,t)=>{var a,n,s,o,i,r,c,u;return{id:String(null!=(n=null!=(a=l.id)?a:l.clueId)?n:Math.random()),clueId:String(null!=(s=l.clueId)?s:""),question:String(null!=(o=l.question)?o:""),answer:String(null!=(i=l.answer)?i:""),value:null!=l.value?Number(l.value):null,dailyDouble:!!l.dailyDouble,tripleStumper:!!l.tripleStumper,isFinalJeopardy:"final"===String(e.round),category:String(null!=(r=e.name)?r:""),round:String(null!=(c=e.round)?c:"single"),rowIndex:Number(null!=(u=l.rowIndex)?u:t)}})}});return{id:String(null!=(t=e.id)?t:Math.random()),gameId:null!=e.gameId?Number(e.gameId):void 0,showNumber:Number(null!=(a=e.showNumber)?a:0),airDate:String(null!=(n=e.airDate)?n:""),season:null!=e.season?Number(e.season):null,isSpecial:!!e.isSpecial,tournamentType:null!=e.tournamentType?String(e.tournamentType):null,categories:s}}async function f(e,l){let t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!t.ok)throw Error((await t.json().catch(()=>({}))).error||"Request failed");return t.json().catch(()=>({}))}function y(){let[e,l]=(0,n.useState)(!0),[t,s]=(0,n.useState)("api"),[o,r]=(0,n.useState)([]),[c,u]=(0,n.useState)([]),[y,w]=(0,n.useState)([]),[j,v]=(0,n.useState)(!1),[N,S]=(0,n.useState)({loaded:0,total:0}),[k,C]=(0,n.useState)("competition"),[I,D]=(0,n.useState)("replay"),[T,F]=(0,n.useState)(!1),[M,J]=(0,n.useState)(null),[O,E]=(0,n.useState)("single"),[L,A]=(0,n.useState)({}),[q,P]=(0,n.useState)(null),[R,_]=(0,n.useState)(0),[B,$]=(0,n.useState)("Team 1, Team 2"),[G,V]=(0,n.useState)([]),[z,K]=(0,n.useState)(0),[U,W]=(0,n.useState)(!1),[H,Q]=(0,n.useState)(6),[X,Y]=(0,n.useState)(!0),[Z,ee]=(0,n.useState)(!1),[el,et]=(0,n.useState)(!0),[ea,en]=(0,n.useState)(""),[es,eo]=(0,n.useState)({}),[ei,er]=(0,n.useState)(!1),[ec,eu]=(0,n.useState)([]),[ed,em]=(0,n.useState)(!0),[ex,ep]=(0,n.useState)([]),[eb,eg]=(0,n.useState)(null),[eh,ef]=(0,n.useState)(null);async function ey(){if(y.length>0)return y;if("api"===t){let e=o.map(e=>{var l;return{gameId:null!=(l=e.gameId)?l:0,showNumber:e.showNumber,airDate:e.airDate,season:e.season,isSpecial:e.isSpecial,tournamentType:e.tournamentType,categories:e.categories.map(e=>({name:e.name,round:"triple"===e.round?"double":e.round,position:e.position,clues:e.clues}))}});return w(e),e}v(!0),S({loaded:0,total:c.length});let e="/triviaparty",l=[];for(let t=0;t<c.length;t+=12){let a=c.slice(t,t+12),n=await Promise.all(a.map(async l=>{let t=await fetch("".concat(e,"/data/jeopardy/").concat(l.file));return await t.json()}));l.push(...n),S(e=>({...e,loaded:Math.min(c.length,e.loaded+n.length)}))}return w(l),v(!1),l}function ew(){let e=B.split(",").map(e=>e.trim()).filter(Boolean).slice(0,8);return e.length?e.map(e=>({name:e,score:0})):[{name:"Team 1",score:0},{name:"Team 2",score:0}]}function ej(e,l){let t=e.categories.filter(e=>e.round===l),a="double"===l?b:"triple"===l?g:"final"===l?[0]:p,n={};t.forEach(e=>{n[e.id]={},e.clues.forEach((t,s)=>{var o;let i="final"===l?0:null!=(o=a[s])?o:(s+1)*200;n[e.id][i]={revealed:!1,clue:t}})}),A(n),E(l),P(null)}async function ev(e){let l=e;if("files-index"===t&&0===e.categories.length&&e.sourceFile){var a,n;let t=await fetch("".concat("/triviaparty","/data/jeopardy/").concat(e.sourceFile));a=await t.json(),n=e.sourceFile,l={id:String(a.gameId),gameId:a.gameId,showNumber:a.showNumber,airDate:a.airDate,season:a.season,isSpecial:a.isSpecial,tournamentType:a.tournamentType,sourceFile:n,categories:a.categories.map((e,l)=>({id:"".concat(a.gameId,"-").concat(e.round,"-").concat(l),name:e.name,round:e.round,position:e.position,clues:e.clues.map((e,t)=>({...e,id:e.clueId||"".concat(a.gameId,"-").concat(l,"-").concat(t)}))}))}}l.categories.length&&(J(l),_(0),V("competition"===k?ew():[]),K(0),ej(l,"single"))}(0,n.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("method");e&&["replay","random","custom","learn"].includes(e)&&D(e)},[]),(0,n.useEffect)(()=>{(async()=>{try{var e,l;let t=await fetch("/api/auth/me");if(!t.ok)return;let a=await t.json();eg(null!=(e=a.user)?e:null),ef(null!=(l=a.stats)?l:null)}catch(e){}})()},[]),(0,n.useEffect)(()=>{!async function(){var e;try{let t=await fetch("/api/jeopardy?limit=300"),a=(null!=(e=(await t.json()).games)?e:[]).map(h);if(a.length>0){r(a),s("api"),l(!1);return}}catch(e){}try{let e=await fetch("".concat("/triviaparty","/data/jeopardy/index.json")),t=await e.json();if(t.length>0){u(t),r(t.map(e=>({id:String(e.gameId),gameId:e.gameId,showNumber:e.showNumber,airDate:e.airDate,season:e.season,isSpecial:e.isSpecial,tournamentType:e.tournamentType,sourceFile:e.file,categories:[]}))),s("files-index"),l(!1);return}}catch(e){}s("empty"),l(!1)}()},[]);let eN=(0,n.useMemo)(()=>Array.from(new Set(o.filter(e=>e.isSpecial).map(e=>e.tournamentType||"Other Special"))).sort(),[o]);function eS(){return o.filter(e=>{if(ec.length>0&&(null==e.season||!ec.includes(e.season)))return!1;if(e.isSpecial){let l=e.tournamentType||"Other Special";if(ex.length>0&&!ex.includes(l))return!1;if(!ed&&0===ex.length)return!0}return!!e.isSpecial||!!ed})}async function ek(){let e=eS();if(!e.length)return void alert("No episodes match your replay filters.");let l=Math.floor(Math.random()*e.length);await ev(e[l])}async function eC(){let e=await ey();if(!e.length)return;let l=[],t=m(e,H,5,"single").map((e,l)=>({id:"rnd-s-".concat(l),name:e.name,round:"single",position:l,clues:e.clues.map((e,t)=>({...e,id:e.clueId||"rnd-s-".concat(l,"-").concat(t)}))}));if(l.push(...t),X){let t=m(e,H,5,"double").map((e,l)=>({id:"rnd-d-".concat(l),name:e.name,round:"double",position:l,clues:e.clues.map((e,t)=>({...e,id:e.clueId||"rnd-d-".concat(l,"-").concat(t)}))}));l.push(...t)}if(Z){let t=m(e,H,5,"double").map((e,l)=>({id:"rnd-t-".concat(l),name:e.name,round:"triple",position:l,clues:e.clues.map((e,t)=>({...e,id:e.clueId||"rnd-t-".concat(l,"-").concat(t)}))}));l.push(...t)}if(el){let t=e.flatMap(e=>e.categories).filter(e=>"final"===e.round).flatMap(e=>e.clues);if(t.length>0){let e=t[Math.floor(Math.random()*t.length)];l.push({id:"rnd-final-0",name:e.category||"Final Jeopardy",round:"final",position:0,clues:[{...e,id:e.clueId||"rnd-final-clue"}]})}}let a={id:"random-".concat(Date.now()),showNumber:0,airDate:"",season:null,isSpecial:!1,tournamentType:null,categories:l};J(a),_(0),V("competition"===k?ew():[]),K(0),ej(a,"single")}async function eI(){er(!0);let e={...es,search:ea||void 0};try{let l=await d("/triviaparty",e,300),t=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,a=new Map;for(let l of e){let e=l.clue.category;a.has(e)||a.set(e,[]),a.get(e).push(l.clue)}return[...a.entries()].filter(e=>{let[,l]=e;return l.length>=1}).sort(()=>Math.random()-.5).slice(0,l).map((e,l)=>{let[a,n]=e;return{name:a,round:n[0].round,position:l,clues:[...n].sort(()=>Math.random()-.5).slice(0,t)}})}(l,H,5);if(!t.length){alert("No clues matched your custom filters."),er(!1);return}let a={id:"custom-".concat(Date.now()),showNumber:0,airDate:"",season:null,isSpecial:!1,tournamentType:null,categories:t.map((e,l)=>({id:"custom-".concat(l),name:e.name,round:e.round,position:e.position,clues:e.clues.map((e,t)=>({...e,id:e.clueId||"custom-".concat(l,"-").concat(t)}))}))};J(a),_(0),V("competition"===k?ew():[]),K(0),ej(a,"single")}catch(e){alert("Error building custom game.")}er(!1)}async function eD(){if(!eb)return void alert("Please sign in on the home page first.");try{var e;let l=await fetch("/api/user/learn"),t=null!=(e=(await l.json()).clues)?e:[];if(!t.length)return void alert("No missed clues yet. Miss or skip clues first, then come back to Learn mode.");let a=new Map;t.forEach(e=>{a.has(e.category)||a.set(e.category,[]),a.get(e.category).push({id:e.clueId,clueId:e.clueId,question:e.question,answer:e.answer,value:e.value,dailyDouble:e.dailyDouble,tripleStumper:e.tripleStumper,isFinalJeopardy:e.isFinalJeopardy,category:e.category,round:"single",rowIndex:0})});let n=[...a.entries()].slice(0,H).map((e,l)=>{let[t,a]=e;return{id:"learn-".concat(l),name:t,round:"single",position:l,clues:a.slice(0,5).map((e,l)=>({...e,rowIndex:l}))}}),s={id:"learn-".concat(Date.now()),showNumber:0,airDate:"",season:null,isSpecial:!1,tournamentType:null,categories:n};J(s),_(0),V([]),ej(s,"single")}catch(e){alert("Could not load your Learn clues.")}}function eT(){q&&(A(e=>({...e,[q.catId]:{...e[q.catId],[q.value]:{...e[q.catId][q.value],revealed:!0}}})),P(null))}function eF(e){if("competition"===k)return void V(l=>l.map((l,t)=>t===z?{...l,score:l.score+e}:l));_(l=>l+e)}async function eM(e){if(q&&eb)try{await f("/api/user/progress",{outcome:e,clue:{clueId:q.clue.clueId,question:q.clue.question,answer:q.clue.answer,value:q.clue.value,dailyDouble:q.clue.dailyDouble,tripleStumper:q.clue.tripleStumper,isFinalJeopardy:q.clue.isFinalJeopardy,category:q.clue.category,round:q.clue.round}});let t=await fetch("/api/auth/me");if(t.ok){var l;let e=await t.json();ef(null!=(l=e.stats)?l:null)}}catch(e){}}async function eJ(){q&&(await eM("correct"),eF(q.value),eT())}async function eO(){q&&(await eM("incorrect"),eF(-q.value),eT())}async function eE(){await eM("skip"),eT()}async function eL(){if(eb)try{var e,l;await f("/api/user/game-complete",{endMoney:"competition"===k?0:R,showNumber:null!=(e=null==M?void 0:M.showNumber)?e:null});let t=await fetch("/api/auth/me");if(t.ok){let e=await t.json();ef(null!=(l=e.stats)?l:null)}}catch(e){}J(null),P(null)}if(e)return(0,a.jsx)("div",{className:"min-h-screen bg-blue-950 flex items-center justify-center text-white text-2xl",children:"Loading…"});if(M){var eA;let e=M.categories.some(e=>"double"===e.round),l=M.categories.some(e=>"triple"===e.round),t=M.categories.some(e=>"final"===e.round);return(0,a.jsxs)("div",{className:"min-h-screen bg-blue-950 text-white p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4 gap-3",children:[(0,a.jsx)("button",{onClick:eL,className:"text-yellow-400 hover:underline",children:"← Back"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-yellow-400",children:M.showNumber?"Show #".concat(M.showNumber):"Jeopardy"}),(0,a.jsxs)("div",{className:"text-sm text-gray-300",children:["competition"===k?"Competition":"Practice"," mode"]})]}),"competition"===k?(0,a.jsx)("div",{className:"text-right",children:G.map((e,l)=>(0,a.jsxs)("div",{className:"text-sm ".concat(l===z?"text-yellow-300 font-bold":"text-white"),children:[e.name,": $",e.score.toLocaleString()]},"".concat(e.name,"-").concat(l)))}):(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",R.toLocaleString()]})]}),"competition"===k&&G.length>0&&(0,a.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[(0,a.jsx)("label",{className:"text-sm text-blue-300",children:"Responding team:"}),(0,a.jsx)("select",{value:z,onChange:e=>K(Number(e.target.value)),className:"bg-blue-800 border border-blue-600 rounded px-2 py-1 text-sm",children:G.map((e,l)=>(0,a.jsx)("option",{value:l,children:e.name},"".concat(e.name,"-").concat(l)))})]}),(0,a.jsxs)("div",{className:"flex gap-2 mb-4 flex-wrap",children:[(0,a.jsx)("button",{onClick:()=>ej(M,"single"),className:"px-4 py-2 rounded-lg font-bold ".concat("single"===O?"bg-yellow-400 text-blue-950":"bg-blue-800"),children:"Jeopardy!"}),e&&(0,a.jsx)("button",{onClick:()=>ej(M,"double"),className:"px-4 py-2 rounded-lg font-bold ".concat("double"===O?"bg-yellow-400 text-blue-950":"bg-blue-800"),children:"Double Jeopardy!"}),l&&(0,a.jsx)("button",{onClick:()=>ej(M,"triple"),className:"px-4 py-2 rounded-lg font-bold ".concat("triple"===O?"bg-yellow-400 text-blue-950":"bg-blue-800"),children:"Triple Jeopardy!"}),t&&(0,a.jsx)("button",{onClick:()=>ej(M,"final"),className:"px-4 py-2 rounded-lg font-bold ".concat("final"===O?"bg-yellow-400 text-blue-950":"bg-blue-800"),children:"Final Jeopardy"})]}),q&&(0,a.jsx)(x,{clue:q.clue,value:q.value,onCorrect:eJ,onIncorrect:eO,onSkip:eE,respondentLabel:"competition"===k?null==(eA=G[z])?void 0:eA.name:void 0}),function(){if(!M)return null;let e=M.categories.filter(e=>e.round===O);return(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:e.map(e=>(0,a.jsx)("th",{className:"bg-blue-800 p-3 text-center text-sm font-bold uppercase border border-blue-900",children:e.name},e.id))})}),(0,a.jsx)("tbody",{children:("double"===O?b:"triple"===O?g:"final"===O?[0]:p).map(l=>(0,a.jsx)("tr",{children:e.map(e=>{var t;let n=null==(t=L[e.id])?void 0:t[l];if(!n)return(0,a.jsx)("td",{className:"border border-blue-900 p-1",children:(0,a.jsx)("div",{className:"w-full h-16 bg-blue-900 rounded"})},e.id);let s=n.clue.clueId?i(n.clue.clueId):null,o=U?"bg-blue-700 hover:bg-blue-600 text-yellow-400":"bg-orange-800 hover:bg-orange-700 text-yellow-400";return(0,a.jsx)("td",{className:"border border-blue-900 p-1",children:n.revealed?(0,a.jsx)("div",{className:"w-full h-16 bg-blue-900 rounded"}):(0,a.jsxs)("button",{onClick:()=>(function(e,l,t){let a=t;if(e.dailyDouble&&"final"!==O){let e=window.prompt("Daily Double! Enter wager:",String(Math.max(200,t))),l=e?Number(e.replace(/[^\d]/g,"")):NaN;!Number.isNaN(l)&&l>0&&(a=l)}P({clue:e,catId:l,value:a})})(n.clue,e.id,l),className:"w-full h-16 font-bold text-xl rounded transition-colors relative ".concat(n.clue.tripleStumper?o:"bg-blue-700 hover:bg-blue-600 text-yellow-400"),children:["final"===O?"FINAL":"$".concat(l),((null==s?void 0:s.flagged)||(null==s?void 0:s.mediaFlag))&&(0,a.jsxs)("span",{className:"absolute top-1 right-1 text-xs",children:[s.flagged?"\uD83D\uDEA9":"",s.mediaFlag?"\uD83C\uDFAC":""]})]})},e.id)})},l))})]})})}()]})}return(0,a.jsxs)("div",{className:"min-h-screen bg-blue-950 text-white p-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-yellow-400 mb-2 text-center",children:"Jeopardy!"}),(0,a.jsx)("div",{className:"max-w-5xl mx-auto bg-blue-900 rounded-xl p-4 mb-5 text-sm",children:eb?(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-3 items-center",children:[(0,a.jsxs)("div",{children:["Signed in as ",(0,a.jsx)("span",{className:"text-yellow-300 font-bold",children:eb.username})]}),eh&&(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-blue-200 text-xs md:text-sm",children:[(0,a.jsxs)("div",{children:["Games: ",eh.gamesPlayed]}),(0,a.jsxs)("div",{children:["Avg $: ",eh.averageEndMoney]}),(0,a.jsxs)("div",{children:["Episodes: ",eh.episodesCompleted]})]})]}):(0,a.jsx)("div",{className:"text-blue-200",children:"Sign in on the home page to sync stats and Learn mode across devices."})}),(0,a.jsx)("div",{className:"flex justify-center gap-2 mb-4",children:["competition","practice"].map(e=>(0,a.jsx)("button",{onClick:()=>C(e),className:"px-5 py-2 rounded-lg font-bold capitalize ".concat(k===e?"bg-yellow-400 text-blue-950":"bg-blue-800 hover:bg-blue-700"),children:e},e))}),"competition"===k&&(0,a.jsxs)("div",{className:"max-w-3xl mx-auto bg-blue-900 rounded-xl p-4 mb-5",children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-blue-300 mb-1",children:"Players/teams (comma separated)"}),(0,a.jsx)("input",{value:B,onChange:e=>$(e.target.value),className:"w-full bg-blue-800 border border-blue-600 rounded px-3 py-2",placeholder:"Team 1, Team 2"})]}),(0,a.jsxs)("div",{className:"max-w-5xl mx-auto flex items-center justify-center gap-2 mb-5 flex-wrap",children:[["replay","random","custom","learn"].map(e=>(0,a.jsx)("button",{onClick:()=>D(e),className:"px-4 py-2 rounded-lg font-bold capitalize ".concat(I===e?"bg-yellow-400 text-blue-950":"bg-blue-800 hover:bg-blue-700"),children:e},e)),(0,a.jsx)("button",{onClick:()=>F(e=>!e),className:"px-4 py-2 rounded-lg font-bold bg-blue-800 hover:bg-blue-700",children:"Settings"})]}),T&&(0,a.jsx)("div",{className:"max-w-3xl mx-auto bg-blue-900 rounded-xl p-4 mb-5",children:(0,a.jsxs)("label",{className:"text-sm text-blue-200 flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:U,onChange:e=>W(e.target.checked)}),"Triple stumper as blue"]})}),"replay"===I&&(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-4",children:[(0,a.jsxs)("div",{className:"bg-blue-900 rounded-xl p-4",children:[(0,a.jsx)("div",{className:"text-sm text-blue-200 mb-2",children:"Seasons"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:Array.from({length:42}).map((e,l)=>{let t=l+1,n=ec.includes(t);return(0,a.jsx)("button",{onClick:()=>{eu(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t].sort((e,l)=>e-l))},className:"px-2 py-1 rounded text-xs font-bold ".concat(n?"bg-yellow-400 text-blue-950":"bg-blue-800 hover:bg-blue-700"),children:t},t)})}),(0,a.jsx)("div",{className:"text-sm text-blue-200 mb-2",children:"Episode type"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:ed,onChange:e=>em(e.target.checked)}),"Regular episodes"]}),eN.map(e=>(0,a.jsx)("button",{onClick:()=>{ep(l=>l.includes(e)?l.filter(l=>l!==e):[...l,e])},className:"px-3 py-1 rounded text-xs font-bold ".concat(ex.includes(e)?"bg-yellow-400 text-blue-950":"bg-blue-800 hover:bg-blue-700"),children:e},e))]}),(0,a.jsx)("button",{onClick:ek,className:"bg-yellow-400 text-blue-950 font-bold rounded px-4 py-2",children:"Random replay episode"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:eS().map(e=>(0,a.jsxs)("button",{onClick:()=>ev(e),className:"bg-blue-800 hover:bg-blue-700 rounded-xl p-6 text-left",children:[(0,a.jsxs)("div",{className:"text-xl font-bold",children:["Show #",e.showNumber]}),(0,a.jsx)("div",{className:"text-sm text-blue-300",children:e.airDate}),e.season&&(0,a.jsxs)("div",{className:"text-sm text-blue-300",children:["Season ",e.season]}),e.isSpecial&&(0,a.jsx)("div",{className:"text-xs mt-1 text-yellow-300",children:e.tournamentType||"Other Special"})]},e.id))})]}),"random"===I&&(0,a.jsxs)("div",{className:"max-w-xl mx-auto bg-blue-900 rounded-xl p-6 space-y-3",children:[(0,a.jsx)("label",{className:"block text-sm text-blue-300",children:"Number of categories"}),(0,a.jsx)("input",{type:"number",min:2,max:8,value:H,onChange:e=>Q(Math.max(2,Math.min(8,Number(e.target.value)||6))),className:"w-full bg-blue-800 border border-blue-600 rounded px-3 py-2"}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:X,onChange:e=>Y(e.target.checked)})," Enable Double Jeopardy"]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:Z,onChange:e=>ee(e.target.checked)})," Enable Triple Jeopardy (third board)"]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:el,onChange:e=>et(e.target.checked)})," Add Final Jeopardy"]}),(0,a.jsx)("button",{onClick:eC,disabled:j,className:"w-full bg-yellow-400 text-blue-950 font-bold py-3 rounded-xl disabled:opacity-60",children:j?"Loading clue library… ".concat(N.loaded,"/").concat(N.total):"Build Random Game"})]}),"custom"===I&&(0,a.jsxs)("div",{className:"max-w-2xl mx-auto bg-blue-900 rounded-xl p-6 space-y-4",children:[(0,a.jsx)("input",{type:"text",value:ea,onChange:e=>en(e.target.value),placeholder:"Search clues, answers, categories",className:"w-full bg-blue-800 border border-blue-600 rounded px-3 py-2"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-3",children:[(0,a.jsxs)("label",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:!!es.dailyDoublesOnly,onChange:e=>eo(l=>({...l,dailyDoublesOnly:e.target.checked||void 0}))})," Daily Doubles only"]}),(0,a.jsxs)("label",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:!!es.tripleStumpersOnly,onChange:e=>eo(l=>({...l,tripleStumpersOnly:e.target.checked||void 0}))})," Triple stumpers only"]}),(0,a.jsxs)("label",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:!!es.finalOnly,onChange:e=>eo(l=>({...l,finalOnly:e.target.checked||void 0}))})," Final only"]}),(0,a.jsxs)("label",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:!!es.flaggedOnly,onChange:e=>eo(l=>({...l,flaggedOnly:e.target.checked||void 0}))})," Flagged only"]})]}),(0,a.jsx)("button",{onClick:eI,disabled:ei,className:"w-full bg-yellow-400 text-blue-950 font-bold py-3 rounded-xl disabled:opacity-60",children:ei?"Building…":"Build Custom Game"})]}),"learn"===I&&(0,a.jsxs)("div",{className:"max-w-xl mx-auto text-center bg-blue-900 rounded-xl p-6",children:[(0,a.jsx)("p",{className:"text-blue-200 mb-4",children:"Study your missed and skipped clues from your account history."}),(0,a.jsx)("button",{onClick:eD,className:"bg-yellow-400 text-blue-950 px-8 py-3 rounded-xl font-bold",children:"Start Learn Game"})]}),"empty"===t&&(0,a.jsx)("p",{className:"text-center mt-6 text-blue-300",children:"No Jeopardy data loaded yet."})]})}},9705:(e,l,t)=>{Promise.resolve().then(t.bind(t,412))}},e=>{e.O(0,[441,255,358],()=>e(e.s=9705)),_N_E=e.O()}]);