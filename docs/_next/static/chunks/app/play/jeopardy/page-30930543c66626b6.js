(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[864],{8189:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>T});var a=t(5155),s=t(2115),n=t(2619),o=t.n(n);let r="jeopardy:clue:",i="jeopardy:tags";function c(e){try{let l=window.localStorage.getItem(r+e);if(!l)return m(e);return{...m(e),...JSON.parse(l)}}catch(l){return m(e)}}function d(e){if(window.localStorage.setItem(r+e.clueId,JSON.stringify(e)),e.topicTags.length>0){let l=Array.from(new Set([...u(),...e.topicTags])).sort();window.localStorage.setItem(i,JSON.stringify(l))}}function u(){try{let e=window.localStorage.getItem(i);return e?JSON.parse(e):[]}catch(e){return[]}}function m(e){return{clueId:e,topicTags:[],flagged:!1,mediaFlag:!1}}async function b(e,l){var t,a,s,n,o,r;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,d=await fetch("".concat(e,"/data/jeopardy/index.json")),u=await d.json(),m=[],b=null==(t=l.search)?void 0:t.toLowerCase();for(let t of u){if(m.length>=i)break;if((null==(a=l.seasons)?void 0:a.length)&&!l.seasons.includes(null!=(n=t.season)?n:-1)||(null==(s=l.gameIds)?void 0:s.length)&&!l.gameIds.includes(t.gameId))continue;let d=await fetch("".concat(e,"/data/jeopardy/").concat(t.file)),u=await d.json(),p={gameId:u.gameId,showNumber:u.showNumber,airDate:u.airDate,season:u.season,isSpecial:u.isSpecial,tournamentType:u.tournamentType};for(let e of u.categories)if(null==(o=l.rounds)||!o.length||l.rounds.includes(e.round)){for(let t of e.clues){if(!t.clueId||l.tripleStumpersOnly&&!t.tripleStumper||l.dailyDoublesOnly&&!t.dailyDouble||l.finalOnly&&!t.isFinalJeopardy||null!=l.minValue&&null!=t.value&&t.value<l.minValue||null!=l.maxValue&&null!=t.value&&t.value>l.maxValue||b&&!"".concat(t.question," ").concat(t.answer," ").concat(t.category).toLowerCase().includes(b))continue;let e=c(t.clueId);if((!l.flaggedOnly||e.flagged)&&(!l.mediaFlaggedOnly||e.mediaFlag)){if((null==(r=l.topicTags)?void 0:r.length)&&!l.topicTags.every(l=>e.topicTags.includes(l)))continue;if(m.push({clue:t,userData:e,game:p}),m.length>=i)break}}if(m.length>=i)break}}return m}function p(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"single";return[...e.flatMap(e=>e.categories.filter(e=>e.round===a&&e.clues.length>=t))].sort(()=>Math.random()-.5).slice(0,l).map(e=>({...e,clues:[...e.clues].sort(()=>Math.random()-.5).slice(0,t)}))}var g=t(9074);let x=[{id:"science",label:"Science",emoji:"\uD83D\uDD2C",keywords:["science","scientific","research","laboratory","experiment"],subtags:[{label:"Chemistry",keywords:["atom","chemical","molecule","acid","base","periodic table"]},{label:"Physics",keywords:["force","motion","velocity","quantum","relativity","energy"]},{label:"Mathematics",keywords:["math","algebra","geometry","calculus","equation","theorem","prime"]},{label:"Astronomy",keywords:["planet","star","galaxy","solar system","moon","nebula","cosmos"]},{label:"Anatomy",keywords:["organ","skeleton","muscle","artery","heart","brain","anatomy"]},{label:"Biology",keywords:["biology","cell","genetic","evolution","species","dna"]},{label:"Animal Kingdom",keywords:["animal","mammal","bird","reptile","fish","wildlife","zoo"]},{label:"Nature",keywords:["forest","river","ecosystem","climate","weather","natural world"]},{label:"Psychology",keywords:["psychology","behavior","cognitive","mind","personality","emotion"]},{label:"Technology",keywords:["computer","software","internet","device","ai","algorithm","tech"]},{label:"Academia",keywords:["university","college","professor","campus","scholar","academic"]}]},{id:"arts",label:"Arts",emoji:"\uD83C\uDFA8",keywords:["art","artist","creative","aesthetic"],subtags:[{label:"Visual Arts",keywords:["painting","sculpture","gallery","museum","canvas","portrait"]},{label:"Literature",keywords:["novel","poem","author","book","literature","prose"]},{label:"Comics",keywords:["comic","graphic novel","superhero","manga panel"]},{label:"English",keywords:["grammar","english language","vocabulary","spelling"]},{label:"Foreign Language",keywords:["spanish","french","german","latin","translation","language"]},{label:"Art Process",keywords:["draw","sketch","design","composition","brushstroke"]},{label:"Beauty/Fashion",keywords:["fashion","style","runway","couture","beauty","cosmetic"]},{label:"Culinary",keywords:["cook","recipe","kitchen","chef","cuisine","ingredient"]},{label:"Instruments",keywords:["guitar","piano","violin","trumpet","drum","instrument"]}]},{id:"entertainment",label:"Entertainment",emoji:"\uD83C\uDFAC",keywords:["entertainment","pop culture","showbiz"],subtags:[{label:"Movies",keywords:["film","movie","box office","director","cinema"]},{label:"Television",keywords:["tv","television","series","sitcom","episode","network"]},{label:"Music",keywords:["song","album","band","singer","chart","lyrics"]},{label:"Cartoons",keywords:["cartoon","animated","animation"]},{label:"Golden Age",keywords:["classic hollywood","golden age","silver screen"]},{label:"Anime",keywords:["anime","manga","otaku"]},{label:"Social Media",keywords:["instagram","tiktok","youtube","tweet","viral","influencer"]},{label:"Celebrities",keywords:["celebrity","actor","actress","star","famous person"]},{label:"Children's Entertainment",keywords:["kids show","children","sesame","nickelodeon","disney channel"]}]},{id:"sports",label:"Sports",emoji:"\uD83C\uDFC5",keywords:["sport","athlete","competition","tournament","league"],subtags:[{label:"Board Games",keywords:["chess","checkers","monopoly","board game"]},{label:"Card Games",keywords:["poker","bridge","blackjack","card game"]},{label:"Recreation",keywords:["hobby","recreation","pastime"]},{label:"Olympics",keywords:["olympic","medal","summer games","winter games"]},{label:"Field Sports",keywords:["soccer","football","baseball","rugby","cricket","lacrosse"]},{label:"Court/Arena Sports",keywords:["basketball","tennis","volleyball","hockey","arena"]},{label:"Motor Sports",keywords:["formula 1","nascar","motogp","rally","motor sport"]},{label:"Water/Ice Sports",keywords:["swimming","diving","surfing","skiing","ice skating","snowboard"]},{label:"General Sports",keywords:["sports trivia","team record","athletics"]},{label:"Sports Franchises",keywords:["franchise","club","team name","mascot"]},{label:"Fitness",keywords:["fitness","workout","exercise","training"]},{label:"World Records",keywords:["world record","guinness","fastest","longest"]}]},{id:"history",label:"History",emoji:"\uD83D\uDCDC",keywords:["history","historical","era","century","civilization"],subtags:[{label:"U.S. History",keywords:["american history","colonies","civil war","founding fathers"]},{label:"Presidents/VPs",keywords:["president","vice president","white house"]},{label:"NA/SA History",keywords:["canada history","latin america","south america history"]},{label:"European History",keywords:["europe history","british empire","france history","romanov"]},{label:"Asian History",keywords:["china history","japan history","india history","dynasty"]},{label:"Global History",keywords:["world history","international history"]},{label:"Warzone",keywords:["war","battle","military","conflict","siege"]},{label:"Ancient History",keywords:["ancient","pharaoh","mesopotamia","rome","greece"]},{label:"Modern History",keywords:["20th century","21st century","modern era"]},{label:"Government",keywords:["government","congress","parliament","constitution","policy"]},{label:"World Religion",keywords:["religion","church","temple","islam","christianity","buddhism"]},{label:"Business",keywords:["company","corporation","market","industry","economy"]},{label:"Laws",keywords:["law","legal","court","justice","supreme court"]}]},{id:"geography",label:"Geography",emoji:"\uD83C\uDF0D",keywords:["geography","map","country","capital","region","continent"],subtags:[{label:"NA/SA Geo",keywords:["north america","south america","andes","caribbean"]},{label:"European Geo",keywords:["europe","balkan","scandinavia","alps"]},{label:"African Geo",keywords:["africa","sahara","nile","sub-saharan"]},{label:"Asian Geo",keywords:["asia","himalaya","southeast asia","middle east"]},{label:"Oceanic Geo",keywords:["oceania","australia","pacific islands","new zealand"]},{label:"U.S. Geo",keywords:["u.s. state","united states","america geography","appalachian"]},{label:"Global Geo",keywords:["world map","global geography","international borders"]},{label:"Flags",keywords:["flag","tricolor","emblem","coat of arms"]},{label:"Transportation",keywords:["railway","airport","subway","shipping","transport"]}]},{id:"mix-up",label:"Mix-Up",emoji:"\uD83C\uDF00",keywords:["misc","mixed bag","oddball"],subtags:[{label:"Game Shows",keywords:["game show","host","wheel of fortune","price is right"]},{label:"Holidays",keywords:["holiday","christmas","halloween","easter","thanksgiving"]},{label:"Ancient Sports",keywords:["gladiator","chariot","ancient olympics"]},{label:"Medical Care",keywords:["medicine","doctor","hospital","treatment"]},{label:"Amusement Parks",keywords:["theme park","roller coaster","disneyland","ride"]},{label:"Theater",keywords:["theater","broadway","play","stage","drama"]},{label:"Orchestral",keywords:["orchestra","symphony","conductor","concerto"]},{label:"Sensation/Perception",keywords:["sense","perception","vision","hearing"]},{label:"Art History",keywords:["renaissance","baroque","impressionism","art movement"]},{label:"Philosophy",keywords:["philosophy","ethics","logic","stoic","existential"]},{label:"Architecture",keywords:["architecture","building","skyscraper","cathedral","arch"]},{label:"Inventions",keywords:["inventor","invention","patent","prototype"]},{label:"Anthropology/Culture",keywords:["culture","anthropology","custom","folklore"]},{label:"Earth Science",keywords:["geology","volcano","earthquake","mineral","tectonic"]},{label:"Mythology",keywords:["myth","mythology","god","goddess","legend"]}]},{id:"video-games",label:"Video Games",emoji:"\uD83C\uDFAE",keywords:["video game","gaming","gamer","arcade"],subtags:[{label:"Consoles",keywords:["console","playstation","xbox","nintendo","sega"]},{label:"Retro Games",keywords:["retro","8-bit","16-bit","arcade classic"]},{label:"Adventure Games",keywords:["adventure game","platformer","quest game"]},{label:"Racing Games",keywords:["racing game","kart","driving sim"]},{label:"RPGs & Open World",keywords:["rpg","open world","side quest","level up"]},{label:"Horror Games",keywords:["survival horror","jump scare","horror game"]},{label:"Simulation Games",keywords:["simulation game","simulator","sandbox"]},{label:"General Games",keywords:["video game character","boss battle","speedrun"]},{label:"Fighting Games",keywords:["fighting game","combo","street fighter","tekken"]},{label:"Pokemon",keywords:["pokemon","pikachu","pokeball","gym leader"]},{label:"Party Games",keywords:["party game","minigame"]},{label:"As Seen on TV",keywords:["tv adaptation","licensed game"]},{label:"Sports Games",keywords:["fifa","madden","nba 2k","sports game"]},{label:"Music/Rhythm Games",keywords:["rhythm game","guitar hero","dance game"]},{label:"Puzzle Games",keywords:["puzzle game","tetris","match-3"]},{label:"Shooter Games",keywords:["fps","shooter","battle royale","sniper"]},{label:"Mobile Games",keywords:["mobile game","app game","ios game","android game"]}]}];function h(e){return e.toLowerCase().replace(/&/g," and ").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").replace(/-{2,}/g,"-")}function y(e){return e.toLowerCase().replace(/[^a-z0-9\s]+/g," ").replace(/\s+/g," ").trim()}let f=x.flatMap(e=>e.subtags.map(l=>({id:"".concat(e.id,"/").concat(h(l.label)),mainId:e.id,mainLabel:e.label,mainEmoji:e.emoji,subLabel:l.label,keywords:[...e.keywords,...l.keywords].map(y)}))),w=new Map(f.map(e=>[e.id,e])),v=x.map(e=>({id:e.id,label:e.label,emoji:e.emoji,options:e.subtags.map(l=>({id:"".concat(e.id,"/").concat(h(l.label)),label:l.label}))}));function k(e){let l=w.get(e);return l?"".concat(l.mainEmoji," ").concat(l.mainLabel," \xb7 ").concat(l.subLabel):e}function j(e){let{clue:l,value:t,onCorrect:n,onIncorrect:o,onSkip:r,respondentLabel:i,teamOptions:m,respondentIndex:b,onRespondentChange:p,lockRespondent:g}=e,[x,h]=(0,s.useState)(!1),[j,N]=(0,s.useState)(!1),[S,C]=(0,s.useState)(!1),[I,A]=(0,s.useState)(!1),[D,T]=(0,s.useState)([]),[F,M]=(0,s.useState)(""),[O,G]=(0,s.useState)([]),[E,J]=(0,s.useState)(["science","arts"]),P=(0,s.useMemo)(()=>v,[]),L=(0,s.useMemo)(()=>(function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;if(!e.trim())return[];let t=y(e);return Array.from(new Set(f.map(e=>{let l=e.keywords.reduce((e,l)=>l&&t.includes(l)?e+1:e,0);return{id:e.id,hits:l}}).filter(e=>e.hits>0).sort((e,l)=>l.hits-e.hits).slice(0,l).map(e=>e.id)))}("".concat(e.category," ").concat(e.question," ").concat(e.answer),l)})(l).filter(e=>!D.includes(e)),[l,D]);(0,s.useEffect)(()=>{if(!l.clueId)return;let e=c(l.clueId);C(e.flagged),A(e.mediaFlag),T(e.topicTags),G(u()),h(!1),N(!1),M(""),J(["science","arts"])},[l.clueId]);let z=(0,s.useCallback)((e,t)=>{if(l.clueId){var a;C(e),A(t),a=l.clueId,d({...c(a),flagged:e,mediaFlag:t})}},[l.clueId]),q=(0,s.useCallback)(e=>{if(l.clueId){var t;T(e),t=l.clueId,d({...c(t),topicTags:e}),G(u())}},[l.clueId]);function R(e){let l=e.trim().toLowerCase();!l||D.includes(l)||(q([...D,l]),M(""))}function W(e){if(D.includes(e))return void q(D.filter(l=>l!==e));q([...D,e])}let V=O.filter(e=>e.includes(F.toLowerCase())&&!D.includes(e));return(0,a.jsxs)("div",{className:"fixed inset-0 bg-blue-950 flex flex-col items-center justify-center z-50 p-6 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"text-yellow-400 text-lg mb-2 uppercase tracking-wide text-center",children:[l.category," — $",t]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center mb-4",children:[l.dailyDouble&&(0,a.jsx)("span",{className:"bg-red-600 text-white text-sm md:text-base font-bold px-4 py-2 rounded-full animate-pulse",children:"Daily Double!"}),l.tripleStumper&&(0,a.jsx)("span",{className:"bg-orange-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:"Triple Stumper"}),l.isFinalJeopardy&&(0,a.jsx)("span",{className:"bg-purple-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:"Final Jeopardy"}),S&&(0,a.jsx)("span",{className:"bg-yellow-500 text-blue-950 text-xs font-bold px-3 py-1 rounded-full",children:"\uD83D\uDEA9 Flagged"}),I&&(0,a.jsx)("span",{className:"bg-gray-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:"\uD83C\uDFAC Media"}),D.map(e=>(0,a.jsx)("span",{className:"bg-blue-700 text-white text-xs font-bold px-3 py-1 rounded-full",children:k(e)},e))]}),(0,a.jsx)("div",{className:"text-white text-2xl md:text-3xl text-center font-bold max-w-3xl mb-6 leading-snug",children:l.question}),i&&(0,a.jsxs)("div",{className:"text-blue-200 text-sm md:text-base mb-4",children:["Responding: ",(0,a.jsx)("span",{className:"text-yellow-300 font-bold",children:i})]}),x&&m&&m.length>0&&p&&(0,a.jsxs)("div",{className:"mb-4 w-full max-w-sm",children:[(0,a.jsx)("label",{className:"block text-sm text-blue-200 mb-1",children:"Who buzzed in?"}),(0,a.jsxs)("select",{disabled:!!g,value:null!=b?b:"",onChange:e=>p(Number(e.target.value)),className:"w-full bg-blue-800 border border-blue-600 rounded px-3 py-2 text-sm",children:[null==b&&(0,a.jsx)("option",{value:"",disabled:!0,children:"Select team"}),m.map((e,l)=>(0,a.jsx)("option",{value:l,children:e},"".concat(e,"-").concat(l)))]})]}),x&&(0,a.jsx)("div",{className:"text-yellow-300 text-xl md:text-2xl text-center mb-6 italic max-w-3xl",children:'"'.concat(l.answer,'"')}),j&&(0,a.jsxs)("div",{className:"bg-blue-900 rounded-xl p-4 mb-4 w-full max-w-lg",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:D.map(e=>(0,a.jsxs)("span",{className:"bg-blue-700 text-white text-sm px-2 py-1 rounded-full flex items-center gap-1",children:[k(e),(0,a.jsx)("button",{onClick:()=>{q(D.filter(l=>l!==e))},className:"text-blue-300 hover:text-white",children:"\xd7"})]},e))}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("div",{className:"text-sm text-blue-200 font-bold",children:"Auto-tag suggestions"}),(0,a.jsx)("button",{onClick:function(){0!==L.length&&q(Array.from(new Set([...D,...L])))},disabled:0===L.length,className:"bg-yellow-400 text-blue-950 px-3 py-1 rounded text-xs font-bold disabled:opacity-50",children:"Apply auto-tags"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[0===L.length&&(0,a.jsx)("span",{className:"text-xs text-blue-300",children:"No strong keyword matches found."}),L.map(e=>(0,a.jsxs)("button",{onClick:()=>W(e),className:"bg-blue-800 hover:bg-blue-700 text-blue-100 text-xs px-2 py-1 rounded-full",children:["+ ",k(e)]},e))]})]}),(0,a.jsx)("div",{className:"space-y-2 mb-4",children:P.map(e=>{let l=E.includes(e.id)||e.options.some(e=>D.includes(e.id));return(0,a.jsxs)("div",{className:"bg-blue-900/40 border border-blue-800 rounded-lg",children:[(0,a.jsxs)("button",{onClick:()=>{var l;return l=e.id,void J(e=>e.includes(l)?e.filter(e=>e!==l):[...e,l])},className:"w-full px-3 py-2 text-left text-sm font-bold text-blue-100 flex items-center justify-between",children:[(0,a.jsxs)("span",{children:[e.emoji," ",e.label]}),(0,a.jsx)("span",{className:"text-blue-300",children:l?"−":"+"})]}),l&&(0,a.jsx)("div",{className:"px-3 pb-3 flex flex-wrap gap-2",children:e.options.map(e=>{let l=D.includes(e.id);return(0,a.jsx)("button",{onClick:()=>W(e.id),className:"text-xs px-2 py-1 rounded-full border transition-colors ".concat(l?"bg-yellow-400 text-blue-950 border-yellow-300":"bg-blue-800 text-blue-100 border-blue-700 hover:bg-blue-700"),children:e.label},e.id)})})]},e.id)})}),(0,a.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,a.jsx)("input",{type:"text",value:F,onChange:e=>M(e.target.value),onKeyDown:e=>{"Enter"===e.key&&R(F)},placeholder:"Add custom tag…",className:"flex-1 bg-blue-800 text-white placeholder-blue-400 border border-blue-600 rounded-lg px-3 py-2 text-sm"}),(0,a.jsx)("button",{onClick:()=>R(F),className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-2 rounded-lg text-sm font-bold",children:"Add"})]}),V.length>0&&F.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:V.slice(0,8).map(e=>(0,a.jsx)("button",{onClick:()=>R(e),className:"bg-blue-800 hover:bg-blue-700 text-blue-200 text-xs px-2 py-1 rounded",children:w.has(e)?k(e):e},e))}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:()=>z(!S,I),className:"flex items-center gap-1 text-sm px-3 py-2 rounded-lg font-bold transition-colors ".concat(S?"bg-yellow-500 text-blue-950":"bg-blue-800 text-blue-200 hover:bg-blue-700"),children:["\uD83D\uDEA9 ",S?"Flagged":"Flag"]}),(0,a.jsxs)("button",{onClick:()=>z(S,!I),className:"flex items-center gap-1 text-sm px-3 py-2 rounded-lg font-bold transition-colors ".concat(I?"bg-gray-400 text-blue-950":"bg-blue-800 text-blue-200 hover:bg-blue-700"),children:["\uD83C\uDFAC ",I?"Media Flagged":"Media Flag"]})]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3 justify-center",children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:n,disabled:m&&m.length>0&&null==b,className:"bg-green-600 hover:bg-green-500 px-8 py-3 rounded-xl font-bold text-xl",children:"✓ Correct"}),(0,a.jsx)("button",{onClick:o,disabled:m&&m.length>0&&null==b,className:"bg-red-600 hover:bg-red-500 px-8 py-3 rounded-xl font-bold text-xl",children:"✗ Wrong"}),(0,a.jsx)("button",{onClick:r,className:"bg-gray-600 hover:bg-gray-500 px-8 py-3 rounded-xl font-bold text-xl",children:"Skip"}),(0,a.jsx)("button",{onClick:()=>N(e=>!e),className:"bg-blue-700 hover:bg-blue-600 text-white px-4 py-3 rounded-xl font-bold text-sm",children:"\uD83C\uDFF7️ Tags"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>h(!0),className:"bg-yellow-400 text-blue-950 px-8 py-3 rounded-xl font-bold text-xl",children:"Show Answer"}),(0,a.jsx)("button",{onClick:()=>N(e=>!e),className:"bg-blue-700 hover:bg-blue-600 text-white px-4 py-3 rounded-xl font-bold text-sm",children:"\uD83C\uDFF7️ Tags"})]})})]})}let N=[200,400,600,800,1e3],S=[400,800,1200,1600,2e3],C=[600,1200,1800,2400,3e3];function I(e){var l,t,a,s;let n=(null!=(l=e.categories)?l:[]).map(e=>{var l,t,a,s,n;return{id:String(null!=(l=e.id)?l:Math.random()),name:String(null!=(t=e.name)?t:""),round:String(null!=(a=e.round)?a:"single"),position:Number(null!=(s=e.position)?s:0),clues:(null!=(n=e.clues)?n:[]).map((l,t)=>{var a,s,n,o,r,i,c,d;return{id:String(null!=(s=null!=(a=l.id)?a:l.clueId)?s:Math.random()),clueId:String(null!=(n=l.clueId)?n:""),question:String(null!=(o=l.question)?o:""),answer:String(null!=(r=l.answer)?r:""),value:null!=l.value?Number(l.value):null,dailyDouble:!!l.dailyDouble,tripleStumper:!!l.tripleStumper,isFinalJeopardy:"final"===String(e.round),category:String(null!=(i=e.name)?i:""),round:String(null!=(c=e.round)?c:"single"),rowIndex:Number(null!=(d=l.rowIndex)?d:t)}})}});return{id:String(null!=(t=e.id)?t:Math.random()),gameId:null!=e.gameId?Number(e.gameId):void 0,showNumber:Number(null!=(a=e.showNumber)?a:0),airDate:String(null!=(s=e.airDate)?s:""),season:null!=e.season?Number(e.season):null,isSpecial:!!e.isSpecial,tournamentType:null!=e.tournamentType?String(e.tournamentType):null,categories:n}}function A(e){if(null!=e.season)return e.season;let l=new Date(e.airDate);if(Number.isNaN(l.getTime()))return null;let t=l.getUTCFullYear()-1984+ +(l.getUTCMonth()>=8);return t>0?t:null}async function D(e,l){let t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!t.ok)throw Error((await t.json().catch(()=>({}))).error||"Request failed");return t.json().catch(()=>({}))}function T(){let[e,l]=(0,s.useState)(!0),[t,n]=(0,s.useState)("api"),[r,i]=(0,s.useState)([]),[d,u]=(0,s.useState)([]),[m,x]=(0,s.useState)([]),[h,y]=(0,s.useState)(!1),[f,w]=(0,s.useState)({loaded:0,total:0}),[v,k]=(0,s.useState)("competition"),[T,F]=(0,s.useState)("replay"),[M,O]=(0,s.useState)(!1),[G,E]=(0,s.useState)(null),[J,P]=(0,s.useState)(null),[L,z]=(0,s.useState)("single"),[q,R]=(0,s.useState)({}),[W,V]=(0,s.useState)(null),[K,H]=(0,s.useState)(null),[B,$]=(0,s.useState)(!1),Q=(0,s.useRef)(new Set),[U,_]=(0,s.useState)(0),[Y,X]=(0,s.useState)("Team 1, Team 2"),[Z,ee]=(0,s.useState)([]),[el,et]=(0,s.useState)(0),[ea,es]=(0,s.useState)(!1),[en,eo]=(0,s.useState)(6),[er,ei]=(0,s.useState)(!0),[ec,ed]=(0,s.useState)(!1),[eu,em]=(0,s.useState)(!0),[eb,ep]=(0,s.useState)(""),[eg,ex]=(0,s.useState)({}),[eh,ey]=(0,s.useState)(!1),[ef,ew]=(0,s.useState)([]),[ev,ek]=(0,s.useState)(!0),[ej,eN]=(0,s.useState)([]),[eS,eC]=(0,s.useState)(null),[eI,eA]=(0,s.useState)(null),[eD,eT]=(0,s.useState)((0,g.vO)()),[eF,eM]=(0,s.useState)(null);async function eO(){if(m.length>0)return m;if("api"===t){let e=r.map(e=>{var l;return{gameId:null!=(l=e.gameId)?l:0,showNumber:e.showNumber,airDate:e.airDate,season:e.season,isSpecial:e.isSpecial,tournamentType:e.tournamentType,categories:e.categories.map(e=>({name:e.name,round:"triple"===e.round?"double":e.round,position:e.position,clues:e.clues}))}});return x(e),e}y(!0),w({loaded:0,total:d.length});let e="/triviaparty",l=[];for(let t=0;t<d.length;t+=12){let a=d.slice(t,t+12),s=await Promise.all(a.map(async l=>{let t=await fetch("".concat(e,"/data/jeopardy/").concat(l.file));return await t.json()}));l.push(...s),w(e=>({...e,loaded:Math.min(d.length,e.loaded+s.length)}))}return x(l),y(!1),l}function eG(){let e=Y.split(",").map(e=>e.trim()).filter(Boolean).slice(0,8);return e.length?e.map(e=>({name:e,score:0})):[{name:"Team 1",score:0},{name:"Team 2",score:0}]}function eE(e,l){let t=e.categories.filter(e=>e.round===l),a="double"===l?S:"triple"===l?C:"final"===l?[0]:N,s={};t.forEach(e=>{s[e.id]={},e.clues.forEach((t,n)=>{var o;let r="final"===l?0:null!=(o=a[n])?o:(n+1)*200;s[e.id][r]={revealed:!1,clue:t}})}),R(s),z(l),V(null)}async function eJ(e){let l=e;if("files-index"===t&&0===e.categories.length&&e.sourceFile){var a,s;let t=await fetch("".concat("/triviaparty","/data/jeopardy/").concat(e.sourceFile));a=await t.json(),s=e.sourceFile,l={id:String(a.gameId),gameId:a.gameId,showNumber:a.showNumber,airDate:a.airDate,season:a.season,isSpecial:a.isSpecial,tournamentType:a.tournamentType,sourceFile:s,categories:a.categories.map((e,l)=>({id:"".concat(a.gameId,"-").concat(e.round,"-").concat(l),name:e.name,round:e.round,position:e.position,clues:e.clues.map((e,t)=>({...e,id:e.clueId||"".concat(a.gameId,"-").concat(l,"-").concat(t)}))}))}}if(!l.categories.length)return;E(l),P("replay"),_(0),ee("competition"===v?eG():[]),et(0),$(!1),Q.current=new Set;let n="replay:".concat(l.showNumber||l.id);H(n);let o=l.categories.reduce((e,l)=>e+l.clues.length,0);(0,g.P6)({episodeKey:n,showNumber:l.showNumber||null,mode:v,totalClues:o}),eM((0,g.rW)(n)),eE(l,"single")}(0,s.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("method");e&&["replay","random","custom","learn"].includes(e)&&F(e)},[]),(0,s.useEffect)(()=>{(async()=>{try{var e,l;let t=await fetch("/api/auth/me");if(!t.ok)return;let a=await t.json();eC(null!=(e=a.user)?e:null),eA(null!=(l=a.stats)?l:null)}catch(e){}})()},[]),(0,s.useEffect)(()=>{eT((0,g.vO)())},[]),(0,s.useEffect)(()=>{!async function(){var e;let t="/triviaparty";if(!t)try{let t=await fetch("/api/jeopardy?limit=300"),a=(null!=(e=(await t.json()).games)?e:[]).map(I);if(a.length>0){i(a),n("api"),l(!1);return}}catch(e){}try{let e=await fetch("".concat(t,"/data/jeopardy/index.json")),a=await e.json();if(a.length>0){u(a),i(a.map(e=>({id:String(e.gameId),gameId:e.gameId,showNumber:e.showNumber,airDate:e.airDate,season:e.season,isSpecial:e.isSpecial,tournamentType:e.tournamentType,sourceFile:e.file,categories:[]}))),n("files-index"),l(!1);return}}catch(e){}n("empty"),l(!1)}()},[]);let eP=(0,s.useMemo)(()=>Array.from(new Set(r.filter(e=>e.isSpecial).map(e=>e.tournamentType||"Other Special"))).sort(),[r]);function eL(){return r.filter(e=>{let l=A(e);if(ef.length>0&&(null==l||!ef.includes(l)))return!1;if(e.isSpecial){let l=e.tournamentType||"Other Special";if(ej.length>0&&!ej.includes(l))return!1;if(!ev&&0===ej.length)return!0}return!!e.isSpecial||!!ev})}async function ez(){let e=eL();if(!e.length)return void alert("No episodes match your replay filters.");let l=Math.floor(Math.random()*e.length);await eJ(e[l])}async function eq(){if(!(null==G?void 0:G.showNumber))return;let e=[...eL()].sort((e,l)=>e.showNumber-l.showNumber),l=e.findIndex(e=>e.showNumber===G.showNumber);l>=0&&l<e.length-1?await eJ(e[l+1]):alert("No next episode in current filter.")}async function eR(){let e=await eO();if(!e.length)return;let l=[],t=p(e,en,5,"single").map((e,l)=>({id:"rnd-s-".concat(l),name:e.name,round:"single",position:l,clues:e.clues.map((e,t)=>({...e,id:e.clueId||"rnd-s-".concat(l,"-").concat(t)}))}));if(l.push(...t),er){let t=p(e,en,5,"double").map((e,l)=>({id:"rnd-d-".concat(l),name:e.name,round:"double",position:l,clues:e.clues.map((e,t)=>({...e,id:e.clueId||"rnd-d-".concat(l,"-").concat(t)}))}));l.push(...t)}if(ec){let t=p(e,en,5,"double").map((e,l)=>({id:"rnd-t-".concat(l),name:e.name,round:"triple",position:l,clues:e.clues.map((e,t)=>({...e,id:e.clueId||"rnd-t-".concat(l,"-").concat(t)}))}));l.push(...t)}if(eu){let t=e.flatMap(e=>e.categories).filter(e=>"final"===e.round).flatMap(e=>e.clues);if(t.length>0){let e=t[Math.floor(Math.random()*t.length)];l.push({id:"rnd-final-0",name:e.category||"Final Jeopardy",round:"final",position:0,clues:[{...e,id:e.clueId||"rnd-final-clue"}]})}}let a={id:"random-".concat(Date.now()),showNumber:0,airDate:"",season:null,isSpecial:!1,tournamentType:null,categories:l};E(a),P("random"),_(0),ee("competition"===v?eG():[]),et(0),$(!1),Q.current=new Set;let s="random:".concat(Date.now());H(s);let n=a.categories.reduce((e,l)=>e+l.clues.length,0);(0,g.P6)({episodeKey:s,showNumber:null,mode:v,totalClues:n}),eM((0,g.rW)(s)),eE(a,"single")}async function eW(){ey(!0);let e={...eg,search:eb||void 0};try{let l=await b("/triviaparty",e,300),t=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,a=new Map;for(let l of e){let e=l.clue.category;a.has(e)||a.set(e,[]),a.get(e).push(l.clue)}return[...a.entries()].filter(e=>{let[,l]=e;return l.length>=1}).sort(()=>Math.random()-.5).slice(0,l).map((e,l)=>{let[a,s]=e;return{name:a,round:s[0].round,position:l,clues:[...s].sort(()=>Math.random()-.5).slice(0,t)}})}(l,en,5);if(!t.length){alert("No clues matched your custom filters."),ey(!1);return}let a={id:"custom-".concat(Date.now()),showNumber:0,airDate:"",season:null,isSpecial:!1,tournamentType:null,categories:t.map((e,l)=>({id:"custom-".concat(l),name:e.name,round:e.round,position:e.position,clues:e.clues.map((e,t)=>({...e,id:e.clueId||"custom-".concat(l,"-").concat(t)}))}))};E(a),P("custom"),_(0),ee("competition"===v?eG():[]),et(0),$(!1),Q.current=new Set;let s="custom:".concat(Date.now());H(s);let n=a.categories.reduce((e,l)=>e+l.clues.length,0);(0,g.P6)({episodeKey:s,showNumber:null,mode:v,totalClues:n}),eM((0,g.rW)(s)),eE(a,"single")}catch(e){alert("Error building custom game.")}ey(!1)}async function eV(){try{let e=(0,g.Ak)();if(!e.length)return void alert("No missed clues yet. Miss or skip clues first, then come back to Learn mode.");let l=new Map;e.forEach(e=>{l.has(e.category)||l.set(e.category,[]),l.get(e.category).push({id:e.clueId,clueId:e.clueId,question:e.question,answer:e.answer,value:e.value,dailyDouble:e.dailyDouble,tripleStumper:e.tripleStumper,isFinalJeopardy:e.isFinalJeopardy,category:e.category,round:"single",rowIndex:0})});let t=[...l.entries()].slice(0,en).map((e,l)=>{let[t,a]=e;return{id:"learn-".concat(l),name:t,round:"single",position:l,clues:a.slice(0,5).map((e,l)=>({...e,rowIndex:l}))}}),a={id:"learn-".concat(Date.now()),showNumber:0,airDate:"",season:null,isSpecial:!1,tournamentType:null,categories:t};E(a),P("learn"),_(0),ee([]),$(!1),Q.current=new Set;let s="learn:".concat(Date.now());H(s);let n=a.categories.reduce((e,l)=>e+l.clues.length,0);(0,g.P6)({episodeKey:s,showNumber:null,mode:"learn",totalClues:n}),eM((0,g.rW)(s)),eE(a,"single")}catch(e){alert("Could not load your Learn clues.")}}function eK(){if(!W||(R(e=>({...e,[W.catId]:{...e[W.catId],[W.boardValue]:{...e[W.catId][W.boardValue],revealed:!0}}})),V(null),!G))return;let e=G.categories.reduce((e,l)=>e+l.clues.length,0);Q.current.add(W.clue.id),Q.current.size>=e&&(K&&((0,g.km)(K),eM((0,g.rW)(K)),eT((0,g.vO)())),$(!0))}function eH(e,l){if("competition"===v){let t=null!=l?l:el;ee(l=>l.map((l,a)=>a===t?{...l,score:l.score+e}:l));return}_(l=>l+e)}async function eB(e){if(W&&(K&&((0,g.zK)({episodeKey:K,outcome:e,clue:W.clue}),eM((0,g.rW)(K)),eT((0,g.vO)())),eS))try{await D("/api/user/progress",{outcome:e,clue:{clueId:W.clue.clueId,question:W.clue.question,answer:W.clue.answer,value:W.clue.value,dailyDouble:W.clue.dailyDouble,tripleStumper:W.clue.tripleStumper,isFinalJeopardy:W.clue.isFinalJeopardy,category:W.clue.category,round:W.clue.round}});let t=await fetch("/api/auth/me");if(t.ok){var l;let e=await t.json();eA(null!=(l=e.stats)?l:null)}}catch(e){}}async function e$(){if(!W)return;let e=W.respondentTeamIndex;await eB("correct"),eH(W.scoreValue,e),"competition"===v&&null!=e&&et(e),eK()}async function eQ(){if(!W)return;let e=W.respondentTeamIndex;await eB("incorrect"),eH(-W.scoreValue,e),eK()}async function eU(){await eB("skip"),eK()}async function e_(){if(eS)try{var e,l;await D("/api/user/game-complete",{endMoney:"competition"===v?0:U,showNumber:null!=(e=null==G?void 0:G.showNumber)?e:null});let t=await fetch("/api/auth/me");if(t.ok){let e=await t.json();eA(null!=(l=e.stats)?l:null)}}catch(e){}E(null),P(null),V(null),$(!1),H(null),eM(null),Q.current=new Set}if(e)return(0,a.jsx)("div",{className:"min-h-screen bg-blue-950 flex items-center justify-center text-white text-2xl",children:"Loading…"});if(G){var eY,eX,eZ;let e=G.categories.some(e=>"double"===e.round),l=G.categories.some(e=>"triple"===e.round),t=G.categories.some(e=>"final"===e.round);return(0,a.jsxs)("div",{className:"min-h-screen bg-blue-950 text-white p-4",children:[B&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 bg-blue-950/95 flex items-center justify-center p-6",children:[(0,a.jsx)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:Array.from({length:60}).map((e,l)=>(0,a.jsx)("span",{className:"absolute text-2xl animate-bounce",style:{left:"".concat(17*l%100,"%"),top:"".concat(13*l%100,"%"),animationDelay:"".concat(l%10*.1,"s")},children:"\uD83C\uDF89"},l))}),(0,a.jsxs)("div",{className:"relative bg-blue-900 border border-blue-700 rounded-2xl p-8 w-full max-w-2xl text-center",children:[(0,a.jsx)("h2",{className:"text-4xl font-bold text-yellow-300 mb-3",children:"Game Complete!"}),"competition"===v?(0,a.jsxs)("p",{className:"text-xl mb-4",children:["\uD83C\uDFC6 Winner: ",(0,a.jsx)("span",{className:"font-bold text-yellow-300",children:"competition"!==v||0===Z.length?null:null!=(eZ=null==(eX=[...Z].sort((e,l)=>l.score-e.score)[0])?void 0:eX.name)?eZ:null})]}):(0,a.jsxs)("p",{className:"text-xl mb-4",children:["Final score: ",(0,a.jsxs)("span",{className:"font-bold text-yellow-300",children:["$",U.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:["replay"===J&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:eq,className:"bg-yellow-400 text-blue-950 px-4 py-3 rounded-xl font-bold",children:"Replay next episode"}),(0,a.jsx)("button",{onClick:ez,className:"bg-yellow-400 text-blue-950 px-4 py-3 rounded-xl font-bold",children:"Replay random episode"}),(0,a.jsx)("button",{onClick:()=>{$(!1),E(null),P(null)},className:"bg-blue-700 px-4 py-3 rounded-xl font-bold",children:"Choose episode"}),(0,a.jsx)(o(),{href:"/",className:"bg-blue-700 px-4 py-3 rounded-xl font-bold",children:"Main Menu"})]}),"replay"!==J&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{$(!1),"random"===J&&eR(),"custom"===J&&eW(),"learn"===J&&eV()},className:"bg-yellow-400 text-blue-950 px-4 py-3 rounded-xl font-bold",children:"random"===J?"Create new episode":"Play again"}),(0,a.jsx)(o(),{href:"/",className:"bg-blue-700 px-4 py-3 rounded-xl font-bold",children:"Main Menu"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4 gap-3",children:[(0,a.jsx)("button",{onClick:e_,className:"text-yellow-400 hover:underline",children:"← Back"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-yellow-400",children:G.showNumber?"Show #".concat(G.showNumber):"Jeopardy"}),(0,a.jsxs)("div",{className:"text-sm text-gray-300",children:["competition"===v?"Competition":"Practice"," mode"]})]}),"competition"===v?(0,a.jsx)("div",{className:"text-right",children:Z.map((e,l)=>(0,a.jsxs)("div",{className:"text-sm ".concat(l===el?"text-yellow-300 font-bold":"text-white"),children:[e.name,": $",e.score.toLocaleString()]},"".concat(e.name,"-").concat(l)))}):(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",U.toLocaleString()]}),eF&&(0,a.jsxs)("div",{className:"text-xs text-blue-200",children:["Episode C/W/S: ",eF.correctAnswers,"/",eF.incorrectAnswers,"/",eF.skippedQuestions]}),(0,a.jsxs)("div",{className:"text-xs text-blue-300",children:["Overall C/W/S: ",eD.correctAnswers,"/",eD.incorrectAnswers,"/",eD.skippedQuestions]})]})]}),(0,a.jsxs)("div",{className:"mb-3 flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>O(e=>!e),className:"px-3 py-2 rounded-lg bg-blue-800 hover:bg-blue-700 text-sm font-bold",children:"Settings"}),"competition"===v&&Z[el]&&(0,a.jsxs)("div",{className:"text-sm text-blue-200 py-2",children:["Category control: ",(0,a.jsx)("span",{className:"text-yellow-300 font-bold",children:Z[el].name})]})]}),M&&(0,a.jsx)("div",{className:"max-w-3xl bg-blue-900 rounded-xl p-3 mb-4",children:(0,a.jsxs)("label",{className:"text-sm text-blue-200 flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:ea,onChange:e=>es(e.target.checked)}),"Triple stumper as blue"]})}),"competition"===v&&Z.length>0&&(0,a.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[(0,a.jsx)("label",{className:"text-sm text-blue-300",children:"Category chooser:"}),(0,a.jsx)("select",{value:el,onChange:e=>et(Number(e.target.value)),className:"bg-blue-800 border border-blue-600 rounded px-2 py-1 text-sm",children:Z.map((e,l)=>(0,a.jsx)("option",{value:l,children:e.name},"".concat(e.name,"-").concat(l)))})]}),(0,a.jsxs)("div",{className:"flex gap-2 mb-4 flex-wrap",children:[(0,a.jsx)("button",{onClick:()=>eE(G,"single"),className:"px-4 py-2 rounded-lg font-bold ".concat("single"===L?"bg-yellow-400 text-blue-950":"bg-blue-800"),children:"Jeopardy!"}),e&&(0,a.jsx)("button",{onClick:()=>eE(G,"double"),className:"px-4 py-2 rounded-lg font-bold ".concat("double"===L?"bg-yellow-400 text-blue-950":"bg-blue-800"),children:"Double Jeopardy!"}),l&&(0,a.jsx)("button",{onClick:()=>eE(G,"triple"),className:"px-4 py-2 rounded-lg font-bold ".concat("triple"===L?"bg-yellow-400 text-blue-950":"bg-blue-800"),children:"Triple Jeopardy!"}),t&&(0,a.jsx)("button",{onClick:()=>eE(G,"final"),className:"px-4 py-2 rounded-lg font-bold ".concat("final"===L?"bg-yellow-400 text-blue-950":"bg-blue-800"),children:"Final Jeopardy"})]}),W&&(0,a.jsx)(j,{clue:W.clue,value:W.scoreValue,onCorrect:e$,onIncorrect:eQ,onSkip:eU,respondentLabel:"competition"===v&&null!=W.respondentTeamIndex?null==(eY=Z[W.respondentTeamIndex])?void 0:eY.name:void 0,teamOptions:"competition"===v?Z.map(e=>e.name):void 0,respondentIndex:W.respondentTeamIndex,onRespondentChange:e=>V(l=>l?{...l,respondentTeamIndex:e}:l),lockRespondent:W.respondentLocked}),function(){if(!G)return null;let e=G.categories.filter(e=>e.round===L);return(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:e.map(e=>(0,a.jsx)("th",{className:"bg-blue-800 p-3 text-center text-sm font-bold uppercase border border-blue-900",children:e.name},e.id))})}),(0,a.jsx)("tbody",{children:("double"===L?S:"triple"===L?C:"final"===L?[0]:N).map(l=>(0,a.jsx)("tr",{children:e.map(e=>{var t;let s=null==(t=q[e.id])?void 0:t[l];if(!s)return(0,a.jsx)("td",{className:"border border-blue-900 p-1",children:(0,a.jsx)("div",{className:"w-full h-16 bg-blue-900 rounded"})},e.id);let n=s.clue.clueId?c(s.clue.clueId):null,o=ea?"bg-blue-700 hover:bg-blue-600 text-yellow-400":"bg-orange-800 hover:bg-orange-700 text-yellow-400";return(0,a.jsx)("td",{className:"border border-blue-900 p-1",children:s.revealed?(0,a.jsx)("div",{className:"w-full h-16 bg-blue-900 rounded"}):(0,a.jsxs)("button",{onClick:()=>(function(e,l,t){let a=t,s=null,n=!1;if(e.dailyDouble&&"final"!==L){var o,r;let e=null!=(r=null==(o=Z[el])?void 0:o.name)?r:"Chooser",l=window.prompt("Daily Double! ".concat(e,", enter wager:"),String(Math.max(200,t))),i=l?Number(l.replace(/[^\d]/g,"")):NaN;!Number.isNaN(i)&&i>0&&(a=i),"competition"===v&&(s=el,n=!0)}V({clue:e,catId:l,boardValue:t,scoreValue:a,respondentTeamIndex:s,respondentLocked:n})})(s.clue,e.id,l),className:"w-full h-16 font-bold text-xl rounded transition-colors relative ".concat(s.clue.tripleStumper?o:"bg-blue-700 hover:bg-blue-600 text-yellow-400"),children:["final"===L?"FINAL":"$".concat(l),((null==n?void 0:n.flagged)||(null==n?void 0:n.mediaFlag))&&(0,a.jsxs)("span",{className:"absolute top-1 right-1 text-xs",children:[n.flagged?"\uD83D\uDEA9":"",n.mediaFlag?"\uD83C\uDFAC":""]})]})},e.id)})},l))})]})})}()]})}return(0,a.jsxs)("div",{className:"min-h-screen bg-blue-950 text-white p-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-yellow-400 mb-2 text-center",children:"Jeopardy!"}),(0,a.jsx)("div",{className:"max-w-5xl mx-auto bg-blue-900 rounded-xl p-4 mb-5 text-sm",children:eS?(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-3 items-center",children:[(0,a.jsxs)("div",{children:["Signed in as ",(0,a.jsx)("span",{className:"text-yellow-300 font-bold",children:eS.username})]}),eI&&(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-blue-200 text-xs md:text-sm",children:[(0,a.jsxs)("div",{children:["Games: ",eI.gamesPlayed]}),(0,a.jsxs)("div",{children:["Avg $: ",eI.averageEndMoney]}),(0,a.jsxs)("div",{children:["Episodes: ",eI.episodesCompleted]})]})]}):(0,a.jsx)("div",{className:"text-blue-200",children:"Sign in on the home page to sync stats and Learn mode across devices."})}),(0,a.jsx)("div",{className:"flex justify-center gap-2 mb-4",children:["competition","practice"].map(e=>(0,a.jsx)("button",{onClick:()=>k(e),className:"px-5 py-2 rounded-lg font-bold capitalize ".concat(v===e?"bg-yellow-400 text-blue-950":"bg-blue-800 hover:bg-blue-700"),children:e},e))}),"competition"===v&&(0,a.jsxs)("div",{className:"max-w-3xl mx-auto bg-blue-900 rounded-xl p-4 mb-5",children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-blue-300 mb-1",children:"Players/teams (comma separated)"}),(0,a.jsx)("input",{value:Y,onChange:e=>X(e.target.value),className:"w-full bg-blue-800 border border-blue-600 rounded px-3 py-2",placeholder:"Team 1, Team 2"})]}),(0,a.jsxs)("div",{className:"max-w-5xl mx-auto flex items-center justify-center gap-2 mb-5 flex-wrap",children:[["replay","random","custom","learn"].map(e=>(0,a.jsx)("button",{onClick:()=>F(e),className:"px-4 py-2 rounded-lg font-bold capitalize ".concat(T===e?"bg-yellow-400 text-blue-950":"bg-blue-800 hover:bg-blue-700"),children:e},e)),(0,a.jsx)("button",{onClick:()=>O(e=>!e),className:"px-4 py-2 rounded-lg font-bold bg-blue-800 hover:bg-blue-700",children:"Settings"})]}),M&&(0,a.jsx)("div",{className:"max-w-3xl mx-auto bg-blue-900 rounded-xl p-4 mb-5",children:(0,a.jsxs)("label",{className:"text-sm text-blue-200 flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:ea,onChange:e=>es(e.target.checked)}),"Triple stumper as blue"]})}),"replay"===T&&(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-4",children:[(0,a.jsxs)("div",{className:"bg-blue-900 rounded-xl p-4",children:[(0,a.jsx)("div",{className:"text-sm text-blue-200 mb-2",children:"Seasons"}),(0,a.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,a.jsx)("button",{onClick:()=>ew(Array.from({length:42},(e,l)=>l+1)),className:"px-3 py-1 rounded text-xs font-bold bg-blue-800 hover:bg-blue-700",children:"All"}),(0,a.jsx)("button",{onClick:()=>ew([]),className:"px-3 py-1 rounded text-xs font-bold bg-blue-800 hover:bg-blue-700",children:"None"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:Array.from({length:42}).map((e,l)=>{let t=l+1,s=ef.includes(t);return(0,a.jsx)("button",{onClick:()=>{ew(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t].sort((e,l)=>e-l))},className:"px-2 py-1 rounded text-xs font-bold ".concat(s?"bg-yellow-400 text-blue-950":"bg-blue-800 hover:bg-blue-700"),children:t},t)})}),(0,a.jsx)("div",{className:"text-sm text-blue-200 mb-2",children:"Episode type"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:ev,onChange:e=>ek(e.target.checked)}),"Regular episodes"]}),eP.map(e=>(0,a.jsx)("button",{onClick:()=>{eN(l=>l.includes(e)?l.filter(l=>l!==e):[...l,e])},className:"px-3 py-1 rounded text-xs font-bold ".concat(ej.includes(e)?"bg-yellow-400 text-blue-950":"bg-blue-800 hover:bg-blue-700"),children:e},e))]}),(0,a.jsx)("button",{onClick:ez,className:"bg-yellow-400 text-blue-950 font-bold rounded px-4 py-2",children:"Random replay episode"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:eL().map(e=>(0,a.jsxs)("button",{onClick:()=>eJ(e),className:"bg-blue-800 hover:bg-blue-700 rounded-xl p-6 text-left",children:[(0,a.jsxs)("div",{className:"text-xl font-bold",children:["Show #",e.showNumber]}),(0,a.jsx)("div",{className:"text-sm text-blue-300",children:e.airDate}),A(e)&&(0,a.jsxs)("div",{className:"text-sm text-blue-300",children:["Season ",A(e)]}),e.isSpecial&&(0,a.jsx)("div",{className:"text-xs mt-1 text-yellow-300",children:e.tournamentType||"Other Special"})]},e.id))})]}),"random"===T&&(0,a.jsxs)("div",{className:"max-w-xl mx-auto bg-blue-900 rounded-xl p-6 space-y-3",children:[(0,a.jsx)("label",{className:"block text-sm text-blue-300",children:"Number of categories"}),(0,a.jsx)("input",{type:"number",min:2,max:8,value:en,onChange:e=>eo(Math.max(2,Math.min(8,Number(e.target.value)||6))),className:"w-full bg-blue-800 border border-blue-600 rounded px-3 py-2"}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:er,onChange:e=>ei(e.target.checked)})," Enable Double Jeopardy"]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:ec,onChange:e=>ed(e.target.checked)})," Enable Triple Jeopardy (third board)"]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:eu,onChange:e=>em(e.target.checked)})," Add Final Jeopardy"]}),(0,a.jsx)("button",{onClick:eR,disabled:h,className:"w-full bg-yellow-400 text-blue-950 font-bold py-3 rounded-xl disabled:opacity-60",children:h?"Loading clue library… ".concat(f.loaded,"/").concat(f.total):"Build Random Game"})]}),"custom"===T&&(0,a.jsxs)("div",{className:"max-w-2xl mx-auto bg-blue-900 rounded-xl p-6 space-y-4",children:[(0,a.jsx)("input",{type:"text",value:eb,onChange:e=>ep(e.target.value),placeholder:"Search clues, answers, categories",className:"w-full bg-blue-800 border border-blue-600 rounded px-3 py-2"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-3",children:[(0,a.jsxs)("label",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:!!eg.dailyDoublesOnly,onChange:e=>ex(l=>({...l,dailyDoublesOnly:e.target.checked||void 0}))})," Daily Doubles only"]}),(0,a.jsxs)("label",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:!!eg.tripleStumpersOnly,onChange:e=>ex(l=>({...l,tripleStumpersOnly:e.target.checked||void 0}))})," Triple stumpers only"]}),(0,a.jsxs)("label",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:!!eg.finalOnly,onChange:e=>ex(l=>({...l,finalOnly:e.target.checked||void 0}))})," Final only"]}),(0,a.jsxs)("label",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:!!eg.flaggedOnly,onChange:e=>ex(l=>({...l,flaggedOnly:e.target.checked||void 0}))})," Flagged only"]})]}),(0,a.jsx)("button",{onClick:eW,disabled:eh,className:"w-full bg-yellow-400 text-blue-950 font-bold py-3 rounded-xl disabled:opacity-60",children:eh?"Building…":"Build Custom Game"})]}),"learn"===T&&(0,a.jsxs)("div",{className:"max-w-xl mx-auto text-center bg-blue-900 rounded-xl p-6",children:[(0,a.jsx)("p",{className:"text-blue-200 mb-4",children:"Study your missed and skipped clues from your local tracker history."}),(0,a.jsx)("button",{onClick:eV,className:"bg-yellow-400 text-blue-950 px-8 py-3 rounded-xl font-bold",children:"Start Learn Game"})]}),"empty"===t&&(0,a.jsx)("p",{className:"text-center mt-6 text-blue-300",children:"No Jeopardy data loaded yet."})]})}},9074:(e,l,t)=>{"use strict";t.d(l,{Ak:()=>x,P6:()=>b,PT:()=>u,km:()=>g,rW:()=>m,vO:()=>i,zK:()=>p});let a="triviaparty:local:overall",s="triviaparty:local:episodes",n="triviaparty:local:clues";function o(e,l){try{let t=window.localStorage.getItem(e);return t?JSON.parse(t):l}catch(e){return l}}function r(e,l){window.localStorage.setItem(e,JSON.stringify(l))}function i(){return o(a,{gamesPlayed:0,episodesCompleted:0,correctAnswers:0,incorrectAnswers:0,skippedQuestions:0,updatedAt:new Date(0).toISOString()})}function c(e){r(a,{...e,updatedAt:new Date().toISOString()})}function d(){return o(s,{})}function u(){return Object.values(d()).sort((e,l)=>e.completedAt&&l.completedAt?l.completedAt.localeCompare(e.completedAt):l.startedAt.localeCompare(e.startedAt))}function m(e){var l;return null!=(l=d()[e])?l:null}function b(e){let l=d();l[e.episodeKey]||(l[e.episodeKey]={episodeKey:e.episodeKey,showNumber:e.showNumber,mode:e.mode,totalClues:e.totalClues,answeredClues:0,correctAnswers:0,incorrectAnswers:0,skippedQuestions:0,completed:!1,startedAt:new Date().toISOString(),completedAt:null},r(s,l))}function p(e){let l=d(),t=l[e.episodeKey];if(!t)return;t.answeredClues+=1,"correct"===e.outcome&&(t.correctAnswers+=1),"incorrect"===e.outcome&&(t.incorrectAnswers+=1),"skip"===e.outcome&&(t.skippedQuestions+=1),l[e.episodeKey]=t,r(s,l);let a=i();if("correct"===e.outcome&&(a.correctAnswers+=1),"incorrect"===e.outcome&&(a.incorrectAnswers+=1),"skip"===e.outcome&&(a.skippedQuestions+=1),c(a),e.clue.clueId){var u;let l=o(n,{}),t=l[e.clue.clueId];l[e.clue.clueId]={clueId:e.clue.clueId,question:e.clue.question,answer:e.clue.answer,category:e.clue.category,round:e.clue.round,value:e.clue.value,dailyDouble:e.clue.dailyDouble,tripleStumper:e.clue.tripleStumper,isFinalJeopardy:e.clue.isFinalJeopardy,outcomes:[...null!=(u=null==t?void 0:t.outcomes)?u:[],e.outcome].slice(-50),lastOutcome:e.outcome,updatedAt:new Date().toISOString()},r(n,l)}}function g(e){let l=d(),t=l[e];if(!t||t.completed)return;t.completed=!0,t.completedAt=new Date().toISOString(),l[e]=t,r(s,l);let a=i();a.gamesPlayed+=1,a.episodesCompleted+=1,c(a)}function x(){return Object.values(o(n,{})).filter(e=>"incorrect"===e.lastOutcome||"skip"===e.lastOutcome).sort((e,l)=>l.updatedAt.localeCompare(e.updatedAt))}},9705:(e,l,t)=>{Promise.resolve().then(t.bind(t,8189))}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=9705)),_N_E=e.O()}]);