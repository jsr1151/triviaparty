(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[864],{1419:(e,t,l)=>{"use strict";l.d(t,{BH:()=>s,BU:()=>o,Ms:()=>x,O0:()=>h,Qf:()=>g,nL:()=>b,o8:()=>n,oW:()=>r});let a="triviaparty-github-config";function n(){try{let e=localStorage.getItem(a);if(!e)return null;let t=JSON.parse(e);if(!t.token||!t.owner||!t.repo)return null;return t}catch(e){return null}}function o(e){localStorage.setItem(a,JSON.stringify(e))}function s(){localStorage.removeItem(a)}function r(){return null!==n()}let i="https://api.github.com";function c(e){return{Authorization:"Bearer ".concat(e),Accept:"application/vnd.github.v3+json","Content-Type":"application/json"}}async function d(e,t){let l="".concat(i,"/repos/").concat(e.owner,"/").concat(e.repo,"/contents/").concat(t),a=await fetch(l,{headers:c(e.token)});if(404===a.status)return null;if(!a.ok){let e=await a.text();throw Error("GitHub API error fetching ".concat(t,": ").concat(a.status," ").concat(e))}let n=await a.json();return{sha:n.sha,content:n.content}}async function u(e,t,l,a,n){let o="".concat(i,"/repos/").concat(e.owner,"/").concat(e.repo,"/contents/").concat(t),s={message:a,content:function(e){let t=new TextEncoder().encode(e),l="";for(let e=0;e<t.length;e++)l+=String.fromCharCode(t[e]);return btoa(l)}(l)};n&&(s.sha=n);let r=await fetch(o,{method:"PUT",headers:c(e.token),body:JSON.stringify(s)});if(!r.ok){let e=await r.text();throw Error("GitHub API error writing ".concat(t,": ").concat(r.status," ").concat(e))}}async function m(e,t,l,a){let n="public/".concat(t),o="docs/".concat(t),s=await d(e,n),r=null;if(s)try{r=JSON.parse(function(e){let t=atob(e.replace(/\n/g,"")),l=new Uint8Array(t.length);for(let e=0;e<t.length;e++)l[e]=t.charCodeAt(e);return new TextDecoder("utf-8").decode(l)}(s.content))}catch(e){r=null}let i=JSON.stringify(a(r),null,2)+"\n";await u(e,n,i,l,null==s?void 0:s.sha);let c=await d(e,o);await u(e,o,i,l,null==c?void 0:c.sha)}async function p(e,t,l,a){let n="public/".concat(t),o="docs/".concat(t),s=await d(e,n);await u(e,n,l,a,null==s?void 0:s.sha);let r=await d(e,o);await u(e,o,l,a,null==r?void 0:r.sha)}async function b(e,t){let l=0,a=0;function n(e){var t;let l=(e.question||"").trim().toLowerCase(),a="string"==typeof e.category?e.category.trim().toLowerCase():((null==(t=e.category)?void 0:t.name)||"").trim().toLowerCase();return"".concat(e.type,"|").concat(a,"|").concat(l)}return await m(e,"data/questions/sheets-import-questions.json","feat: add ".concat(t.length," question(s) via Creator"),e=>{let o=(null==e?void 0:e.questions)||[],s=new Set(o.map(e=>n(e))),r=[];for(let e of t){if(!e.type||!e.question){a++;continue}let t=n(e);if(s.has(t)){a++;continue}s.add(t),r.push(e)}l=r.length;let i=[...o,...r];return{count:i.length,questions:i}}),{added:l,skipped:a}}async function g(e,t){var l,a;let n=t.gameId,o="game-".concat(n,".json"),s=JSON.stringify(t,null,2)+"\n";await p(e,"data/jeopardy/".concat(o),s,"feat: add/update Jeopardy game ".concat(n," via Creator"));let r={gameId:n,showNumber:t.showNumber||0,airDate:t.airDate||"",season:null!=(l=t.season)?l:null,isSpecial:t.isSpecial||!1,tournamentType:null!=(a=t.tournamentType)?a:null,file:o};await m(e,"data/jeopardy/index.json","feat: update Jeopardy index for game ".concat(n),e=>[r,...(Array.isArray(e)?e:[]).filter(e=>e.gameId!==n)].sort((e,t)=>t.gameId-e.gameId))}async function h(e,t,l){let a=/^g(\d+)-/.exec(t);if(!a)throw Error("Invalid clueId format: ".concat(t));let n=Number(a[1]);await m(e,"data/jeopardy/game-".concat(n,".json"),"feat: update tags for clue ".concat(t),e=>{if(!e)throw Error("Game file for game-".concat(n," not found"));return{...e,categories:e.categories.map(e=>({...e,clues:e.clues.map(e=>e.clueId!==t?e:{...e,topicTags:l})}))}})}async function x(e){try{let t="".concat(i,"/repos/").concat(e.owner,"/").concat(e.repo);return(await fetch(t,{headers:c(e.token)})).ok}catch(e){return!1}}},8189:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>F});var a=l(5155),n=l(2115),o=l(2619),s=l.n(o);let r="jeopardy:clue:",i="jeopardy:tags";function c(e){try{let t=window.localStorage.getItem(r+e);if(!t)return m(e);return{...m(e),...JSON.parse(t)}}catch(t){return m(e)}}function d(e){if(window.localStorage.setItem(r+e.clueId,JSON.stringify(e)),e.topicTags.length>0){let t=Array.from(new Set([...u(),...e.topicTags])).sort();window.localStorage.setItem(i,JSON.stringify(t))}}function u(){try{let e=window.localStorage.getItem(i);return e?JSON.parse(e):[]}catch(e){return[]}}function m(e){return{clueId:e,topicTags:[],flagged:!1,mediaFlag:!1}}async function p(e,t){var l,a,n,o,s,r,i,d;let u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,m=await fetch("".concat(e,"/data/jeopardy/index.json")),p=await m.json(),b=[],g=null==(l=t.search)?void 0:l.toLowerCase();for(let l of p){if(b.length>=u)break;if((null==(a=t.seasons)?void 0:a.length)&&!t.seasons.includes(null!=(o=l.season)?o:-1)||(null==(n=t.gameIds)?void 0:n.length)&&!t.gameIds.includes(l.gameId))continue;let m=await fetch("".concat(e,"/data/jeopardy/").concat(l.file)),p=await m.json(),h={gameId:p.gameId,showNumber:p.showNumber,airDate:p.airDate,season:p.season,isSpecial:p.isSpecial,tournamentType:p.tournamentType};for(let e of p.categories)if(null==(s=t.rounds)||!s.length||t.rounds.includes(e.round)){for(let l of e.clues){if(!l.clueId||t.tripleStumpersOnly&&!l.tripleStumper||t.dailyDoublesOnly&&!l.dailyDouble||t.finalOnly&&!l.isFinalJeopardy||null!=t.minValue&&null!=l.value&&l.value<t.minValue||null!=t.maxValue&&null!=l.value&&l.value>t.maxValue||g&&!"".concat(l.question," ").concat(l.answer," ").concat(l.category).toLowerCase().includes(g))continue;let e=c(l.clueId);if((!t.flaggedOnly||e.flagged)&&(!t.mediaFlaggedOnly||e.mediaFlag)){if(null==(r=t.topicTags)?void 0:r.length){let a=Array.from(new Set([...null!=(i=l.topicTags)?i:[],...null!=(d=e.topicTags)?d:[]]));if(!t.topicTags.every(e=>a.includes(e)))continue}if(b.push({clue:l,userData:e,game:h}),b.length>=u)break}}if(b.length>=u)break}}return b}function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"single";return[...e.flatMap(e=>e.categories.filter(e=>e.round===a&&e.clues.length>=l))].sort(()=>Math.random()-.5).slice(0,t).map(e=>({...e,clues:[...e.clues].sort(()=>Math.random()-.5).slice(0,l)}))}var g=l(9074);let h=[{id:"science",label:"Science",emoji:"\uD83D\uDD2C",keywords:["science","scientific","research","laboratory","experiment"],subtags:[{label:"Chemistry",keywords:["atom","chemical","molecule","acid","base","periodic table"]},{label:"Physics",keywords:["force","motion","velocity","quantum","relativity","energy"]},{label:"Mathematics",keywords:["math","algebra","geometry","calculus","equation","theorem","prime"]},{label:"Astronomy",keywords:["planet","star","galaxy","solar system","moon","nebula","cosmos"]},{label:"Anatomy",keywords:["organ","skeleton","muscle","artery","heart","brain","anatomy"]},{label:"Biology",keywords:["biology","cell","genetic","evolution","species","dna"]},{label:"Animal Kingdom",keywords:["animal","mammal","bird","reptile","fish","wildlife","zoo"]},{label:"Nature",keywords:["forest","river","ecosystem","climate","weather","natural world"]},{label:"Psychology",keywords:["psychology","behavior","cognitive","mind","personality","emotion"]},{label:"Technology",keywords:["computer","software","internet","device","ai","algorithm","tech"]},{label:"Academia",keywords:["university","college","professor","campus","scholar","academic"]}]},{id:"arts",label:"Arts",emoji:"\uD83C\uDFA8",keywords:["art","artist","creative","aesthetic"],subtags:[{label:"Visual Arts",keywords:["painting","sculpture","gallery","museum","canvas","portrait"]},{label:"Literature",keywords:["novel","poem","author","book","literature","prose"]},{label:"Comics",keywords:["comic","graphic novel","superhero","manga panel"]},{label:"English",keywords:["grammar","english language","vocabulary","spelling"]},{label:"Foreign Language",keywords:["spanish","french","german","latin","translation","language"]},{label:"Art Process",keywords:["draw","sketch","design","composition","brushstroke"]},{label:"Beauty/Fashion",keywords:["fashion","style","runway","couture","beauty","cosmetic"]},{label:"Culinary",keywords:["cook","recipe","kitchen","chef","cuisine","ingredient"]},{label:"Instruments",keywords:["guitar","piano","violin","trumpet","drum","instrument"]}]},{id:"entertainment",label:"Entertainment",emoji:"\uD83C\uDFAC",keywords:["entertainment","pop culture","showbiz"],subtags:[{label:"Movies",keywords:["film","movie","box office","director","cinema"]},{label:"Television",keywords:["tv","television","series","sitcom","episode","network"]},{label:"Music",keywords:["song","album","band","singer","chart","lyrics"]},{label:"Cartoons",keywords:["cartoon","animated","animation"]},{label:"Golden Age",keywords:["classic hollywood","golden age","silver screen"]},{label:"Anime",keywords:["anime","manga","otaku"]},{label:"Social Media",keywords:["instagram","tiktok","youtube","tweet","viral","influencer"]},{label:"Celebrities",keywords:["celebrity","actor","actress","star","famous person"]},{label:"Children's Entertainment",keywords:["kids show","children","sesame","nickelodeon","disney channel"]}]},{id:"sports",label:"Sports",emoji:"\uD83C\uDFC5",keywords:["sport","athlete","competition","tournament","league"],subtags:[{label:"Board Games",keywords:["chess","checkers","monopoly","board game"]},{label:"Card Games",keywords:["poker","bridge","blackjack","card game"]},{label:"Recreation",keywords:["hobby","recreation","pastime"]},{label:"Olympics",keywords:["olympic","medal","summer games","winter games"]},{label:"Field Sports",keywords:["soccer","football","baseball","rugby","cricket","lacrosse"]},{label:"Court/Arena Sports",keywords:["basketball","tennis","volleyball","hockey","arena"]},{label:"Motor Sports",keywords:["formula 1","nascar","motogp","rally","motor sport"]},{label:"Water/Ice Sports",keywords:["swimming","diving","surfing","skiing","ice skating","snowboard"]},{label:"General Sports",keywords:["sports trivia","team record","athletics"]},{label:"Sports Franchises",keywords:["franchise","club","team name","mascot"]},{label:"Fitness",keywords:["fitness","workout","exercise","training"]},{label:"World Records",keywords:["world record","guinness","fastest","longest"]}]},{id:"history",label:"History",emoji:"\uD83D\uDCDC",keywords:["history","historical","era","century","civilization"],subtags:[{label:"U.S. History",keywords:["american history","colonies","civil war","founding fathers"]},{label:"Presidents/VPs",keywords:["president","vice president","white house"]},{label:"NA/SA History",keywords:["canada history","latin america","south america history"]},{label:"European History",keywords:["europe history","british empire","france history","romanov"]},{label:"Asian History",keywords:["china history","japan history","india history","dynasty"]},{label:"Global History",keywords:["world history","international history"]},{label:"Warzone",keywords:["war","battle","military","conflict","siege"]},{label:"Ancient History",keywords:["ancient","pharaoh","mesopotamia","rome","greece"]},{label:"Modern History",keywords:["20th century","21st century","modern era"]},{label:"Government",keywords:["government","congress","parliament","constitution","policy"]},{label:"World Religion",keywords:["religion","church","temple","islam","christianity","buddhism"]},{label:"Business",keywords:["company","corporation","market","industry","economy"]},{label:"Laws",keywords:["law","legal","court","justice","supreme court"]}]},{id:"geography",label:"Geography",emoji:"\uD83C\uDF0D",keywords:["geography","map","country","capital","region","continent"],subtags:[{label:"NA/SA Geo",keywords:["north america","south america","andes","caribbean"]},{label:"European Geo",keywords:["europe","balkan","scandinavia","alps"]},{label:"African Geo",keywords:["africa","sahara","nile","sub-saharan"]},{label:"Asian Geo",keywords:["asia","himalaya","southeast asia","middle east"]},{label:"Oceanic Geo",keywords:["oceania","australia","pacific islands","new zealand"]},{label:"U.S. Geo",keywords:["u.s. state","united states","america geography","appalachian"]},{label:"Global Geo",keywords:["world map","global geography","international borders"]},{label:"Flags",keywords:["flag","tricolor","emblem","coat of arms"]},{label:"Transportation",keywords:["railway","airport","subway","shipping","transport"]}]},{id:"mix-up",label:"Mix-Up",emoji:"\uD83C\uDF00",keywords:["misc","mixed bag","oddball"],subtags:[{label:"Game Shows",keywords:["game show","host","wheel of fortune","price is right"]},{label:"Holidays",keywords:["holiday","christmas","halloween","easter","thanksgiving"]},{label:"Ancient Sports",keywords:["gladiator","chariot","ancient olympics"]},{label:"Medical Care",keywords:["medicine","doctor","hospital","treatment"]},{label:"Amusement Parks",keywords:["theme park","roller coaster","disneyland","ride"]},{label:"Theater",keywords:["theater","broadway","play","stage","drama"]},{label:"Orchestral",keywords:["orchestra","symphony","conductor","concerto"]},{label:"Sensation/Perception",keywords:["sense","perception","vision","hearing"]},{label:"Art History",keywords:["renaissance","baroque","impressionism","art movement"]},{label:"Philosophy",keywords:["philosophy","ethics","logic","stoic","existential"]},{label:"Architecture",keywords:["architecture","building","skyscraper","cathedral","arch"]},{label:"Inventions",keywords:["inventor","invention","patent","prototype"]},{label:"Anthropology/Culture",keywords:["culture","anthropology","custom","folklore"]},{label:"Earth Science",keywords:["geology","volcano","earthquake","mineral","tectonic"]},{label:"Mythology",keywords:["myth","mythology","god","goddess","legend"]}]},{id:"video-games",label:"Video Games",emoji:"\uD83C\uDFAE",keywords:["video game","gaming","gamer","arcade"],subtags:[{label:"Consoles",keywords:["console","playstation","xbox","nintendo","sega"]},{label:"Retro Games",keywords:["retro","8-bit","16-bit","arcade classic"]},{label:"Adventure Games",keywords:["adventure game","platformer","quest game"]},{label:"Racing Games",keywords:["racing game","kart","driving sim"]},{label:"RPGs & Open World",keywords:["rpg","open world","side quest","level up"]},{label:"Horror Games",keywords:["survival horror","jump scare","horror game"]},{label:"Simulation Games",keywords:["simulation game","simulator","sandbox"]},{label:"General Games",keywords:["video game character","boss battle","speedrun"]},{label:"Fighting Games",keywords:["fighting game","combo","street fighter","tekken"]},{label:"Pokemon",keywords:["pokemon","pikachu","pokeball","gym leader"]},{label:"Party Games",keywords:["party game","minigame"]},{label:"As Seen on TV",keywords:["tv adaptation","licensed game"]},{label:"Sports Games",keywords:["fifa","madden","nba 2k","sports game"]},{label:"Music/Rhythm Games",keywords:["rhythm game","guitar hero","dance game"]},{label:"Puzzle Games",keywords:["puzzle game","tetris","match-3"]},{label:"Shooter Games",keywords:["fps","shooter","battle royale","sniper"]},{label:"Mobile Games",keywords:["mobile game","app game","ios game","android game"]}]}];function x(e){return e.toLowerCase().replace(/&/g," and ").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").replace(/-{2,}/g,"-")}function y(e){return e.toLowerCase().replace(/[^a-z0-9\s]+/g," ").replace(/\s+/g," ").trim()}let f=h.flatMap(e=>e.subtags.map(t=>({id:"".concat(e.id,"/").concat(x(t.label)),mainId:e.id,mainLabel:e.label,mainEmoji:e.emoji,subLabel:t.label,keywords:[...e.keywords,...t.keywords].map(y)}))),w=new Map(f.map(e=>[e.id,e])),v=h.map(e=>({id:e.id,label:e.label,emoji:e.emoji,options:e.subtags.map(t=>({id:"".concat(e.id,"/").concat(x(t.label)),label:t.label}))}));function k(e){let t=w.get(e);return t?"".concat(t.mainEmoji," ").concat(t.mainLabel," \xb7 ").concat(t.subLabel):e}var j=l(1419);function N(e){let{clue:t,value:l,onCorrect:o,onIncorrect:s,onSkip:r,respondentLabel:i,teamOptions:m,respondentIndex:p,onRespondentChange:b,lockRespondent:g}=e,[h,x]=(0,n.useState)(!1),[N,S]=(0,n.useState)(!1),[C,I]=(0,n.useState)(!1),[A,D]=(0,n.useState)(!1),[T,F]=(0,n.useState)([]),[O,M]=(0,n.useState)(""),[G,E]=(0,n.useState)([]),[J,P]=(0,n.useState)(["science","arts"]),[L,q]=(0,n.useState)(!1),z=(0,n.useMemo)(()=>v,[]),H=(0,n.useMemo)(()=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;if(!e.trim())return[];let l=y(e);return Array.from(new Set(f.map(e=>{let t=e.keywords.reduce((e,t)=>t&&l.includes(t)?e+1:e,0);return{id:e.id,hits:t}}).filter(e=>e.hits>0).sort((e,t)=>t.hits-e.hits).slice(0,t).map(e=>e.id)))}("".concat(e.category," ").concat(e.question," ").concat(e.answer),t)})(t).filter(e=>!T.includes(e)),[t,T]);(0,n.useEffect)(()=>{var e,l,a;if(!t.clueId)return;let n=c(t.clueId),o=Array.from(new Set([...null!=(e=t.topicTags)?e:[],...null!=(l=n.topicTags)?l:[]]));I(n.flagged),D(n.mediaFlag),F(o),E(Array.from(new Set([...u(),...null!=(a=t.topicTags)?a:[]]))),x(!1),S(!1),M(""),P(["science","arts"])},[t.clueId,t.topicTags]);let W=(0,n.useCallback)((e,l)=>{if(t.clueId){var a;I(e),D(l),a=t.clueId,d({...c(a),flagged:e,mediaFlag:l})}},[t.clueId]),R=(0,n.useCallback)(e=>{if(t.clueId){var l;F(e),l=t.clueId,d({...c(l),topicTags:e}),E(u())}},[t.clueId]);function V(e){let t=e.trim().toLowerCase();!t||T.includes(t)||(R([...T,t]),M(""))}function K(e){if(T.includes(e))return void R(T.filter(t=>t!==e));R([...T,e])}async function B(){if(t.clueId){q(!0);try{let e=(0,j.o8)();if(!e)return void window.alert("GitHub not connected. Go to Creator → Connect GitHub to set up your token.");await (0,j.O0)(e,t.clueId,T),window.alert("Tags pushed to GitHub! Changes will be live after GitHub Pages redeploys.")}catch(e){window.alert(e instanceof Error?e.message:"Failed to push tags to GitHub")}finally{q(!1)}}}let U=G.filter(e=>e.includes(O.toLowerCase())&&!T.includes(e));return(0,a.jsxs)("div",{className:"fixed inset-0 bg-blue-950 flex flex-col items-center justify-center z-50 p-6 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"text-yellow-400 text-lg mb-2 uppercase tracking-wide text-center",children:[t.category," — $",l]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center mb-4",children:[t.dailyDouble&&(0,a.jsx)("span",{className:"bg-red-600 text-white text-sm md:text-base font-bold px-4 py-2 rounded-full animate-pulse",children:"Daily Double!"}),t.tripleStumper&&(0,a.jsx)("span",{className:"bg-orange-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:"Triple Stumper"}),t.isFinalJeopardy&&(0,a.jsx)("span",{className:"bg-purple-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:"Final Jeopardy"}),C&&(0,a.jsx)("span",{className:"bg-yellow-500 text-blue-950 text-xs font-bold px-3 py-1 rounded-full",children:"\uD83D\uDEA9 Flagged"}),A&&(0,a.jsx)("span",{className:"bg-gray-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:"\uD83C\uDFAC Media"}),T.map(e=>(0,a.jsx)("span",{className:"bg-blue-700 text-white text-xs font-bold px-3 py-1 rounded-full",children:k(e)},e))]}),(0,a.jsx)("div",{className:"text-white text-2xl md:text-3xl text-center font-bold max-w-3xl mb-6 leading-snug",children:t.question}),i&&(0,a.jsxs)("div",{className:"text-blue-200 text-sm md:text-base mb-4",children:["Responding: ",(0,a.jsx)("span",{className:"text-yellow-300 font-bold",children:i})]}),h&&m&&m.length>0&&b&&(0,a.jsxs)("div",{className:"mb-4 w-full max-w-sm",children:[(0,a.jsx)("label",{className:"block text-sm text-blue-200 mb-1",children:"Who buzzed in?"}),(0,a.jsxs)("select",{disabled:!!g,value:null!=p?p:"",onChange:e=>b(Number(e.target.value)),className:"w-full bg-blue-800 border border-blue-600 rounded px-3 py-2 text-sm",children:[null==p&&(0,a.jsx)("option",{value:"",disabled:!0,children:"Select team"}),m.map((e,t)=>(0,a.jsx)("option",{value:t,children:e},"".concat(e,"-").concat(t)))]})]}),h&&(0,a.jsx)("div",{className:"text-yellow-300 text-xl md:text-2xl text-center mb-6 italic max-w-3xl",children:'"'.concat(t.answer,'"')}),N&&(0,a.jsxs)("div",{className:"bg-blue-900 rounded-xl p-4 mb-4 w-full max-w-lg",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:T.map(e=>(0,a.jsxs)("span",{className:"bg-blue-700 text-white text-sm px-2 py-1 rounded-full flex items-center gap-1",children:[k(e),(0,a.jsx)("button",{onClick:()=>{R(T.filter(t=>t!==e))},className:"text-blue-300 hover:text-white",children:"\xd7"})]},e))}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("div",{className:"text-sm text-blue-200 font-bold",children:"Auto-tag suggestions"}),(0,a.jsx)("button",{onClick:function(){0!==H.length&&R(Array.from(new Set([...T,...H])))},disabled:0===H.length,className:"bg-yellow-400 text-blue-950 px-3 py-1 rounded text-xs font-bold disabled:opacity-50",children:"Apply auto-tags"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[0===H.length&&(0,a.jsx)("span",{className:"text-xs text-blue-300",children:"No strong keyword matches found."}),H.map(e=>(0,a.jsxs)("button",{onClick:()=>K(e),className:"bg-blue-800 hover:bg-blue-700 text-blue-100 text-xs px-2 py-1 rounded-full",children:["+ ",k(e)]},e))]})]}),(0,a.jsx)("div",{className:"space-y-2 mb-4",children:z.map(e=>{let t=J.includes(e.id)||e.options.some(e=>T.includes(e.id));return(0,a.jsxs)("div",{className:"bg-blue-900/40 border border-blue-800 rounded-lg",children:[(0,a.jsxs)("button",{onClick:()=>{var t;return t=e.id,void P(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},className:"w-full px-3 py-2 text-left text-sm font-bold text-blue-100 flex items-center justify-between",children:[(0,a.jsxs)("span",{children:[e.emoji," ",e.label]}),(0,a.jsx)("span",{className:"text-blue-300",children:t?"−":"+"})]}),t&&(0,a.jsx)("div",{className:"px-3 pb-3 flex flex-wrap gap-2",children:e.options.map(e=>{let t=T.includes(e.id);return(0,a.jsx)("button",{onClick:()=>K(e.id),className:"text-xs px-2 py-1 rounded-full border transition-colors ".concat(t?"bg-yellow-400 text-blue-950 border-yellow-300":"bg-blue-800 text-blue-100 border-blue-700 hover:bg-blue-700"),children:e.label},e.id)})})]},e.id)})}),(0,a.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,a.jsx)("input",{type:"text",value:O,onChange:e=>M(e.target.value),onKeyDown:e=>{"Enter"===e.key&&V(O)},placeholder:"Add custom tag…",className:"flex-1 bg-blue-800 text-white placeholder-blue-400 border border-blue-600 rounded-lg px-3 py-2 text-sm"}),(0,a.jsx)("button",{onClick:()=>V(O),className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-2 rounded-lg text-sm font-bold",children:"Add"})]}),U.length>0&&O.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:U.slice(0,8).map(e=>(0,a.jsx)("button",{onClick:()=>V(e),className:"bg-blue-800 hover:bg-blue-700 text-blue-200 text-xs px-2 py-1 rounded",children:w.has(e)?k(e):e},e))}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:()=>W(!C,A),className:"flex items-center gap-1 text-sm px-3 py-2 rounded-lg font-bold transition-colors ".concat(C?"bg-yellow-500 text-blue-950":"bg-blue-800 text-blue-200 hover:bg-blue-700"),children:["\uD83D\uDEA9 ",C?"Flagged":"Flag"]}),(0,a.jsxs)("button",{onClick:()=>W(C,!A),className:"flex items-center gap-1 text-sm px-3 py-2 rounded-lg font-bold transition-colors ".concat(A?"bg-gray-400 text-blue-950":"bg-blue-800 text-blue-200 hover:bg-blue-700"),children:["\uD83C\uDFAC ",A?"Media Flagged":"Media Flag"]}),(0,a.jsxs)("button",{onClick:B,disabled:L||!(0,j.oW)(),className:"flex items-center gap-1 text-sm px-3 py-2 rounded-lg font-bold transition-colors bg-emerald-700 text-white hover:bg-emerald-600 disabled:opacity-60",children:["\uD83D\uDCBE ",L?"Pushing…":(0,j.oW)()?"Push Tags to GitHub":"Connect GitHub in Creator"]})]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3 justify-center",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:o,disabled:m&&m.length>0&&null==p,className:"bg-green-600 hover:bg-green-500 px-8 py-3 rounded-xl font-bold text-xl",children:"✓ Correct"}),(0,a.jsx)("button",{onClick:s,disabled:m&&m.length>0&&null==p,className:"bg-red-600 hover:bg-red-500 px-8 py-3 rounded-xl font-bold text-xl",children:"✗ Wrong"}),(0,a.jsx)("button",{onClick:r,className:"bg-gray-600 hover:bg-gray-500 px-8 py-3 rounded-xl font-bold text-xl",children:"Skip"}),(0,a.jsx)("button",{onClick:()=>S(e=>!e),className:"bg-blue-700 hover:bg-blue-600 text-white px-4 py-3 rounded-xl font-bold text-sm",children:"\uD83C\uDFF7️ Tags"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>x(!0),className:"bg-yellow-400 text-blue-950 px-8 py-3 rounded-xl font-bold text-xl",children:"Show Answer"}),(0,a.jsx)("button",{onClick:()=>S(e=>!e),className:"bg-blue-700 hover:bg-blue-600 text-white px-4 py-3 rounded-xl font-bold text-sm",children:"\uD83C\uDFF7️ Tags"})]})})]})}let S=[200,400,600,800,1e3],C=[400,800,1200,1600,2e3],I=[600,1200,1800,2400,3e3];function A(e){var t,l,a,n;let o=(null!=(t=e.categories)?t:[]).map(e=>{var t,l,a,n,o;return{id:String(null!=(t=e.id)?t:Math.random()),name:String(null!=(l=e.name)?l:""),round:String(null!=(a=e.round)?a:"single"),position:Number(null!=(n=e.position)?n:0),clues:(null!=(o=e.clues)?o:[]).map((t,l)=>{var a,n,o,s,r,i,c,d;return{id:String(null!=(n=null!=(a=t.id)?a:t.clueId)?n:Math.random()),clueId:String(null!=(o=t.clueId)?o:""),question:String(null!=(s=t.question)?s:""),answer:String(null!=(r=t.answer)?r:""),value:null!=t.value?Number(t.value):null,dailyDouble:!!t.dailyDouble,tripleStumper:!!t.tripleStumper,isFinalJeopardy:"final"===String(e.round),category:String(null!=(i=e.name)?i:""),round:String(null!=(c=e.round)?c:"single"),rowIndex:Number(null!=(d=t.rowIndex)?d:l)}})}});return{id:String(null!=(l=e.id)?l:Math.random()),gameId:null!=e.gameId?Number(e.gameId):void 0,showNumber:Number(null!=(a=e.showNumber)?a:0),airDate:String(null!=(n=e.airDate)?n:""),season:null!=e.season?Number(e.season):null,isSpecial:!!e.isSpecial,tournamentType:null!=e.tournamentType?String(e.tournamentType):null,categories:o}}function D(e){if(null!=e.season)return e.season;let t=new Date(e.airDate);if(Number.isNaN(t.getTime()))return null;let l=t.getUTCFullYear()-1984+ +(t.getUTCMonth()>=8);return l>0?l:null}async function T(e,t){let l=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!l.ok)throw Error((await l.json().catch(()=>({}))).error||"Request failed");return l.json().catch(()=>({}))}function F(){let[e,t]=(0,n.useState)(!0),[l,o]=(0,n.useState)("api"),[r,i]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[m,h]=(0,n.useState)([]),[x,y]=(0,n.useState)(!1),[f,w]=(0,n.useState)({loaded:0,total:0}),[v,k]=(0,n.useState)("competition"),[j,F]=(0,n.useState)("replay"),[O,M]=(0,n.useState)(!1),[G,E]=(0,n.useState)(null),[J,P]=(0,n.useState)(null),[L,q]=(0,n.useState)("single"),[z,H]=(0,n.useState)({}),[W,R]=(0,n.useState)(null),[V,K]=(0,n.useState)(null),[B,U]=(0,n.useState)(!1),Q=(0,n.useRef)(new Set),[$,_]=(0,n.useState)(0),[Y,X]=(0,n.useState)("Team 1, Team 2"),[Z,ee]=(0,n.useState)([]),[et,el]=(0,n.useState)(0),[ea,en]=(0,n.useState)(!1),[eo,es]=(0,n.useState)(6),[er,ei]=(0,n.useState)(!0),[ec,ed]=(0,n.useState)(!1),[eu,em]=(0,n.useState)(!0),[ep,eb]=(0,n.useState)(""),[eg,eh]=(0,n.useState)({}),[ex,ey]=(0,n.useState)(!1),[ef,ew]=(0,n.useState)([]),[ev,ek]=(0,n.useState)(!0),[ej,eN]=(0,n.useState)([]),[eS,eC]=(0,n.useState)(null),[eI,eA]=(0,n.useState)(null),[eD,eT]=(0,n.useState)((0,g.vO)()),[eF,eO]=(0,n.useState)(null);async function eM(){if(m.length>0)return m;if("api"===l){let e=r.map(e=>{var t;return{gameId:null!=(t=e.gameId)?t:0,showNumber:e.showNumber,airDate:e.airDate,season:e.season,isSpecial:e.isSpecial,tournamentType:e.tournamentType,categories:e.categories.map(e=>({name:e.name,round:"triple"===e.round?"double":e.round,position:e.position,clues:e.clues}))}});return h(e),e}y(!0),w({loaded:0,total:d.length});let e="/triviaparty",t=[];for(let l=0;l<d.length;l+=12){let a=d.slice(l,l+12),n=await Promise.all(a.map(async t=>{let l=await fetch("".concat(e,"/data/jeopardy/").concat(t.file));return await l.json()}));t.push(...n),w(e=>({...e,loaded:Math.min(d.length,e.loaded+n.length)}))}return h(t),y(!1),t}function eG(){let e=Y.split(",").map(e=>e.trim()).filter(Boolean).slice(0,8);return e.length?e.map(e=>({name:e,score:0})):[{name:"Team 1",score:0},{name:"Team 2",score:0}]}function eE(e,t){let l=e.categories.filter(e=>e.round===t),a="double"===t?C:"triple"===t?I:"final"===t?[0]:S,n={};l.forEach(e=>{n[e.id]={},e.clues.forEach((l,o)=>{var s;let r="final"===t?0:null!=(s=a[o])?s:(o+1)*200;n[e.id][r]={revealed:!1,clue:l}})}),H(n),q(t),R(null)}async function eJ(e){let t=e;if("files-index"===l&&0===e.categories.length&&e.sourceFile){var a,n;let l=await fetch("".concat("/triviaparty","/data/jeopardy/").concat(e.sourceFile));a=await l.json(),n=e.sourceFile,t={id:String(a.gameId),gameId:a.gameId,showNumber:a.showNumber,airDate:a.airDate,season:a.season,isSpecial:a.isSpecial,tournamentType:a.tournamentType,sourceFile:n,categories:a.categories.map((e,t)=>({id:"".concat(a.gameId,"-").concat(e.round,"-").concat(t),name:e.name,round:e.round,position:e.position,clues:e.clues.map((e,l)=>({...e,id:e.clueId||"".concat(a.gameId,"-").concat(t,"-").concat(l)}))}))}}if(!t.categories.length)return;E(t),P("replay"),_(0),ee("competition"===v?eG():[]),el(0),U(!1),Q.current=new Set;let o="replay:".concat(t.showNumber||t.id);K(o);let s=t.categories.reduce((e,t)=>e+t.clues.length,0);(0,g.P6)({episodeKey:o,showNumber:t.showNumber||null,mode:v,totalClues:s}),eO((0,g.rW)(o)),eE(t,"single")}(0,n.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("method");e&&["replay","random","custom","learn"].includes(e)&&F(e)},[]),(0,n.useEffect)(()=>{(async()=>{try{var e,t;let l=await fetch("/api/auth/me");if(!l.ok)return;let a=await l.json();eC(null!=(e=a.user)?e:null),eA(null!=(t=a.stats)?t:null)}catch(e){}})()},[]),(0,n.useEffect)(()=>{eT((0,g.vO)())},[]),(0,n.useEffect)(()=>{!async function(){var e;let l="/triviaparty";if(!l)try{let l=await fetch("/api/jeopardy?limit=300"),a=(null!=(e=(await l.json()).games)?e:[]).map(A);if(a.length>0){i(a),o("api"),t(!1);return}}catch(e){}try{let e=await fetch("".concat(l,"/data/jeopardy/index.json")),a=await e.json();if(a.length>0){u(a),i(a.map(e=>({id:String(e.gameId),gameId:e.gameId,showNumber:e.showNumber,airDate:e.airDate,season:e.season,isSpecial:e.isSpecial,tournamentType:e.tournamentType,sourceFile:e.file,categories:[]}))),o("files-index"),t(!1);return}}catch(e){}o("empty"),t(!1)}()},[]);let eP=(0,n.useMemo)(()=>Array.from(new Set(r.filter(e=>e.isSpecial).map(e=>e.tournamentType||"Other Special"))).sort(),[r]);function eL(){return r.filter(e=>{let t=D(e);if(ef.length>0&&(null==t||!ef.includes(t)))return!1;if(e.isSpecial){let t=e.tournamentType||"Other Special";if(ej.length>0&&!ej.includes(t))return!1;if(!ev&&0===ej.length)return!0}return!!e.isSpecial||!!ev})}async function eq(){let e=eL();if(!e.length)return void alert("No episodes match your replay filters.");let t=Math.floor(Math.random()*e.length);await eJ(e[t])}async function ez(){if(!(null==G?void 0:G.showNumber))return;let e=[...eL()].sort((e,t)=>e.showNumber-t.showNumber),t=e.findIndex(e=>e.showNumber===G.showNumber);t>=0&&t<e.length-1?await eJ(e[t+1]):alert("No next episode in current filter.")}async function eH(){let e=await eM();if(!e.length)return;let t=[],l=b(e,eo,5,"single").map((e,t)=>({id:"rnd-s-".concat(t),name:e.name,round:"single",position:t,clues:e.clues.map((e,l)=>({...e,id:e.clueId||"rnd-s-".concat(t,"-").concat(l)}))}));if(t.push(...l),er){let l=b(e,eo,5,"double").map((e,t)=>({id:"rnd-d-".concat(t),name:e.name,round:"double",position:t,clues:e.clues.map((e,l)=>({...e,id:e.clueId||"rnd-d-".concat(t,"-").concat(l)}))}));t.push(...l)}if(ec){let l=b(e,eo,5,"double").map((e,t)=>({id:"rnd-t-".concat(t),name:e.name,round:"triple",position:t,clues:e.clues.map((e,l)=>({...e,id:e.clueId||"rnd-t-".concat(t,"-").concat(l)}))}));t.push(...l)}if(eu){let l=e.flatMap(e=>e.categories).filter(e=>"final"===e.round).flatMap(e=>e.clues);if(l.length>0){let e=l[Math.floor(Math.random()*l.length)];t.push({id:"rnd-final-0",name:e.category||"Final Jeopardy",round:"final",position:0,clues:[{...e,id:e.clueId||"rnd-final-clue"}]})}}let a={id:"random-".concat(Date.now()),showNumber:0,airDate:"",season:null,isSpecial:!1,tournamentType:null,categories:t};E(a),P("random"),_(0),ee("competition"===v?eG():[]),el(0),U(!1),Q.current=new Set;let n="random:".concat(Date.now());K(n);let o=a.categories.reduce((e,t)=>e+t.clues.length,0);(0,g.P6)({episodeKey:n,showNumber:null,mode:v,totalClues:o}),eO((0,g.rW)(n)),eE(a,"single")}async function eW(){ey(!0);let e={...eg,search:ep||void 0};try{let t=await p("/triviaparty",e,300),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,a=new Map;for(let t of e){let e=t.clue.category;a.has(e)||a.set(e,[]),a.get(e).push(t.clue)}return[...a.entries()].filter(e=>{let[,t]=e;return t.length>=1}).sort(()=>Math.random()-.5).slice(0,t).map((e,t)=>{let[a,n]=e;return{name:a,round:n[0].round,position:t,clues:[...n].sort(()=>Math.random()-.5).slice(0,l)}})}(t,eo,5);if(!l.length){alert("No clues matched your custom filters."),ey(!1);return}let a={id:"custom-".concat(Date.now()),showNumber:0,airDate:"",season:null,isSpecial:!1,tournamentType:null,categories:l.map((e,t)=>({id:"custom-".concat(t),name:e.name,round:e.round,position:e.position,clues:e.clues.map((e,l)=>({...e,id:e.clueId||"custom-".concat(t,"-").concat(l)}))}))};E(a),P("custom"),_(0),ee("competition"===v?eG():[]),el(0),U(!1),Q.current=new Set;let n="custom:".concat(Date.now());K(n);let o=a.categories.reduce((e,t)=>e+t.clues.length,0);(0,g.P6)({episodeKey:n,showNumber:null,mode:v,totalClues:o}),eO((0,g.rW)(n)),eE(a,"single")}catch(e){alert("Error building custom game.")}ey(!1)}async function eR(){try{let e=(0,g.Ak)();if(!e.length)return void alert("No missed clues yet. Miss or skip clues first, then come back to Learn mode.");let t=new Map;e.forEach(e=>{t.has(e.category)||t.set(e.category,[]),t.get(e.category).push({id:e.clueId,clueId:e.clueId,question:e.question,answer:e.answer,value:e.value,dailyDouble:e.dailyDouble,tripleStumper:e.tripleStumper,isFinalJeopardy:e.isFinalJeopardy,category:e.category,round:"single",rowIndex:0})});let l=[...t.entries()].slice(0,eo).map((e,t)=>{let[l,a]=e;return{id:"learn-".concat(t),name:l,round:"single",position:t,clues:a.slice(0,5).map((e,t)=>({...e,rowIndex:t}))}}),a={id:"learn-".concat(Date.now()),showNumber:0,airDate:"",season:null,isSpecial:!1,tournamentType:null,categories:l};E(a),P("learn"),_(0),ee([]),U(!1),Q.current=new Set;let n="learn:".concat(Date.now());K(n);let o=a.categories.reduce((e,t)=>e+t.clues.length,0);(0,g.P6)({episodeKey:n,showNumber:null,mode:"learn",totalClues:o}),eO((0,g.rW)(n)),eE(a,"single")}catch(e){alert("Could not load your Learn clues.")}}function eV(){if(!W||(H(e=>({...e,[W.catId]:{...e[W.catId],[W.boardValue]:{...e[W.catId][W.boardValue],revealed:!0}}})),R(null),!G))return;let e=G.categories.reduce((e,t)=>e+t.clues.length,0);Q.current.add(W.clue.id),Q.current.size>=e&&(V&&((0,g.km)(V),eO((0,g.rW)(V)),eT((0,g.vO)())),U(!0))}function eK(e,t){if("competition"===v){let l=null!=t?t:et;ee(t=>t.map((t,a)=>a===l?{...t,score:t.score+e}:t));return}_(t=>t+e)}async function eB(e){if(W&&(V&&((0,g.zK)({episodeKey:V,outcome:e,clue:W.clue}),eO((0,g.rW)(V)),eT((0,g.vO)())),eS))try{await T("/api/user/progress",{outcome:e,clue:{clueId:W.clue.clueId,question:W.clue.question,answer:W.clue.answer,value:W.clue.value,dailyDouble:W.clue.dailyDouble,tripleStumper:W.clue.tripleStumper,isFinalJeopardy:W.clue.isFinalJeopardy,category:W.clue.category,round:W.clue.round}});let l=await fetch("/api/auth/me");if(l.ok){var t;let e=await l.json();eA(null!=(t=e.stats)?t:null)}}catch(e){}}async function eU(){if(!W)return;let e=W.respondentTeamIndex;await eB("correct"),eK(W.scoreValue,e),"competition"===v&&null!=e&&el(e),eV()}async function eQ(){if(!W)return;let e=W.respondentTeamIndex;await eB("incorrect"),eK(-W.scoreValue,e),eV()}async function e$(){await eB("skip"),eV()}async function e_(){if(eS)try{var e,t;await T("/api/user/game-complete",{endMoney:"competition"===v?0:$,showNumber:null!=(e=null==G?void 0:G.showNumber)?e:null});let l=await fetch("/api/auth/me");if(l.ok){let e=await l.json();eA(null!=(t=e.stats)?t:null)}}catch(e){}E(null),P(null),R(null),U(!1),K(null),eO(null),Q.current=new Set}if(e)return(0,a.jsx)("div",{className:"min-h-screen bg-blue-950 flex items-center justify-center text-white text-2xl",children:"Loading…"});if(G){var eY,eX,eZ;let e=G.categories.some(e=>"double"===e.round),t=G.categories.some(e=>"triple"===e.round),l=G.categories.some(e=>"final"===e.round);return(0,a.jsxs)("div",{className:"min-h-screen bg-blue-950 text-white p-4",children:[B&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 bg-blue-950/95 flex items-center justify-center p-6",children:[(0,a.jsx)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:Array.from({length:60}).map((e,t)=>(0,a.jsx)("span",{className:"absolute text-2xl animate-bounce",style:{left:"".concat(17*t%100,"%"),top:"".concat(13*t%100,"%"),animationDelay:"".concat(t%10*.1,"s")},children:"\uD83C\uDF89"},t))}),(0,a.jsxs)("div",{className:"relative bg-blue-900 border border-blue-700 rounded-2xl p-8 w-full max-w-2xl text-center",children:[(0,a.jsx)("h2",{className:"text-4xl font-bold text-yellow-300 mb-3",children:"Game Complete!"}),"competition"===v?(0,a.jsxs)("p",{className:"text-xl mb-4",children:["\uD83C\uDFC6 Winner: ",(0,a.jsx)("span",{className:"font-bold text-yellow-300",children:"competition"!==v||0===Z.length?null:null!=(eZ=null==(eX=[...Z].sort((e,t)=>t.score-e.score)[0])?void 0:eX.name)?eZ:null})]}):(0,a.jsxs)("p",{className:"text-xl mb-4",children:["Final score: ",(0,a.jsxs)("span",{className:"font-bold text-yellow-300",children:["$",$.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:["replay"===J&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:ez,className:"bg-yellow-400 text-blue-950 px-4 py-3 rounded-xl font-bold",children:"Replay next episode"}),(0,a.jsx)("button",{onClick:eq,className:"bg-yellow-400 text-blue-950 px-4 py-3 rounded-xl font-bold",children:"Replay random episode"}),(0,a.jsx)("button",{onClick:()=>{U(!1),E(null),P(null)},className:"bg-blue-700 px-4 py-3 rounded-xl font-bold",children:"Choose episode"}),(0,a.jsx)(s(),{href:"/",className:"bg-blue-700 px-4 py-3 rounded-xl font-bold",children:"Main Menu"})]}),"replay"!==J&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{U(!1),"random"===J&&eH(),"custom"===J&&eW(),"learn"===J&&eR()},className:"bg-yellow-400 text-blue-950 px-4 py-3 rounded-xl font-bold",children:"random"===J?"Create new episode":"Play again"}),(0,a.jsx)(s(),{href:"/",className:"bg-blue-700 px-4 py-3 rounded-xl font-bold",children:"Main Menu"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4 gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:e_,className:"text-yellow-400 hover:underline",children:"← Back"}),(0,a.jsx)(s(),{href:"/",className:"text-blue-300 hover:text-blue-200 font-bold",children:"Main Menu"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-yellow-400",children:G.showNumber?"Show #".concat(G.showNumber):"Jeopardy"}),(0,a.jsxs)("div",{className:"text-sm text-gray-300",children:["competition"===v?"Competition":"Practice"," mode"]})]}),"competition"===v?(0,a.jsx)("div",{className:"text-right",children:Z.map((e,t)=>(0,a.jsxs)("div",{className:"text-sm ".concat(t===et?"text-yellow-300 font-bold":"text-white"),children:[e.name,": $",e.score.toLocaleString()]},"".concat(e.name,"-").concat(t)))}):(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",$.toLocaleString()]}),eF&&(0,a.jsxs)("div",{className:"text-xs text-blue-200",children:["Episode C/W/S: ",eF.correctAnswers,"/",eF.incorrectAnswers,"/",eF.skippedQuestions]}),(0,a.jsxs)("div",{className:"text-xs text-blue-300",children:["Overall C/W/S: ",eD.correctAnswers,"/",eD.incorrectAnswers,"/",eD.skippedQuestions]})]})]}),(0,a.jsxs)("div",{className:"mb-3 flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>M(e=>!e),className:"px-3 py-2 rounded-lg bg-blue-800 hover:bg-blue-700 text-sm font-bold",children:"Settings"}),"competition"===v&&Z[et]&&(0,a.jsxs)("div",{className:"text-sm text-blue-200 py-2",children:["Category control: ",(0,a.jsx)("span",{className:"text-yellow-300 font-bold",children:Z[et].name})]})]}),O&&(0,a.jsx)("div",{className:"max-w-3xl bg-blue-900 rounded-xl p-3 mb-4",children:(0,a.jsxs)("label",{className:"text-sm text-blue-200 flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:ea,onChange:e=>en(e.target.checked)}),"Triple stumper as blue"]})}),"competition"===v&&Z.length>0&&(0,a.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[(0,a.jsx)("label",{className:"text-sm text-blue-300",children:"Category chooser:"}),(0,a.jsx)("select",{value:et,onChange:e=>el(Number(e.target.value)),className:"bg-blue-800 border border-blue-600 rounded px-2 py-1 text-sm",children:Z.map((e,t)=>(0,a.jsx)("option",{value:t,children:e.name},"".concat(e.name,"-").concat(t)))})]}),(0,a.jsxs)("div",{className:"flex gap-2 mb-4 flex-wrap",children:[(0,a.jsx)("button",{onClick:()=>eE(G,"single"),className:"px-4 py-2 rounded-lg font-bold ".concat("single"===L?"bg-yellow-400 text-blue-950":"bg-blue-800"),children:"Jeopardy!"}),e&&(0,a.jsx)("button",{onClick:()=>eE(G,"double"),className:"px-4 py-2 rounded-lg font-bold ".concat("double"===L?"bg-yellow-400 text-blue-950":"bg-blue-800"),children:"Double Jeopardy!"}),t&&(0,a.jsx)("button",{onClick:()=>eE(G,"triple"),className:"px-4 py-2 rounded-lg font-bold ".concat("triple"===L?"bg-yellow-400 text-blue-950":"bg-blue-800"),children:"Triple Jeopardy!"}),l&&(0,a.jsx)("button",{onClick:()=>eE(G,"final"),className:"px-4 py-2 rounded-lg font-bold ".concat("final"===L?"bg-yellow-400 text-blue-950":"bg-blue-800"),children:"Final Jeopardy"})]}),W&&(0,a.jsx)(N,{clue:W.clue,value:W.scoreValue,onCorrect:eU,onIncorrect:eQ,onSkip:e$,respondentLabel:"competition"===v&&null!=W.respondentTeamIndex?null==(eY=Z[W.respondentTeamIndex])?void 0:eY.name:void 0,teamOptions:"competition"===v?Z.map(e=>e.name):void 0,respondentIndex:W.respondentTeamIndex,onRespondentChange:e=>R(t=>t?{...t,respondentTeamIndex:e}:t),lockRespondent:W.respondentLocked}),function(){if(!G)return null;let e=G.categories.filter(e=>e.round===L);return(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:e.map(e=>(0,a.jsx)("th",{className:"bg-blue-800 p-3 text-center text-sm font-bold uppercase border border-blue-900",children:e.name},e.id))})}),(0,a.jsx)("tbody",{children:("double"===L?C:"triple"===L?I:"final"===L?[0]:S).map(t=>(0,a.jsx)("tr",{children:e.map(e=>{var l;let n=null==(l=z[e.id])?void 0:l[t];if(!n)return(0,a.jsx)("td",{className:"border border-blue-900 p-1",children:(0,a.jsx)("div",{className:"w-full h-16 bg-blue-900 rounded"})},e.id);let o=n.clue.clueId?c(n.clue.clueId):null,s=ea?"bg-blue-700 hover:bg-blue-600 text-yellow-400":"bg-orange-800 hover:bg-orange-700 text-yellow-400";return(0,a.jsx)("td",{className:"border border-blue-900 p-1",children:n.revealed?(0,a.jsx)("div",{className:"w-full h-16 bg-blue-900 rounded"}):(0,a.jsxs)("button",{onClick:()=>(function(e,t,l){let a=l,n=null,o=!1;if(e.dailyDouble&&"final"!==L){var s,r;let e=null!=(r=null==(s=Z[et])?void 0:s.name)?r:"Chooser",t=window.prompt("Daily Double! ".concat(e,", enter wager:"),String(Math.max(200,l))),i=t?Number(t.replace(/[^\d]/g,"")):NaN;!Number.isNaN(i)&&i>0&&(a=i),"competition"===v&&(n=et,o=!0)}R({clue:e,catId:t,boardValue:l,scoreValue:a,respondentTeamIndex:n,respondentLocked:o})})(n.clue,e.id,t),className:"w-full h-16 font-bold text-xl rounded transition-colors relative ".concat(n.clue.tripleStumper?s:"bg-blue-700 hover:bg-blue-600 text-yellow-400"),children:["final"===L?"FINAL":"$".concat(t),((null==o?void 0:o.flagged)||(null==o?void 0:o.mediaFlag))&&(0,a.jsxs)("span",{className:"absolute top-1 right-1 text-xs",children:[o.flagged?"\uD83D\uDEA9":"",o.mediaFlag?"\uD83C\uDFAC":""]})]})},e.id)})},t))})]})})}()]})}return(0,a.jsxs)("div",{className:"min-h-screen bg-blue-950 text-white p-8",children:[(0,a.jsx)("div",{className:"max-w-5xl mx-auto mb-3",children:(0,a.jsx)(s(),{href:"/",className:"text-blue-300 hover:text-blue-200 font-bold",children:"← Main Menu"})}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-yellow-400 mb-2 text-center",children:"Jeopardy!"}),(0,a.jsx)("div",{className:"max-w-5xl mx-auto bg-blue-900 rounded-xl p-4 mb-5 text-sm",children:eS?(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-3 items-center",children:[(0,a.jsxs)("div",{children:["Signed in as ",(0,a.jsx)("span",{className:"text-yellow-300 font-bold",children:eS.username})]}),eI&&(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-blue-200 text-xs md:text-sm",children:[(0,a.jsxs)("div",{children:["Games: ",eI.gamesPlayed]}),(0,a.jsxs)("div",{children:["Avg $: ",eI.averageEndMoney]}),(0,a.jsxs)("div",{children:["Episodes: ",eI.episodesCompleted]})]})]}):(0,a.jsx)("div",{className:"text-blue-200",children:"Sign in on the home page to sync stats and Learn mode across devices."})}),(0,a.jsx)("div",{className:"flex justify-center gap-2 mb-4",children:["competition","practice"].map(e=>(0,a.jsx)("button",{onClick:()=>k(e),className:"px-5 py-2 rounded-lg font-bold capitalize ".concat(v===e?"bg-yellow-400 text-blue-950":"bg-blue-800 hover:bg-blue-700"),children:e},e))}),"competition"===v&&(0,a.jsxs)("div",{className:"max-w-3xl mx-auto bg-blue-900 rounded-xl p-4 mb-5",children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-blue-300 mb-1",children:"Players/teams (comma separated)"}),(0,a.jsx)("input",{value:Y,onChange:e=>X(e.target.value),className:"w-full bg-blue-800 border border-blue-600 rounded px-3 py-2",placeholder:"Team 1, Team 2"})]}),(0,a.jsxs)("div",{className:"max-w-5xl mx-auto flex items-center justify-center gap-2 mb-5 flex-wrap",children:[["replay","random","custom","learn"].map(e=>(0,a.jsx)("button",{onClick:()=>F(e),className:"px-4 py-2 rounded-lg font-bold capitalize ".concat(j===e?"bg-yellow-400 text-blue-950":"bg-blue-800 hover:bg-blue-700"),children:e},e)),(0,a.jsx)("button",{onClick:()=>M(e=>!e),className:"px-4 py-2 rounded-lg font-bold bg-blue-800 hover:bg-blue-700",children:"Settings"})]}),O&&(0,a.jsx)("div",{className:"max-w-3xl mx-auto bg-blue-900 rounded-xl p-4 mb-5",children:(0,a.jsxs)("label",{className:"text-sm text-blue-200 flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:ea,onChange:e=>en(e.target.checked)}),"Triple stumper as blue"]})}),"replay"===j&&(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-4",children:[(0,a.jsxs)("div",{className:"bg-blue-900 rounded-xl p-4",children:[(0,a.jsx)("div",{className:"text-sm text-blue-200 mb-2",children:"Seasons"}),(0,a.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,a.jsx)("button",{onClick:()=>ew(Array.from({length:42},(e,t)=>t+1)),className:"px-3 py-1 rounded text-xs font-bold bg-blue-800 hover:bg-blue-700",children:"All"}),(0,a.jsx)("button",{onClick:()=>ew([]),className:"px-3 py-1 rounded text-xs font-bold bg-blue-800 hover:bg-blue-700",children:"None"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:Array.from({length:42}).map((e,t)=>{let l=t+1,n=ef.includes(l);return(0,a.jsx)("button",{onClick:()=>{ew(e=>e.includes(l)?e.filter(e=>e!==l):[...e,l].sort((e,t)=>e-t))},className:"px-2 py-1 rounded text-xs font-bold ".concat(n?"bg-yellow-400 text-blue-950":"bg-blue-800 hover:bg-blue-700"),children:l},l)})}),(0,a.jsx)("div",{className:"text-sm text-blue-200 mb-2",children:"Episode type"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:ev,onChange:e=>ek(e.target.checked)}),"Regular episodes"]}),eP.map(e=>(0,a.jsx)("button",{onClick:()=>{eN(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:"px-3 py-1 rounded text-xs font-bold ".concat(ej.includes(e)?"bg-yellow-400 text-blue-950":"bg-blue-800 hover:bg-blue-700"),children:e},e))]}),(0,a.jsx)("button",{onClick:eq,className:"bg-yellow-400 text-blue-950 font-bold rounded px-4 py-2",children:"Random replay episode"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:eL().map(e=>(0,a.jsxs)("button",{onClick:()=>eJ(e),className:"bg-blue-800 hover:bg-blue-700 rounded-xl p-6 text-left",children:[(0,a.jsxs)("div",{className:"text-xl font-bold",children:["Show #",e.showNumber]}),(0,a.jsx)("div",{className:"text-sm text-blue-300",children:e.airDate}),D(e)&&(0,a.jsxs)("div",{className:"text-sm text-blue-300",children:["Season ",D(e)]}),e.isSpecial&&(0,a.jsx)("div",{className:"text-xs mt-1 text-yellow-300",children:e.tournamentType||"Other Special"})]},e.id))})]}),"random"===j&&(0,a.jsxs)("div",{className:"max-w-xl mx-auto bg-blue-900 rounded-xl p-6 space-y-3",children:[(0,a.jsx)("label",{className:"block text-sm text-blue-300",children:"Number of categories"}),(0,a.jsx)("input",{type:"number",min:2,max:8,value:eo,onChange:e=>es(Math.max(2,Math.min(8,Number(e.target.value)||6))),className:"w-full bg-blue-800 border border-blue-600 rounded px-3 py-2"}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:er,onChange:e=>ei(e.target.checked)})," Enable Double Jeopardy"]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:ec,onChange:e=>ed(e.target.checked)})," Enable Triple Jeopardy (third board)"]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:eu,onChange:e=>em(e.target.checked)})," Add Final Jeopardy"]}),(0,a.jsx)("button",{onClick:eH,disabled:x,className:"w-full bg-yellow-400 text-blue-950 font-bold py-3 rounded-xl disabled:opacity-60",children:x?"Loading clue library… ".concat(f.loaded,"/").concat(f.total):"Build Random Game"})]}),"custom"===j&&(0,a.jsxs)("div",{className:"max-w-2xl mx-auto bg-blue-900 rounded-xl p-6 space-y-4",children:[(0,a.jsx)("input",{type:"text",value:ep,onChange:e=>eb(e.target.value),placeholder:"Search clues, answers, categories",className:"w-full bg-blue-800 border border-blue-600 rounded px-3 py-2"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-3",children:[(0,a.jsxs)("label",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:!!eg.dailyDoublesOnly,onChange:e=>eh(t=>({...t,dailyDoublesOnly:e.target.checked||void 0}))})," Daily Doubles only"]}),(0,a.jsxs)("label",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:!!eg.tripleStumpersOnly,onChange:e=>eh(t=>({...t,tripleStumpersOnly:e.target.checked||void 0}))})," Triple stumpers only"]}),(0,a.jsxs)("label",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:!!eg.finalOnly,onChange:e=>eh(t=>({...t,finalOnly:e.target.checked||void 0}))})," Final only"]}),(0,a.jsxs)("label",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:!!eg.flaggedOnly,onChange:e=>eh(t=>({...t,flaggedOnly:e.target.checked||void 0}))})," Flagged only"]})]}),(0,a.jsx)("button",{onClick:eW,disabled:ex,className:"w-full bg-yellow-400 text-blue-950 font-bold py-3 rounded-xl disabled:opacity-60",children:ex?"Building…":"Build Custom Game"})]}),"learn"===j&&(0,a.jsxs)("div",{className:"max-w-xl mx-auto text-center bg-blue-900 rounded-xl p-6",children:[(0,a.jsx)("p",{className:"text-blue-200 mb-4",children:"Study your missed and skipped clues from your local tracker history."}),(0,a.jsx)("button",{onClick:eR,className:"bg-yellow-400 text-blue-950 px-8 py-3 rounded-xl font-bold",children:"Start Learn Game"})]}),"empty"===l&&(0,a.jsx)("p",{className:"text-center mt-6 text-blue-300",children:"No Jeopardy data loaded yet."})]})}},9074:(e,t,l)=>{"use strict";l.d(t,{Ak:()=>h,P6:()=>p,PT:()=>u,km:()=>g,rW:()=>m,vO:()=>i,zK:()=>b});let a="triviaparty:local:overall",n="triviaparty:local:episodes",o="triviaparty:local:clues";function s(e,t){try{let l=window.localStorage.getItem(e);return l?JSON.parse(l):t}catch(e){return t}}function r(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function i(){return s(a,{gamesPlayed:0,episodesCompleted:0,correctAnswers:0,incorrectAnswers:0,skippedQuestions:0,updatedAt:new Date(0).toISOString()})}function c(e){r(a,{...e,updatedAt:new Date().toISOString()})}function d(){return s(n,{})}function u(){return Object.values(d()).sort((e,t)=>e.completedAt&&t.completedAt?t.completedAt.localeCompare(e.completedAt):t.startedAt.localeCompare(e.startedAt))}function m(e){var t;return null!=(t=d()[e])?t:null}function p(e){let t=d();t[e.episodeKey]||(t[e.episodeKey]={episodeKey:e.episodeKey,showNumber:e.showNumber,mode:e.mode,totalClues:e.totalClues,answeredClues:0,correctAnswers:0,incorrectAnswers:0,skippedQuestions:0,completed:!1,startedAt:new Date().toISOString(),completedAt:null},r(n,t))}function b(e){let t=d(),l=t[e.episodeKey];if(!l)return;l.answeredClues+=1,"correct"===e.outcome&&(l.correctAnswers+=1),"incorrect"===e.outcome&&(l.incorrectAnswers+=1),"skip"===e.outcome&&(l.skippedQuestions+=1),t[e.episodeKey]=l,r(n,t);let a=i();if("correct"===e.outcome&&(a.correctAnswers+=1),"incorrect"===e.outcome&&(a.incorrectAnswers+=1),"skip"===e.outcome&&(a.skippedQuestions+=1),c(a),e.clue.clueId){var u;let t=s(o,{}),l=t[e.clue.clueId];t[e.clue.clueId]={clueId:e.clue.clueId,question:e.clue.question,answer:e.clue.answer,category:e.clue.category,round:e.clue.round,value:e.clue.value,dailyDouble:e.clue.dailyDouble,tripleStumper:e.clue.tripleStumper,isFinalJeopardy:e.clue.isFinalJeopardy,outcomes:[...null!=(u=null==l?void 0:l.outcomes)?u:[],e.outcome].slice(-50),lastOutcome:e.outcome,updatedAt:new Date().toISOString()},r(o,t)}}function g(e){let t=d(),l=t[e];if(!l||l.completed)return;l.completed=!0,l.completedAt=new Date().toISOString(),t[e]=l,r(n,t);let a=i();a.gamesPlayed+=1,a.episodesCompleted+=1,c(a)}function h(){return Object.values(s(o,{})).filter(e=>"incorrect"===e.lastOutcome||"skip"===e.lastOutcome).sort((e,t)=>t.updatedAt.localeCompare(e.updatedAt))}},9693:(e,t,l)=>{Promise.resolve().then(l.bind(l,8189))}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=9693)),_N_E=e.O()}]);