(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{324:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var a=s(5155),n=s(2115);async function l(e,t){let s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await s.json().catch(()=>({}));if(!s.ok)throw Error(a.error||"Request failed");return a}function r(){let e=window.location.hostname.endsWith("github.io"),[t,s]=(0,n.useState)("signin"),[r,i]=(0,n.useState)(!1),[d,o]=(0,n.useState)(null),[c,u]=(0,n.useState)(null),[g,x]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),[m,b]=(0,n.useState)(""),[y,v]=(0,n.useState)("");async function f(){if(e)return void x("Account sign-in requires a server deployment (e.g. Vercel). GitHub Pages is static only.");x(""),i(!0);try{var s,a,n;if("signin"===t){let e=await l("/api/auth/login",{email:h,password:m});o(e.user),u(null!=(s=e.stats)?s:null)}else{await l("/api/auth/signup",{email:h,password:m,username:y});let e=await fetch("/api/auth/me"),t=await e.json();o(null!=(a=t.user)?a:null),u(null!=(n=t.stats)?n:null)}b("")}catch(e){x(e instanceof Error?e.message:"Authentication failed")}i(!1)}async function j(){i(!0),x("");try{await l("/api/auth/logout",{}),o(null),u(null)}catch(e){x(e instanceof Error?e.message:"Logout failed")}i(!1)}return((0,n.useEffect)(()=>{(async()=>{try{var e,t;let s=await fetch("/api/auth/me");if(!s.ok)return;let a=await s.json();o(null!=(e=a.user)?e:null),u(null!=(t=a.stats)?t:null)}catch(e){}})()},[]),d)?(0,a.jsxs)("div",{className:"max-w-4xl mx-auto bg-gray-900 rounded-2xl p-5 mb-10 border border-gray-800",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Signed in as"}),(0,a.jsx)("div",{className:"text-lg font-bold text-yellow-400",children:d.username}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:d.email})]}),(0,a.jsx)("button",{onClick:j,disabled:r,className:"bg-gray-800 hover:bg-gray-700 px-4 py-2 rounded-lg text-sm font-bold",children:"Sign out"})]}),c&&(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-6 gap-2 text-xs text-gray-300",children:[(0,a.jsxs)("div",{children:["Games: ",c.gamesPlayed]}),(0,a.jsxs)("div",{children:["Avg $: ",c.averageEndMoney]}),(0,a.jsxs)("div",{children:["Episodes: ",c.episodesCompleted]}),(0,a.jsxs)("div",{children:["Correct: ",c.correctAnswers]}),(0,a.jsxs)("div",{children:["Wrong: ",c.incorrectAnswers]}),(0,a.jsxs)("div",{children:["Skipped: ",c.skippedQuestions]})]})]}):(0,a.jsxs)("div",{className:"max-w-4xl mx-auto bg-gray-900 rounded-2xl p-5 mb-10 border border-gray-800",children:[(0,a.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,a.jsx)("button",{onClick:()=>s("signin"),className:"px-4 py-2 rounded-lg font-bold ".concat("signin"===t?"bg-yellow-400 text-black":"bg-gray-800 text-white"),children:"Sign In"}),(0,a.jsx)("button",{onClick:()=>s("signup"),className:"px-4 py-2 rounded-lg font-bold ".concat("signup"===t?"bg-yellow-400 text-black":"bg-gray-800 text-white"),children:"Create Account"})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-3",children:[(0,a.jsx)("input",{value:h,onChange:e=>p(e.target.value),placeholder:"Email",className:"bg-gray-800 border border-gray-700 rounded px-3 py-2"}),"signup"===t&&(0,a.jsx)("input",{value:y,onChange:e=>v(e.target.value),placeholder:"Username",className:"bg-gray-800 border border-gray-700 rounded px-3 py-2"}),(0,a.jsx)("input",{type:"password",value:m,onChange:e=>b(e.target.value),placeholder:"Password",className:"bg-gray-800 border border-gray-700 rounded px-3 py-2"})]}),g&&(0,a.jsx)("div",{className:"text-red-400 text-sm mt-3",children:g}),(0,a.jsx)("button",{onClick:f,disabled:r,className:"mt-4 bg-yellow-400 text-black px-5 py-2 rounded-lg font-bold disabled:opacity-60",children:r?"Workingâ€¦":"signin"===t?"Sign In":"Create Account"}),e&&!g&&(0,a.jsx)("div",{className:"text-yellow-300 text-sm mt-3",children:"This deployment is GitHub Pages (static). Full account login requires a server deployment."})]})}},2378:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2619,23)),Promise.resolve().then(s.bind(s,324))}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=2378)),_N_E=e.O()}]);