"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[599],{2599:(e,t,l)=>{l.d(t,{A:()=>w});var r=l(5155),s=l(2115),a=l(5239);let n={very_easy:1,easy:2,medium:3,hard:4,very_hard:5},i={multiple_choice:1,open_ended:1.2,list:1.4,grouping:1.5,this_or_that:1.3,ranking:1.5,media:1.4,prompt:1.2};function o(e){return Math.max(1,Math.round((n[e.difficulty]||3)*(i[e.type]||1)))}function d(e){let t=[...e];for(let e=t.length-1;e>0;e--){let l=Math.floor(Math.random()*(e+1));[t[e],t[l]]=[t[l],t[e]]}return t}function c(e){return e.toLowerCase().replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim()}function u(e){return c(e).split(" ").filter(Boolean)}function g(e,t){let l=c(e),r=c(t);if(!l||!r)return!1;if(l===r)return!0;if(l.length<2)return!1;let s=u(l),a=u(r);if(1===s.length&&a.includes(s[0])&&s[0].length>=3)return!0;if(l.length>=3&&r.length>=3){let e=function(e,t){let l=Array.from({length:e.length+1},()=>Array(t.length+1).fill(0));for(let t=0;t<=e.length;t++)l[t][0]=t;for(let e=0;e<=t.length;e++)l[0][e]=e;for(let r=1;r<=e.length;r++)for(let s=1;s<=t.length;s++){let a=+(e[r-1]!==t[s-1]);l[r][s]=Math.min(l[r-1][s]+1,l[r][s-1]+1,l[r-1][s-1]+a)}return l[e.length][t.length]}(l,r),t=Math.max(l.length,r.length);if(e<=(t<=6?1:t<=12?2:3))return!0}return!!(s.length>=2&&s.filter(e=>a.includes(e)).length>=Math.min(2,s.length))||!1}function m(e){let{src:t}=e;return t}function p(e,t,l,r,s,a,n){e||(t(!0),l({correct:n,pointsEarned:s,pointsPossible:a,type:r.type}))}function h(e){let{question:t,onAnswer:l}=e,a="multiple_choice"===t.type?t:null,[n,i]=(0,s.useState)([]),[c,u]=(0,s.useState)(""),[g,m]=(0,s.useState)(!1),[h,b]=(0,s.useState)(!1),x=o(t),f=(0,s.useMemo)(()=>{var e;if(!a)return"";let t=(a.options||[]).map(e=>({text:e.replace(/^\*+\s*/,"").replace(/\s*\*+$/,"").trim(),starred:e.trim().startsWith("*")||e.trim().endsWith("*")}));return(a.correctAnswer||(null==(e=t.find(e=>e.starred))?void 0:e.text)||"").trim()},[a]);return((0,s.useEffect)(()=>{a&&(i(d((a.options||[]).map(e=>e.replace(/^\*+\s*/,"").replace(/\s*\*+$/,"").trim()).filter(Boolean))),u(""),m(!1),b(!1))},[a]),a)?(0,r.jsxs)("div",{className:"space-y-3",children:[n.map(e=>{let t=g&&e===f,l=g&&c===e&&e!==f;return(0,r.jsx)("button",{onClick:()=>!g&&u(e),className:"w-full text-left p-3 rounded-lg border ".concat(t?"bg-green-800 border-green-500":l?"bg-red-800 border-red-500":c===e?"bg-blue-700 border-blue-400":"bg-gray-700 border-gray-600 hover:bg-gray-600"),children:e},e)}),(0,r.jsx)("button",{disabled:!c||g,onClick:()=>{m(!0);let e=c===f;p(h,b,l,t,e?x:0,x,e)},className:"w-full bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 py-2 rounded-lg font-bold",children:"Submit"})]}):null}function b(e){let{question:t,onAnswer:l}=e,a="open_ended"===t.type?t:null,[n,i]=(0,s.useState)(""),[d,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)(!1),[h,b]=(0,s.useState)(!1),x=o(t);if((0,s.useEffect)(()=>{i(""),c(!1),m(!1),b(!1)},[null==a?void 0:a.id,null==a?void 0:a.question]),!a)return null;let f=[a.answer||"",...a.acceptedAnswers||[]].filter(Boolean);return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("input",{value:n,onChange:e=>i(e.target.value),disabled:d,placeholder:"Type your answer",className:"w-full bg-gray-700 rounded-lg p-3"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)("button",{disabled:d||!n.trim(),onClick:()=>{let e=f.some(e=>g(n,e));c(!0),p(h,b,l,t,e?x:0,x,e)},className:"bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 py-2 rounded-lg font-bold",children:"Submit"}),(0,r.jsx)("button",{onClick:()=>{m(!0),d||p(h,b,l,t,0,x,!1)},className:"bg-blue-700 hover:bg-blue-600 py-2 rounded-lg font-bold",children:"Reveal Answer"})]}),u&&(0,r.jsxs)("div",{className:"text-yellow-300 font-bold",children:["Answer: ",a.answer]})]})}function x(e){let{question:t,onAnswer:l}=e,a="list"===t.type?t:null,[n,i]=(0,s.useState)(""),[d,u]=(0,s.useState)([]),[m,h]=(0,s.useState)([]),[b,x]=(0,s.useState)(!1),[f,y]=(0,s.useState)(!1),[v,j]=(0,s.useState)(""),[N,w]=(0,s.useState)("timed"),[S,k]=(0,s.useState)("target"),[C,M]=(0,s.useState)(30),[A,_]=(0,s.useState)(0),[q,L]=(0,s.useState)(!1),E=o(t);if((0,s.useEffect)(()=>{i(""),u([]),h([]),x(!1),y(!1),j(""),w("timed"),k("target"),L(!1),M((null==a?void 0:a.difficulty)==="hard"||(null==a?void 0:a.difficulty)==="very_hard"?60:30),_(0)},[a]),(0,s.useEffect)(()=>{if("timed"!==N||b)return;if(C<=0){x(!0);let e=d.length,r=(null==a?void 0:a.minRequired)||1,s=(Array.isArray(null==a?void 0:a.answers)?a.answers:[]).some(e=>/self\s*-?\s*score/i.test(e))||/self\s*-?\s*score/i.test((null==a?void 0:a.question)||""),n="as_many"===S?{earned:s?0:Math.min(E,e),correct:!s&&e>0}:{earned:s?0:Math.round(E*Math.min(1,e/Math.max(1,r))),correct:!s&&e>=r};p(q,L,l,t,n.earned,E,n.correct);return}let e=setTimeout(()=>M(e=>e-1),1e3);return()=>clearTimeout(e)},[N,b,C,d.length,q,l,E,t,S,a]),!a)return null;let T=a.question.includes(":")?a.question.split(":").slice(1).join(":").split(/[;,]/).map(e=>e.trim()).filter(Boolean):[],B=Array.from(new Set([...Array.isArray(a.answers)?a.answers:[],...T])),R=a.minRequired||1,P=B.some(e=>/self\s*-?\s*score/i.test(e))||/self\s*-?\s*score/i.test(a.question),U=/two\s+o'?s|double\s+o|\boo\b|side\s*by\s*side/i.test(a.question.toLowerCase());function z(){var e;if(b)return;x(!0);let r=(e=d.length,P?{earned:0,correct:!1}:"as_many"===S?{earned:Math.min(E,e),correct:e>0}:{earned:Math.round(E*Math.min(1,e/Math.max(1,R))),correct:e>=R});p(q,L,l,t,r.earned,E,r.correct)}function D(){let e=n.trim();if(!e||b)return;let t=U&&/oo/i.test(e)?e:null,l=B.find(t=>g(e,t))||t,r=l||e,s=!!l&&!d.includes(r);if(s)u(e=>[...e,r]);else if("strikes"===N){let t=A+1;if(_(t),t>=3){h(t=>[...t,{text:e,correct:s}]),i(""),z();return}}h(t=>[...t,{text:e,correct:s}]),i("")}let F=B.filter(e=>c(e).includes(c(v)));return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("select",{value:N,onChange:e=>w(e.target.value),disabled:m.length>0,className:"bg-gray-700 rounded-lg p-2 text-sm disabled:opacity-50",children:[(0,r.jsx)("option",{value:"timed",children:"Timed"}),(0,r.jsx)("option",{value:"strikes",children:"3 Strikes"}),(0,r.jsx)("option",{value:"unlimited",children:"Unlimited"})]}),(0,r.jsxs)("select",{value:S,onChange:e=>k(e.target.value),disabled:m.length>0,className:"bg-gray-700 rounded-lg p-2 text-sm disabled:opacity-50",children:[(0,r.jsx)("option",{value:"target",children:"Target (meet minimum)"}),(0,r.jsx)("option",{value:"as_many",children:"Name as many"})]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-300",children:["target"===S?"Find at least ".concat(R," answers."):"Name as many answers as you can.",P?" Self-score round: no points awarded.":"","timed"===N?" Time left: ".concat(C,"s"):"","strikes"===N?" Strikes: ".concat(A,"/3"):""]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{value:n,onChange:e=>i(e.target.value),onKeyDown:e=>"Enter"===e.key&&D(),disabled:b,className:"flex-1 bg-gray-700 rounded-lg p-3",placeholder:"Type an item"}),(0,r.jsx)("button",{onClick:D,disabled:b,className:"px-4 bg-purple-600 hover:bg-purple-500 rounded-lg font-bold",children:"Check"})]}),(0,r.jsxs)("div",{className:"rounded-lg bg-gray-900 p-2 max-h-28 overflow-y-auto",children:[(0,r.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"Guessed so far"}),(0,r.jsx)("div",{className:"space-y-1",children:m.map((e,t)=>(0,r.jsxs)("div",{className:"text-xs ".concat(e.correct?"text-green-300":"text-red-300"),children:[e.correct?"✓":"✗"," ",e.text]},"".concat(e.text,"-").concat(t)))})]}),(0,r.jsxs)("div",{className:"text-sm",children:["Found: ",(0,r.jsx)("span",{className:"text-green-300 font-bold",children:d.length})," / ",B.length]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)("button",{disabled:b,onClick:z,className:"bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 py-2 rounded-lg font-bold",children:"Submit List"}),(0,r.jsx)("button",{onClick:()=>{y(!0),b||z()},className:"bg-blue-700 hover:bg-blue-600 py-2 rounded-lg font-bold",children:"Reveal Answers"})]}),f&&(0,r.jsxs)("div",{className:"bg-gray-900 rounded-lg p-3 space-y-2",children:[(0,r.jsx)("input",{value:v,onChange:e=>j(e.target.value),placeholder:"Search answers",className:"w-full bg-gray-700 rounded-lg p-2"}),(0,r.jsx)("div",{className:"max-h-40 overflow-y-auto text-sm space-y-1",children:F.map(e=>(0,r.jsx)("div",{className:"".concat(d.includes(e)?"text-green-300":"text-gray-200"),children:e},e))})]})]})}function f(e){let{question:t,onAnswer:l}=e,a="grouping"===t.type?t:null,[n,i]=(0,s.useState)("elimination"),[c,u]=(0,s.useState)([]),[g,m]=(0,s.useState)([]),[h,b]=(0,s.useState)(!1),[x,f]=(0,s.useState)(!1),y=o(t);if((0,s.useEffect)(()=>{if(!a)return;let e=Array.isArray(a.items)?a.items:[],t=new Set(Array.isArray(a.correctItems)?a.correctItems:[]),l=e.filter(e=>t.has(e)),r=e.filter(e=>!t.has(e)),s=Math.min(8,l.length),n=d(l).slice(0,s),o=d(r).slice(0,Math.max(0,16-n.length));u(d([...n,...o]).slice(0,16)),m([]),b(!1),i("elimination"),f(!1)},[a]),!a)return null;let v=new Set(Array.isArray(a.correctItems)?a.correctItems:[]),j=c.filter(e=>v.has(e)).length;function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;if(h)return;let r=e.filter(e=>v.has(e)).length,s=Math.round(y*r/Math.max(1,j));b(!0),p(x,f,l,t,s,y,r===j)}return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{disabled:g.length>0,onClick:()=>i("elimination"),className:"px-3 py-1 rounded ".concat("elimination"===n?"bg-purple-600":"bg-gray-700"," disabled:opacity-50"),children:"Elimination"}),(0,r.jsx)("button",{disabled:g.length>0,onClick:()=>i("continuous"),className:"px-3 py-1 rounded ".concat("continuous"===n?"bg-purple-600":"bg-gray-700"," disabled:opacity-50"),children:"Continuous"})]}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2",children:c.map(e=>{let t=g.includes(e),l=v.has(e),s=h?l?t?"bg-green-700 border-yellow-300":"bg-green-900 border-green-500":t?"bg-red-800 border-red-500":"bg-gray-700 border-gray-600 opacity-60":t?"bg-blue-700 border-blue-400":"bg-gray-700 border-gray-600 hover:bg-gray-600";return(0,r.jsxs)("button",{onClick:()=>(function(e){if(h||g.includes(e))return;let t=v.has(e),l=[...g,e];if(m(l),"elimination"===n&&!t)return void N(l);"continuous"===n&&l.length>=Math.max(1,j)&&N(l)})(e),className:"p-2 text-sm rounded border ".concat(s),children:[e,h&&t&&(0,r.jsx)("span",{className:"ml-1 text-xs",children:"(picked)"})]},e)})}),!h&&"continuous"===n&&(0,r.jsxs)("div",{className:"text-sm text-gray-300",children:["Pick ",j," items. Chosen: ",g.length]}),!h&&(0,r.jsx)("button",{onClick:()=>N(),className:"w-full bg-purple-600 hover:bg-purple-500 py-2 rounded-lg font-bold",children:"Finish"})]})}function y(e){let{question:t,onAnswer:l}=e,a="this_or_that"===t.type?t:null,[n,i]=(0,s.useState)("standard"),[c,u]=(0,s.useState)(0),[g,m]=(0,s.useState)(0),[h,b]=(0,s.useState)(null),[x,f]=(0,s.useState)([]),[y,v]=(0,s.useState)(!1),j=o(t);if((0,s.useEffect)(()=>{a&&(f(d(Array.isArray(a.items)?a.items:[]).slice(0,5)),u(0),m(0),b(null),i("standard"),v(!1))},[a]),!a)return null;let N=[a.categoryA,a.categoryB,a.categoryC].filter(Boolean),w=x[c];if(!w)return(0,r.jsx)("div",{className:"text-gray-400",children:"No this-or-that items available."});let S=["bg-blue-700 hover:bg-blue-600","bg-emerald-700 hover:bg-emerald-600","bg-violet-700 hover:bg-violet-600"];return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{disabled:c>0,onClick:()=>i("standard"),className:"px-3 py-1 rounded ".concat("standard"===n?"bg-purple-600":"bg-gray-700"," disabled:opacity-50"),children:"Standard"}),(0,r.jsx)("button",{disabled:c>0,onClick:()=>i("elimination"),className:"px-3 py-1 rounded ".concat("elimination"===n?"bg-purple-600":"bg-gray-700"," disabled:opacity-50"),children:"Elimination"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-300",children:[c+1," / ",x.length," • Correct: ",g]}),(0,r.jsx)("div",{className:"p-3 bg-gray-700 rounded-lg",children:w.text.replace(/^[-\s]+/,"")}),(0,r.jsx)("div",{className:"grid gap-2 ".concat(N.length>=3?"grid-cols-3":"grid-cols-2"),children:N.map((e,s)=>{let a=0===s?"A":1===s?"B":"C",i=h&&w.answer===a,o=h===a&&w.answer!==a;return(0,r.jsx)("button",{onClick:()=>(function(e){if(h)return;b(e);let r=e===w.answer;"elimination"!==n||r||p(y,v,l,t,Math.round(j*g/Math.max(1,x.length)),j,!1)})(a),disabled:!!h,className:"p-4 text-lg font-bold rounded-xl border ".concat(i?"bg-green-800 border-green-500":o?"bg-red-800 border-red-500":"".concat(S[s]||"bg-gray-700 hover:bg-gray-600"," border-transparent")," disabled:opacity-90"),children:e},e)})}),h&&(0,r.jsx)("button",{onClick:function(){let e=g+ +(h===w.answer);if(m(e),c+1>=x.length||"elimination"===n&&h!==w.answer)return void p(y,v,l,t,Math.round(j*e/Math.max(1,x.length)),j,e>0);u(e=>e+1),b(null)},className:"w-full bg-purple-600 hover:bg-purple-500 py-2 rounded-lg font-bold",children:c+1>=x.length?"Finish":"Next"})]})}function v(e){let{question:t,onAnswer:l}=e,a="ranking"===t.type?t:null,[n,i]=(0,s.useState)("one_shot"),[c,u]=(0,s.useState)(0),[g,m]=(0,s.useState)(!1),[h,b]=(0,s.useState)([]),[x,f]=(0,s.useState)(null),[y,v]=(0,s.useState)(new Set),[j,N]=(0,s.useState)(!1),[w,S]=(0,s.useState)(!1),k=o(t),C=(0,s.useMemo)(()=>{if(!a)return[];let e=a.question.split(":");return e.length<2?[]:e.slice(1).join(":").split(",").map(e=>e.trim()).filter(Boolean)},[a]),M=(0,s.useMemo)(()=>a&&Array.isArray(a.items)?[...a.items].sort((e,t)=>e.rank-t.rank):[],[a]),A=(0,s.useMemo)(()=>M.length?M.map(e=>e.text).filter(Boolean):C,[C,M]),_=(0,s.useMemo)(()=>(function(e){let[t]=e.split(":");return(null==t?void 0:t.trim())||e})((null==a?void 0:a.question)||""),[null==a?void 0:a.question]),q=(0,s.useMemo)(()=>(function(e){let t=" ".concat(e.toLowerCase().replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim()," "),l=e=>e.some(e=>t.includes(" ".concat(e," ")));return l(["earliest","oldest","first"])?{topLabel:"1 = earliest",bottomLabel:"N = latest"}:l(["latest","newest","most recent","recent"])?{topLabel:"1 = latest",bottomLabel:"N = earliest"}:l(["highest","largest","biggest","longest","fastest","strongest","most","greatest"])?{topLabel:"1 = greatest / most",bottomLabel:"N = least / lowest"}:l(["lowest","smallest","shortest","slowest","weakest","least","fewest"])?{topLabel:"1 = least / lowest",bottomLabel:"N = greatest / most"}:{topLabel:"1 = best fit for the prompt",bottomLabel:"N = least fit for the prompt"}})(_),[_]),L=(0,s.useMemo)(()=>q.topLabel.replace(/\bN\b/g,String(A.length||1)),[q.topLabel,A.length]),E=(0,s.useMemo)(()=>q.bottomLabel.replace(/\bN\b/g,String(A.length||1)),[q.bottomLabel,A.length]);return((0,s.useEffect)(()=>{b(d(C.length?C:A)),u(0),m(!1),i("one_shot"),f(null),v(new Set),N(!1),S(!1)},[null==a?void 0:a.id,null==a?void 0:a.question,C,A]),a)?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-300",children:[(0,r.jsx)("div",{className:"font-bold text-gray-200",children:_}),(0,r.jsx)("div",{children:L}),(0,r.jsx)("div",{children:E})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>i("one_shot"),disabled:c>0,className:"px-3 py-1 rounded ".concat("one_shot"===n?"bg-purple-600":"bg-gray-700"," disabled:opacity-50"),children:"One-Shot"}),(0,r.jsx)("button",{onClick:()=>i("anchor_adjust"),disabled:c>0,className:"px-3 py-1 rounded ".concat("anchor_adjust"===n?"bg-purple-600":"bg-gray-700"," disabled:opacity-50"),children:"Anchor/Adjust"})]}),(0,r.jsx)("div",{className:"space-y-2",children:h.map((e,t)=>{let l=y.has(t),s=g&&e===A[t],a=g&&e!==A[t];return(0,r.jsxs)("button",{draggable:!g&&!l,onDragStart:()=>f(t),onDragOver:e=>e.preventDefault(),onDrop:()=>{var e;return e=t,void(null!=x&&x!==e&&(y.has(x)||y.has(e)||(b(t=>{let l=[...t],[r]=l.splice(x,1);return l.splice(e,0,r),l}),f(null))))},className:"w-full text-left p-2 rounded border cursor-grab active:cursor-grabbing ".concat(l?"bg-green-900 border-green-500":s?"bg-green-800 border-green-500":a?"bg-red-800 border-red-500":"bg-gray-700 border-gray-600"),children:[t+1,". ",e," ",l&&"anchor_adjust"===n?"\uD83D\uDD12":"↕"]},"".concat(e,"-").concat(t))})}),!g&&(0,r.jsx)("button",{onClick:function(){let e=h.reduce((e,t,l)=>t===A[l]?e+1:e,0),r=c+1;if(u(r),"one_shot"===n){let r=Math.round(k*e/Math.max(1,A.length));m(!0),N(!0),p(w,S,l,t,r,k,e===A.length);return}let s=new Set;if(h.forEach((e,t)=>{e===A[t]&&s.add(t)}),v(s),s.size===A.length){let e=Math.max(0,k-(r-1));m(!0),N(!0),p(w,S,l,t,e,k,!0)}},className:"w-full bg-purple-600 hover:bg-purple-500 py-2 rounded-lg font-bold",children:"Submit Ranking"}),"anchor_adjust"===n&&(0,r.jsxs)("div",{className:"text-sm text-gray-300",children:["Attempts: ",c," • Locked: ",y.size,"/",A.length," • Current score: ",Math.max(0,k-Math.max(0,c-1))]}),(j||g)&&(0,r.jsxs)("div",{className:"bg-gray-900 rounded-lg p-3",children:[(0,r.jsx)("div",{className:"text-sm text-gray-300 mb-1",children:"Correct order:"}),(0,r.jsx)("div",{className:"space-y-1 text-sm",children:A.map((e,t)=>{var l;let s=null==(l=M[t])?void 0:l.value;return(0,r.jsxs)("div",{children:[t+1,". ",e,s?" (".concat(s,")"):""]},"".concat(e,"-").concat(t))})})]})]}):null}function j(e){let{question:t,onAnswer:l}=e,n="media"===t.type?t:null,[i,d]=(0,s.useState)(""),[c,u]=(0,s.useState)(!1),[h,b]=(0,s.useState)(!1),[x,f]=(0,s.useState)(!1),[y,v]=(0,s.useState)(!1),j=o(t);if((0,s.useEffect)(()=>{d(""),u(!1),b(!1),f(!1),v(!1)},[null==n?void 0:n.id,null==n?void 0:n.question]),!n)return null;let N=[n.answer||"",...n.acceptedAnswers||[]].filter(Boolean),w=n.mediaUrl||"",S=function(e){try{let t=new URL(e);if(t.pathname.startsWith("/clip/"))return null;if(t.hostname.includes("youtu.be")){let e=t.pathname.replace("/","").split("?")[0],l=t.searchParams.get("t")||t.searchParams.get("start"),r=l?l.replace(/s$/,""):"";return e?"https://www.youtube.com/embed/".concat(e,"?rel=0&modestbranding=1").concat(r?"&start=".concat(encodeURIComponent(r)):""):null}if(t.hostname.includes("youtube.com")||t.hostname.includes("youtube-nocookie.com")){if(t.pathname.startsWith("/shorts/")){let e=t.pathname.replace("/shorts/","").split("/")[0];return e?"https://www.youtube.com/embed/".concat(e,"?rel=0&modestbranding=1"):null}if(t.pathname.startsWith("/embed/")){let e=t.pathname.replace("/embed/","").split("/")[0];return e?"https://www.youtube.com/embed/".concat(e,"?rel=0&modestbranding=1"):null}let e=t.searchParams.get("v");return e?"https://www.youtube.com/embed/".concat(e,"?rel=0&modestbranding=1"):null}return null}catch(e){return null}}(w),k=/youtube\.com\/clip\//i.test(w),C="image"===(n.mediaType||"").toLowerCase()||/\.(png|jpg|jpeg|gif|webp)(\?|$)/i.test(w),M=/\.(mp4|webm|ogg)(\?|$)/i.test(w),A="video"===(n.mediaType||"").toLowerCase()||!!S||M;return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"rounded-lg bg-black aspect-video flex items-center justify-center overflow-hidden relative",children:[C&&w&&(0,r.jsx)(a.default,{loader:m,unoptimized:!0,src:w,alt:"Question media",width:1280,height:720,className:"max-w-full max-h-full object-contain ".concat(x?"opacity-30":"")}),A&&S&&!k&&(0,r.jsx)("iframe",{src:S,title:"Question media video",className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0}),A&&!S&&w&&!k&&M&&(0,r.jsx)("video",{src:w,controls:!0,className:"w-full h-full object-contain"}),k&&(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center p-4",children:(0,r.jsx)("a",{href:w,target:"_blank",rel:"noreferrer",className:"inline-flex items-center justify-center rounded-lg bg-red-600 px-4 py-2 font-bold text-white hover:bg-red-500",children:"Play Clip on YouTube"})}),x&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black/85 pointer-events-none"}),!w&&(0,r.jsx)("div",{className:"text-gray-400",children:"No media URL found."})]}),k&&(0,r.jsx)("a",{href:w,target:"_blank",rel:"noreferrer",className:"text-sm text-blue-300 underline",children:"Open YouTube clip in new tab"}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("input",{type:"checkbox",checked:x,onChange:e=>f(e.target.checked)}),"Obscure media"]}),(0,r.jsx)("input",{value:i,onChange:e=>d(e.target.value),disabled:c,placeholder:"Type your answer",className:"w-full bg-gray-700 rounded-lg p-3"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)("button",{disabled:!i.trim()||c,onClick:()=>{let e=N.some(e=>g(i,e));u(!0),p(y,v,l,t,e?j:0,j,e)},className:"bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 py-2 rounded-lg font-bold",children:"Submit"}),(0,r.jsx)("button",{onClick:()=>{b(!0),c||p(y,v,l,t,0,j,!1)},className:"bg-blue-700 hover:bg-blue-600 py-2 rounded-lg font-bold",children:"Reveal Answer"})]}),h&&(0,r.jsxs)("div",{className:"text-yellow-300 font-bold",children:["Answer: ",n.answer]})]})}function N(e){let{question:t,onAnswer:l,onRerollPrompt:a}=e,n="prompt"===t.type?t:null,[i,d]=(0,s.useState)(""),[c,u]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!1),[b,x]=(0,s.useState)(!1),f=o(t);if((0,s.useEffect)(()=>{d(""),u(!1),h(!1),x(!1)},[null==n?void 0:n.id,null==n?void 0:n.question,null==n?void 0:n.prompt]),!n)return null;let y=[n.answer||"",...n.acceptedAnswers||[]].filter(Boolean);return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"bg-gray-700 rounded-lg p-3",children:[(0,r.jsx)("div",{className:"text-xs text-gray-300 uppercase mb-1",children:"Prompt"}),(0,r.jsx)("div",{className:"text-lg",children:n.prompt||"No prompt available."})]}),(0,r.jsx)("input",{value:i,onChange:e=>d(e.target.value),disabled:c,placeholder:"Type your answer",className:"w-full bg-gray-700 rounded-lg p-3"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,r.jsx)("button",{disabled:!i.trim()||c,onClick:()=>{let e=y.some(e=>g(i,e));u(!0),p(b,x,l,t,e?f:0,f,e)},className:"bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 py-2 rounded-lg font-bold",children:"Submit"}),(0,r.jsx)("button",{onClick:()=>{h(!0),c||p(b,x,l,t,0,f,!1)},className:"bg-blue-700 hover:bg-blue-600 py-2 rounded-lg font-bold",children:"Reveal"}),(0,r.jsx)("button",{onClick:()=>n.prompt&&(null==a?void 0:a(n.prompt)),disabled:!n.prompt||!a,className:"bg-indigo-700 hover:bg-indigo-600 disabled:bg-gray-600 py-2 rounded-lg font-bold",children:"Reroll Prompt"})]}),m&&(0,r.jsxs)("div",{className:"text-yellow-300 font-bold",children:["Answer: ",n.answer]})]})}function w(e){return"multiple_choice"===e.question.type?(0,r.jsx)(h,{...e}):"open_ended"===e.question.type?(0,r.jsx)(b,{...e}):"list"===e.question.type?(0,r.jsx)(x,{...e}):"grouping"===e.question.type?(0,r.jsx)(f,{...e}):"this_or_that"===e.question.type?(0,r.jsx)(y,{...e}):"ranking"===e.question.type?(0,r.jsx)(v,{...e}):"media"===e.question.type?(0,r.jsx)(j,{...e}):"prompt"===e.question.type?(0,r.jsx)(N,{...e}):(0,r.jsx)("div",{className:"text-gray-400 italic",children:"Unsupported question type."})}}}]);