"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{6602:(e,t,l)=>{l.d(t,{A:()=>x});var r=l(5155),n=l(2115),s=l(5239);function a(e){let t=[...e];for(let e=t.length-1;e>0;e--){let l=Math.floor(Math.random()*(e+1));[t[e],t[l]]=[t[l],t[e]]}return t}function i(e){return e.toLowerCase().replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim()}function o(e,t){let l=i(e),r=i(t);if(!l||!r)return!1;if(l===r||l.includes(r)||r.includes(l))return!0;let n=function(e,t){let l=Array.from({length:e.length+1},()=>Array(t.length+1).fill(0));for(let t=0;t<=e.length;t++)l[t][0]=t;for(let e=0;e<=t.length;e++)l[0][e]=e;for(let r=1;r<=e.length;r++)for(let n=1;n<=t.length;n++){let s=+(e[r-1]!==t[n-1]);l[r][n]=Math.min(l[r-1][n]+1,l[r][n-1]+1,l[r-1][n-1]+s)}return l[e.length][t.length]}(l,r),s=Math.max(l.length,r.length);return s<=5?n<=1:s<=10?n<=2:n<=3}function c(e){let{question:t,onAnswer:l}=e,s="multiple_choice"===t.type?t:null,[i,o]=(0,n.useState)([]),[c,d]=(0,n.useState)(""),[u,g]=(0,n.useState)(!1),p=(0,n.useMemo)(()=>{var e;if(!s)return"";let t=(s.options||[]).map(e=>({text:e.replace(/^\*+\s*/,"").replace(/\s*\*+$/,"").trim(),starred:e.trim().startsWith("*")||e.trim().endsWith("*")}));return(s.correctAnswer||(null==(e=t.find(e=>e.starred))?void 0:e.text)||"").trim()},[s]);return((0,n.useEffect)(()=>{s&&(o(a((s.options||[]).map(e=>e.replace(/^\*+\s*/,"").replace(/\s*\*+$/,"").trim()).filter(Boolean))),d(""),g(!1))},[null==s?void 0:s.id,null==s?void 0:s.question,s]),s)?(0,r.jsxs)("div",{className:"space-y-3",children:[i.map(e=>{let t=u&&e===p,l=u&&c===e&&e!==p;return(0,r.jsx)("button",{onClick:()=>!u&&d(e),className:"w-full text-left p-3 rounded-lg border ".concat(t?"bg-green-800 border-green-500":l?"bg-red-800 border-red-500":c===e?"bg-blue-700 border-blue-400":"bg-gray-700 border-gray-600 hover:bg-gray-600"),children:e},e)}),(0,r.jsx)("button",{disabled:!c||u,onClick:()=>{g(!0),l({correct:c===p})},className:"w-full bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 py-2 rounded-lg font-bold",children:"Submit"})]}):null}function d(e){let{question:t,onAnswer:l}=e,s="open_ended"===t.type?t:null,[a,i]=(0,n.useState)(""),[c,d]=(0,n.useState)(!1),[u,g]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{i(""),d(!1),g(!1)},[null==s?void 0:s.id,null==s?void 0:s.question]),!s)return null;let p=[s.answer||"",...s.acceptedAnswers||[]].filter(Boolean);return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("input",{value:a,onChange:e=>i(e.target.value),disabled:c,placeholder:"Type your answer",className:"w-full bg-gray-700 rounded-lg p-3"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)("button",{disabled:c||!a.trim(),onClick:()=>{let e=p.some(e=>o(a,e));d(!0),l({correct:e})},className:"bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 py-2 rounded-lg font-bold",children:"Submit"}),(0,r.jsx)("button",{onClick:()=>{g(!0),c||l({correct:!1})},className:"bg-blue-700 hover:bg-blue-600 py-2 rounded-lg font-bold",children:"Reveal Answer"})]}),u&&(0,r.jsxs)("div",{className:"text-yellow-300 font-bold",children:["Answer: ",s.answer]})]})}function u(e){let{question:t,onAnswer:l}=e,s="list"===t.type?t:null,[a,c]=(0,n.useState)(""),[d,u]=(0,n.useState)([]),[g,p]=(0,n.useState)([]),[b,h]=(0,n.useState)(!1),[m,x]=(0,n.useState)(!1),[f,y]=(0,n.useState)("");if((0,n.useEffect)(()=>{c(""),u([]),p([]),h(!1),x(!1),y("")},[null==s?void 0:s.id,null==s?void 0:s.question]),!s)return null;let v=Array.isArray(s.answers)?s.answers:[],j=s.minRequired||1;function N(){let e=a.trim();if(!e||b)return;let t=v.find(t=>o(e,t)),l=t||e,r=!!t&&!d.includes(l);r&&u(e=>[...e,l]),p(t=>[...t,{text:e,correct:r}]),c("")}let w=v.filter(e=>i(e).includes(i(f)));return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-300",children:["Find at least ",j," answers."]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{value:a,onChange:e=>c(e.target.value),onKeyDown:e=>"Enter"===e.key&&N(),disabled:b,className:"flex-1 bg-gray-700 rounded-lg p-3",placeholder:"Type an item"}),(0,r.jsx)("button",{onClick:N,disabled:b,className:"px-4 bg-purple-600 hover:bg-purple-500 rounded-lg font-bold",children:"Check"})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:g.slice(-8).map((e,t)=>(0,r.jsxs)("span",{className:"px-2 py-1 rounded text-xs ".concat(e.correct?"bg-green-700":"bg-red-700"),children:[e.correct?"✓":"✗"," ",e.text]},"".concat(e.text,"-").concat(t)))}),(0,r.jsxs)("div",{className:"text-sm",children:["Found: ",(0,r.jsx)("span",{className:"text-green-300 font-bold",children:d.length})," / ",v.length]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)("button",{disabled:b,onClick:()=>{h(!0),l({correct:d.length>=j})},className:"bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 py-2 rounded-lg font-bold",children:"Submit List"}),(0,r.jsx)("button",{onClick:()=>{x(!0),b||(h(!0),l({correct:d.length>=j}))},className:"bg-blue-700 hover:bg-blue-600 py-2 rounded-lg font-bold",children:"Reveal Answers"})]}),m&&(0,r.jsxs)("div",{className:"bg-gray-900 rounded-lg p-3 space-y-2",children:[(0,r.jsx)("input",{value:f,onChange:e=>y(e.target.value),placeholder:"Search answers",className:"w-full bg-gray-700 rounded-lg p-2"}),(0,r.jsx)("div",{className:"max-h-40 overflow-y-auto text-sm space-y-1",children:w.map(e=>(0,r.jsx)("div",{className:"".concat(d.includes(e)?"text-green-300":"text-gray-200"),children:e},e))})]})]})}function g(e){let{question:t,onAnswer:l}=e,s="grouping"===t.type?t:null,[i,o]=(0,n.useState)("elimination"),[c,d]=(0,n.useState)([]),[u,g]=(0,n.useState)([]),[p,b]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{if(!s)return;let e=Array.isArray(s.items)?s.items:[],t=new Set(Array.isArray(s.correctItems)?s.correctItems:[]),l=e.filter(e=>t.has(e)),r=e.filter(e=>!t.has(e)),n=Math.min(8,l.length),i=a(l).slice(0,n),c=a(r).slice(0,Math.max(0,16-i.length));d(a([...i,...c]).slice(0,16)),g([]),b(!1),o("elimination")},[null==s?void 0:s.id,null==s?void 0:s.question,s]),!s)return null;let h=new Set(Array.isArray(s.correctItems)?s.correctItems:[]),m=c.filter(e=>h.has(e)).length;return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{disabled:u.length>0,onClick:()=>o("elimination"),className:"px-3 py-1 rounded ".concat("elimination"===i?"bg-purple-600":"bg-gray-700"," disabled:opacity-50"),children:"Elimination"}),(0,r.jsx)("button",{disabled:u.length>0,onClick:()=>o("continuous"),className:"px-3 py-1 rounded ".concat("continuous"===i?"bg-purple-600":"bg-gray-700"," disabled:opacity-50"),children:"Continuous"})]}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2",children:c.map(e=>{let t=u.includes(e),n=h.has(e);return(0,r.jsx)("button",{onClick:()=>(function(e){if(p||u.includes(e))return;let t=h.has(e),r=[...u,e];if(g(r),"elimination"===i&&!t){b(!0),l({correct:!1});return}if("continuous"===i&&r.length>=Math.max(1,m)){let e=r.filter(e=>h.has(e)).length;b(!0),l({correct:e===m})}})(e),className:"p-2 text-sm rounded border ".concat(p?n?"bg-green-800 border-green-500":t?"bg-red-800 border-red-500":"bg-gray-700 border-gray-600 opacity-70":t?"bg-blue-700 border-blue-400":"bg-gray-700 border-gray-600 hover:bg-gray-600"),children:e},e)})}),!p&&"continuous"===i&&(0,r.jsxs)("div",{className:"text-sm text-gray-300",children:["Pick ",m," items. Chosen: ",u.length]}),!p&&(0,r.jsx)("button",{onClick:()=>{b(!0);let e=u.every(e=>h.has(e)),t="continuous"===i?u.length===m:e;l({correct:e&&t})},className:"w-full bg-purple-600 hover:bg-purple-500 py-2 rounded-lg font-bold",children:"Finish"})]})}function p(e){let{question:t,onAnswer:l}=e,s="this_or_that"===t.type?t:null,[i,o]=(0,n.useState)(0),[c,d]=(0,n.useState)(0),[u,g]=(0,n.useState)(null),[p,b]=(0,n.useState)([]);if((0,n.useEffect)(()=>{s&&(b(a(Array.isArray(s.items)?s.items:[]).slice(0,5)),o(0),d(0),g(null))},[null==s?void 0:s.id,null==s?void 0:s.question,s]),!s)return null;let h=[s.categoryA,s.categoryB,s.categoryC].filter(Boolean),m=p[i];return m?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-300",children:[i+1," / ",p.length," • Correct: ",c]}),(0,r.jsx)("div",{className:"p-3 bg-gray-700 rounded-lg",children:m.text.replace(/^[-\s]+/,"")}),(0,r.jsx)("div",{className:"grid gap-2 ".concat(h.length>=3?"grid-cols-3":"grid-cols-2"),children:h.map((e,t)=>{let l=0===t?"A":1===t?"B":"C",n=u&&m.answer===l,s=u===l&&m.answer!==l;return(0,r.jsx)("button",{onClick:()=>{!u&&(g(l),l===m.answer&&d(e=>e+1))},disabled:!!u,className:"p-2 rounded-lg border ".concat(n?"bg-green-800 border-green-500":s?"bg-red-800 border-red-500":"bg-gray-700 border-gray-600 hover:bg-gray-600"," disabled:opacity-90"),children:e},e)})}),u&&(0,r.jsx)("button",{onClick:function(){if(i+1>=p.length)return void l({correct:c+ +(u===m.answer)>=Math.ceil(p.length/2)});o(e=>e+1),g(null)},className:"w-full bg-purple-600 hover:bg-purple-500 py-2 rounded-lg font-bold",children:i+1>=p.length?"Finish":"Next"})]}):(0,r.jsx)("div",{className:"text-gray-400",children:"No this-or-that items available."})}function b(e){let{question:t,onAnswer:l}=e,s="ranking"===t.type?t:null,[i,o]=(0,n.useState)("one_shot"),[c,d]=(0,n.useState)(0),[u,g]=(0,n.useState)(!1),[p,b]=(0,n.useState)([]),[h,m]=(0,n.useState)(null),x=(0,n.useMemo)(()=>{if(!s)return[];let e=s.question.split(":");return e.length<2?[]:e.slice(1).join(":").split(",").map(e=>e.trim()).filter(Boolean)},[s]),f=(0,n.useMemo)(()=>s?Array.isArray(s.items)&&s.items.length?[...s.items].sort((e,t)=>e.rank-t.rank).map(e=>e.text).filter(Boolean):x:[],[x,s]);return((0,n.useEffect)(()=>{b(a(x.length?x:f)),d(0),g(!1),o("one_shot"),m(null)},[null==s?void 0:s.id,null==s?void 0:s.question,x,f]),s)?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>o("one_shot"),className:"px-3 py-1 rounded ".concat("one_shot"===i?"bg-purple-600":"bg-gray-700"),children:"One-Shot"}),(0,r.jsx)("button",{onClick:()=>o("anchor_adjust"),className:"px-3 py-1 rounded ".concat("anchor_adjust"===i?"bg-purple-600":"bg-gray-700"),children:"Anchor/Adjust"})]}),(0,r.jsx)("div",{className:"space-y-2",children:p.map((e,t)=>(0,r.jsxs)("button",{draggable:!u,onDragStart:()=>m(t),onDragOver:e=>e.preventDefault(),onDrop:()=>{null!=h&&h!==t&&(b(e=>{let l=[...e],[r]=l.splice(h,1);return l.splice(t,0,r),l}),m(null))},className:"w-full text-left p-2 rounded border ".concat(u?f[t]===e?"bg-green-800 border-green-500":"bg-red-800 border-red-500":"bg-gray-700 border-gray-600"),children:[t+1,". ",e]},"".concat(e,"-").concat(t)))}),!u&&(0,r.jsx)("button",{onClick:function(){let e=p.join("||")===f.join("||");d(e=>e+1),("one_shot"===i||e)&&(g(!0),l({correct:e}))},className:"w-full bg-purple-600 hover:bg-purple-500 py-2 rounded-lg font-bold",children:"Submit Ranking"}),"anchor_adjust"===i&&(0,r.jsxs)("div",{className:"text-sm text-gray-300",children:["Attempts: ",c]})]}):null}function h(e){let{question:t,onAnswer:l}=e,a="media"===t.type?t:null,[i,c]=(0,n.useState)(""),[d,u]=(0,n.useState)(!1),[g,p]=(0,n.useState)(!1),[b,h]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{c(""),u(!1),p(!1),h(!1)},[null==a?void 0:a.id,null==a?void 0:a.question]),!a)return null;let m=[a.answer||"",...a.acceptedAnswers||[]].filter(Boolean),x=a.mediaUrl||"",f=function(e){try{let t=new URL(e);if(t.hostname.includes("youtu.be")){let e=t.pathname.replace("/","");return e?"https://www.youtube.com/embed/".concat(e):null}if(t.hostname.includes("youtube.com")){let e=t.searchParams.get("v");return e?"https://www.youtube.com/embed/".concat(e):null}return null}catch(e){return null}}(x),y="image"===(a.mediaType||"").toLowerCase()||/\.(png|jpg|jpeg|gif|webp)(\?|$)/i.test(x),v="video"===(a.mediaType||"").toLowerCase()||!!f||/\.(mp4|webm|ogg)(\?|$)/i.test(x);return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"rounded-lg bg-black aspect-video flex items-center justify-center overflow-hidden",children:[y&&x&&(0,r.jsx)(s.default,{src:x,alt:"Question media",width:1280,height:720,unoptimized:!0,className:"max-w-full max-h-full object-contain ".concat(b?"blur-xl brightness-0":"")}),v&&f&&(0,r.jsx)("iframe",{src:f,title:"Question media video",className:"w-full h-full ".concat(b?"blur-xl brightness-50":""),allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0}),v&&!f&&x&&(0,r.jsx)("video",{src:x,controls:!0,className:"w-full h-full object-contain ".concat(b?"blur-xl brightness-50":"")}),!x&&(0,r.jsx)("div",{className:"text-gray-400",children:"No media URL found."})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("input",{type:"checkbox",checked:b,onChange:e=>h(e.target.checked)}),"Obscure media"]}),(0,r.jsx)("input",{value:i,onChange:e=>c(e.target.value),disabled:d,placeholder:"Type your answer",className:"w-full bg-gray-700 rounded-lg p-3"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)("button",{disabled:!i.trim()||d,onClick:()=>{let e=m.some(e=>o(i,e));u(!0),l({correct:e})},className:"bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 py-2 rounded-lg font-bold",children:"Submit"}),(0,r.jsx)("button",{onClick:()=>{p(!0),d||l({correct:!1})},className:"bg-blue-700 hover:bg-blue-600 py-2 rounded-lg font-bold",children:"Reveal Answer"})]}),g&&(0,r.jsxs)("div",{className:"text-yellow-300 font-bold",children:["Answer: ",a.answer]})]})}function m(e){let{question:t,onAnswer:l,onRerollPrompt:s}=e,a="prompt"===t.type?t:null,[i,c]=(0,n.useState)(""),[d,u]=(0,n.useState)(!1),[g,p]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{c(""),u(!1),p(!1)},[null==a?void 0:a.id,null==a?void 0:a.question,null==a?void 0:a.prompt]),!a)return null;let b=[a.answer||"",...a.acceptedAnswers||[]].filter(Boolean);return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"bg-gray-700 rounded-lg p-3",children:[(0,r.jsx)("div",{className:"text-xs text-gray-300 uppercase mb-1",children:"Prompt"}),(0,r.jsx)("div",{className:"text-lg",children:a.prompt||"No prompt available."})]}),(0,r.jsx)("input",{value:i,onChange:e=>c(e.target.value),disabled:d,placeholder:"Type your answer",className:"w-full bg-gray-700 rounded-lg p-3"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,r.jsx)("button",{disabled:!i.trim()||d,onClick:()=>{let e=b.some(e=>o(i,e));u(!0),l({correct:e})},className:"bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 py-2 rounded-lg font-bold",children:"Submit"}),(0,r.jsx)("button",{onClick:()=>{p(!0),d||l({correct:!1})},className:"bg-blue-700 hover:bg-blue-600 py-2 rounded-lg font-bold",children:"Reveal"}),(0,r.jsx)("button",{onClick:()=>a.prompt&&(null==s?void 0:s(a.prompt)),disabled:!a.prompt||!s,className:"bg-indigo-700 hover:bg-indigo-600 disabled:bg-gray-600 py-2 rounded-lg font-bold",children:"Reroll Prompt"})]}),g&&(0,r.jsxs)("div",{className:"text-yellow-300 font-bold",children:["Answer: ",a.answer]})]})}function x(e){if("multiple_choice"===e.question.type)return(0,r.jsx)(c,{...e});if("open_ended"===e.question.type)return(0,r.jsx)(d,{...e});if("list"===e.question.type)return(0,r.jsx)(u,{...e});if("grouping"===e.question.type)return(0,r.jsx)(g,{...e});if("this_or_that"===e.question.type)return(0,r.jsx)(p,{...e});if("ranking"===e.question.type)return(0,r.jsx)(b,{...e});if("media"===e.question.type)return(0,r.jsx)(h,{...e});if("prompt"===e.question.type)return(0,r.jsx)(m,{...e});let t=e.question;return(0,r.jsxs)("div",{className:"text-gray-400 italic",children:["Unsupported question type: ",t.type||"unknown"]})}}}]);