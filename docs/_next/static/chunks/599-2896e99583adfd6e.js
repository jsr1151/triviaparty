"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[599],{2599:(e,t,l)=>{l.d(t,{A:()=>w});var s=l(5155),a=l(2115),r=l(5239);let n={very_easy:1,easy:2,medium:3,hard:4,very_hard:5},o={multiple_choice:1,open_ended:1.2,list:1.4,grouping:1.5,this_or_that:1.3,ranking:1.5,media:1.4,prompt:1.2};function i(e){return Math.max(1,Math.round((n[e.difficulty]||3)*(o[e.type]||1)))}function c(e){let t=[...e];for(let e=t.length-1;e>0;e--){let l=Math.floor(Math.random()*(e+1));[t[e],t[l]]=[t[l],t[e]]}return t}function d(e){return e.toLowerCase().replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim()}function u(e){return d(e).split(" ").filter(Boolean)}function g(e,t){let l=d(e),s=d(t);if(!l||!s)return!1;if(l===s)return!0;if(l.length<2)return!1;let a=u(l),r=u(s);if(1===a.length&&r.includes(a[0])&&a[0].length>=3)return!0;if(l.length>=3&&s.length>=3){let e=function(e,t){let l=Array.from({length:e.length+1},()=>Array(t.length+1).fill(0));for(let t=0;t<=e.length;t++)l[t][0]=t;for(let e=0;e<=t.length;e++)l[0][e]=e;for(let s=1;s<=e.length;s++)for(let a=1;a<=t.length;a++){let r=+(e[s-1]!==t[a-1]);l[s][a]=Math.min(l[s-1][a]+1,l[s][a-1]+1,l[s-1][a-1]+r)}return l[e.length][t.length]}(l,s),t=Math.max(l.length,s.length);if(e<=(t<=6?1:t<=12?2:3))return!0}return!!(a.length>=2&&a.filter(e=>r.includes(e)).length>=Math.min(2,a.length))||!1}function m(e){let{src:t}=e;return t}function p(e,t,l,s,a,r,n){e||(t(!0),l({correct:n,pointsEarned:a,pointsPossible:r,type:s.type}))}function h(e){let{question:t,onAnswer:l}=e,r="multiple_choice"===t.type?t:null,[n,o]=(0,a.useState)([]),[d,u]=(0,a.useState)(""),[g,m]=(0,a.useState)(!1),[h,b]=(0,a.useState)(!1),x=i(t),f=(0,a.useMemo)(()=>{var e;if(!r)return"";let t=(r.options||[]).map(e=>({text:e.replace(/^\*+\s*/,"").replace(/\s*\*+$/,"").trim(),starred:e.trim().startsWith("*")||e.trim().endsWith("*")}));return(r.correctAnswer||(null==(e=t.find(e=>e.starred))?void 0:e.text)||"").trim()},[r]);return((0,a.useEffect)(()=>{r&&(o(c((r.options||[]).map(e=>e.replace(/^\*+\s*/,"").replace(/\s*\*+$/,"").trim()).filter(Boolean))),u(""),m(!1),b(!1))},[r]),r)?(0,s.jsxs)("div",{className:"space-y-3",children:[n.map(e=>{let t=g&&e===f,l=g&&d===e&&e!==f;return(0,s.jsx)("button",{onClick:()=>!g&&u(e),className:"w-full text-left p-3 rounded-lg border ".concat(t?"bg-green-800 border-green-500":l?"bg-red-800 border-red-500":d===e?"bg-blue-700 border-blue-400":"bg-gray-700 border-gray-600 hover:bg-gray-600"),children:e},e)}),(0,s.jsx)("button",{disabled:!d||g,onClick:()=>{m(!0);let e=d===f;p(h,b,l,t,e?x:0,x,e)},className:"w-full bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 py-2 rounded-lg font-bold",children:"Submit"})]}):null}function b(e){let{question:t,onAnswer:l}=e,r="open_ended"===t.type?t:null,[n,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),[h,b]=(0,a.useState)(!1),x=i(t);if((0,a.useEffect)(()=>{o(""),d(!1),m(!1),b(!1)},[null==r?void 0:r.id,null==r?void 0:r.question]),!r)return null;let f=[r.answer||"",...r.acceptedAnswers||[]].filter(Boolean);return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("input",{value:n,onChange:e=>o(e.target.value),disabled:c,placeholder:"Type your answer",className:"w-full bg-gray-700 rounded-lg p-3"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("button",{disabled:c||!n.trim(),onClick:()=>{let e=f.some(e=>g(n,e));d(!0),p(h,b,l,t,e?x:0,x,e)},className:"bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 py-2 rounded-lg font-bold",children:"Submit"}),(0,s.jsx)("button",{onClick:()=>{m(!0),c||p(h,b,l,t,0,x,!1)},className:"bg-blue-700 hover:bg-blue-600 py-2 rounded-lg font-bold",children:"Reveal Answer"})]}),u&&(0,s.jsxs)("div",{className:"text-yellow-300 font-bold",children:["Answer: ",r.answer]})]})}function x(e){let{question:t,onAnswer:l}=e,r="list"===t.type?t:null,[n,o]=(0,a.useState)(""),[c,u]=(0,a.useState)([]),[m,h]=(0,a.useState)([]),[b,x]=(0,a.useState)(!1),[f,y]=(0,a.useState)(!1),[v,j]=(0,a.useState)(""),[N,w]=(0,a.useState)("timed"),[S,C]=(0,a.useState)("target"),[k,M]=(0,a.useState)(30),[A,_]=(0,a.useState)(0),[q,L]=(0,a.useState)(!1),R=i(t);if((0,a.useEffect)(()=>{o(""),u([]),h([]),x(!1),y(!1),j(""),w("timed"),C("target"),L(!1),M((null==r?void 0:r.difficulty)==="hard"||(null==r?void 0:r.difficulty)==="very_hard"?60:30),_(0)},[r]),(0,a.useEffect)(()=>{if("timed"!==N||b)return;if(k<=0){x(!0);let e=c.length,s=(null==r?void 0:r.minRequired)||1,a=(Array.isArray(null==r?void 0:r.answers)?r.answers:[]).some(e=>/self\s*-?\s*score/i.test(e))||/self\s*-?\s*score/i.test((null==r?void 0:r.question)||""),n="as_many"===S?{earned:a?0:Math.min(R,e),correct:!a&&e>0}:{earned:a?0:Math.round(R*Math.min(1,e/Math.max(1,s))),correct:!a&&e>=s};p(q,L,l,t,n.earned,R,n.correct);return}let e=setTimeout(()=>M(e=>e-1),1e3);return()=>clearTimeout(e)},[N,b,k,c.length,q,l,R,t,S,r]),!r)return null;let E=r.question.includes(":")?r.question.split(":").slice(1).join(":").split(/[;,]/).map(e=>e.trim()).filter(Boolean):[],P=Array.from(new Set([...Array.isArray(r.answers)?r.answers:[],...E])),B=r.minRequired||1,T=P.some(e=>/self\s*-?\s*score/i.test(e))||/self\s*-?\s*score/i.test(r.question),U=/two\s+o'?s|double\s+o|\boo\b|side\s*by\s*side/i.test(r.question.toLowerCase());function I(){var e;if(b)return;x(!0);let s=(e=c.length,T?{earned:0,correct:!1}:"as_many"===S?{earned:Math.min(R,e),correct:e>0}:{earned:Math.round(R*Math.min(1,e/Math.max(1,B))),correct:e>=B});p(q,L,l,t,s.earned,R,s.correct)}function $(){let e=n.trim();if(!e||b)return;let t=U&&/oo/i.test(e)?e:null,l=P.find(t=>g(e,t))||t,s=l||e,a=!!l&&!c.includes(s);if(a)u(e=>[...e,s]);else if("strikes"===N){let t=A+1;if(_(t),t>=3){h(t=>[...t,{text:e,correct:a}]),o(""),I();return}}h(t=>[...t,{text:e,correct:a}]),o("")}let z=P.filter(e=>d(e).includes(d(v)));return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("select",{value:N,onChange:e=>w(e.target.value),disabled:m.length>0,className:"bg-gray-700 rounded-lg p-2 text-sm disabled:opacity-50",children:[(0,s.jsx)("option",{value:"timed",children:"Timed"}),(0,s.jsx)("option",{value:"strikes",children:"3 Strikes"}),(0,s.jsx)("option",{value:"unlimited",children:"Unlimited"})]}),(0,s.jsxs)("select",{value:S,onChange:e=>C(e.target.value),disabled:m.length>0,className:"bg-gray-700 rounded-lg p-2 text-sm disabled:opacity-50",children:[(0,s.jsx)("option",{value:"target",children:"Target (meet minimum)"}),(0,s.jsx)("option",{value:"as_many",children:"Name as many"})]})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:["target"===S?"Find at least ".concat(B," answers."):"Name as many answers as you can.",T?" Self-score round: no points awarded.":"","timed"===N?" Time left: ".concat(k,"s"):"","strikes"===N?" Strikes: ".concat(A,"/3"):""]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{value:n,onChange:e=>o(e.target.value),onKeyDown:e=>"Enter"===e.key&&$(),disabled:b,className:"flex-1 bg-gray-700 rounded-lg p-3",placeholder:"Type an item"}),(0,s.jsx)("button",{onClick:$,disabled:b,className:"px-4 bg-purple-600 hover:bg-purple-500 rounded-lg font-bold",children:"Check"})]}),(0,s.jsxs)("div",{className:"rounded-lg bg-gray-900 p-2 max-h-28 overflow-y-auto",children:[(0,s.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"Guessed so far"}),(0,s.jsx)("div",{className:"space-y-1",children:m.map((e,t)=>(0,s.jsxs)("div",{className:"text-xs ".concat(e.correct?"text-green-300":"text-red-300"),children:[e.correct?"✓":"✗"," ",e.text]},"".concat(e.text,"-").concat(t)))})]}),(0,s.jsxs)("div",{className:"text-sm",children:["Found: ",(0,s.jsx)("span",{className:"text-green-300 font-bold",children:c.length})," / ",P.length]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("button",{disabled:b,onClick:I,className:"bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 py-2 rounded-lg font-bold",children:"Submit List"}),(0,s.jsx)("button",{onClick:()=>{y(!0),b||I()},className:"bg-blue-700 hover:bg-blue-600 py-2 rounded-lg font-bold",children:"Reveal Answers"})]}),f&&(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg p-3 space-y-2",children:[(0,s.jsx)("input",{value:v,onChange:e=>j(e.target.value),placeholder:"Search answers",className:"w-full bg-gray-700 rounded-lg p-2"}),(0,s.jsx)("div",{className:"max-h-40 overflow-y-auto text-sm space-y-1",children:z.map(e=>(0,s.jsx)("div",{className:"".concat(c.includes(e)?"text-green-300":"text-gray-200"),children:e},e))})]})]})}function f(e){let{question:t,onAnswer:l}=e,r="grouping"===t.type?t:null,[n,o]=(0,a.useState)("elimination"),[d,u]=(0,a.useState)([]),[g,m]=(0,a.useState)([]),[h,b]=(0,a.useState)(!1),[x,f]=(0,a.useState)(!1),y=i(t);if((0,a.useEffect)(()=>{if(!r)return;let e=Array.isArray(r.items)?r.items:[],t=new Set(Array.isArray(r.correctItems)?r.correctItems:[]),l=e.filter(e=>t.has(e)),s=e.filter(e=>!t.has(e)),a=Math.min(8,l.length),n=c(l).slice(0,a),i=c(s).slice(0,Math.max(0,16-n.length));u(c([...n,...i]).slice(0,16)),m([]),b(!1),o("elimination"),f(!1)},[r]),!r)return null;let v=new Set(Array.isArray(r.correctItems)?r.correctItems:[]),j=d.filter(e=>v.has(e)).length;function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;if(h)return;let s=e.filter(e=>v.has(e)).length,a=Math.round(y*s/Math.max(1,j));b(!0),p(x,f,l,t,a,y,s===j)}return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{disabled:g.length>0,onClick:()=>o("elimination"),className:"px-3 py-1 rounded ".concat("elimination"===n?"bg-purple-600":"bg-gray-700"," disabled:opacity-50"),children:"Elimination"}),(0,s.jsx)("button",{disabled:g.length>0,onClick:()=>o("continuous"),className:"px-3 py-1 rounded ".concat("continuous"===n?"bg-purple-600":"bg-gray-700"," disabled:opacity-50"),children:"Continuous"})]}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2",children:d.map(e=>{let t=g.includes(e),l=v.has(e),a=h?l?t?"bg-green-700 border-yellow-300":"bg-green-900 border-green-500":t?"bg-red-800 border-red-500":"bg-gray-700 border-gray-600 opacity-60":t?"bg-blue-700 border-blue-400":"bg-gray-700 border-gray-600 hover:bg-gray-600";return(0,s.jsxs)("button",{onClick:()=>(function(e){if(h||g.includes(e))return;let t=v.has(e),l=[...g,e];if(m(l),"elimination"===n&&!t)return void N(l);"continuous"===n&&l.length>=Math.max(1,j)&&N(l)})(e),className:"p-2 text-sm rounded border ".concat(a),children:[e,h&&t&&(0,s.jsx)("span",{className:"ml-1 text-xs",children:"(picked)"})]},e)})}),!h&&"continuous"===n&&(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:["Pick ",j," items. Chosen: ",g.length]}),!h&&(0,s.jsx)("button",{onClick:()=>N(),className:"w-full bg-purple-600 hover:bg-purple-500 py-2 rounded-lg font-bold",children:"Finish"})]})}function y(e){let{question:t,onAnswer:l}=e,r="this_or_that"===t.type?t:null,[n,o]=(0,a.useState)("standard"),[d,u]=(0,a.useState)(0),[g,m]=(0,a.useState)(0),[h,b]=(0,a.useState)(null),[x,f]=(0,a.useState)([]),[y,v]=(0,a.useState)(!1),j=i(t);if((0,a.useEffect)(()=>{r&&(f(c(Array.isArray(r.items)?r.items:[]).slice(0,5)),u(0),m(0),b(null),o("standard"),v(!1))},[r]),!r)return null;let N=[r.categoryA,r.categoryB,r.categoryC].filter(Boolean),w=x[d];if(!w)return(0,s.jsx)("div",{className:"text-gray-400",children:"No this-or-that items available."});let S=["bg-blue-700 hover:bg-blue-600","bg-emerald-700 hover:bg-emerald-600","bg-violet-700 hover:bg-violet-600"];return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{disabled:d>0,onClick:()=>o("standard"),className:"px-3 py-1 rounded ".concat("standard"===n?"bg-purple-600":"bg-gray-700"," disabled:opacity-50"),children:"Standard"}),(0,s.jsx)("button",{disabled:d>0,onClick:()=>o("elimination"),className:"px-3 py-1 rounded ".concat("elimination"===n?"bg-purple-600":"bg-gray-700"," disabled:opacity-50"),children:"Elimination"})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:[d+1," / ",x.length," • Correct: ",g]}),(0,s.jsx)("div",{className:"p-3 bg-gray-700 rounded-lg",children:w.text.replace(/^[-\s]+/,"")}),(0,s.jsx)("div",{className:"grid gap-2 ".concat(N.length>=3?"grid-cols-3":"grid-cols-2"),children:N.map((e,a)=>{let r=0===a?"A":1===a?"B":"C",o=h&&w.answer===r,i=h===r&&w.answer!==r;return(0,s.jsx)("button",{onClick:()=>(function(e){if(h)return;b(e);let s=e===w.answer;"elimination"!==n||s||p(y,v,l,t,Math.round(j*g/Math.max(1,x.length)),j,!1)})(r),disabled:!!h,className:"p-4 text-lg font-bold rounded-xl border ".concat(o?"bg-green-800 border-green-500":i?"bg-red-800 border-red-500":"".concat(S[a]||"bg-gray-700 hover:bg-gray-600"," border-transparent")," disabled:opacity-90"),children:e},e)})}),h&&(0,s.jsx)("button",{onClick:function(){let e=g+ +(h===w.answer);if(m(e),d+1>=x.length||"elimination"===n&&h!==w.answer)return void p(y,v,l,t,Math.round(j*e/Math.max(1,x.length)),j,e>0);u(e=>e+1),b(null)},className:"w-full bg-purple-600 hover:bg-purple-500 py-2 rounded-lg font-bold",children:d+1>=x.length?"Finish":"Next"})]})}function v(e){let{question:t,onAnswer:l}=e,r="ranking"===t.type?t:null,[n,o]=(0,a.useState)("one_shot"),[d,u]=(0,a.useState)(0),[g,m]=(0,a.useState)(!1),[h,b]=(0,a.useState)([]),[x,f]=(0,a.useState)(null),[y,v]=(0,a.useState)(new Set),[j,N]=(0,a.useState)(!1),[w,S]=(0,a.useState)(!1),C=i(t),k=(0,a.useMemo)(()=>{if(!r)return[];let e=r.question.split(":");return e.length<2?[]:e.slice(1).join(":").split(",").map(e=>e.trim()).filter(Boolean)},[r]),M=(0,a.useMemo)(()=>r&&Array.isArray(r.items)?[...r.items].sort((e,t)=>e.rank-t.rank):[],[r]),A=(0,a.useMemo)(()=>M.length?M.map(e=>e.text).filter(Boolean):k,[k,M]),_=(0,a.useMemo)(()=>(function(e){let[t]=e.split(":");return(null==t?void 0:t.trim())||e})((null==r?void 0:r.question)||""),[null==r?void 0:r.question]),q=(0,a.useMemo)(()=>(function(e){let t=" ".concat(e.toLowerCase().replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim()," "),l=e=>e.some(e=>t.includes(" ".concat(e," ")));return l(["earliest","oldest","first"])?{topLabel:"1 = earliest",bottomLabel:"N = latest"}:l(["latest","newest","most recent","recent"])?{topLabel:"1 = latest",bottomLabel:"N = earliest"}:l(["highest","largest","biggest","longest","fastest","strongest","most","greatest"])?{topLabel:"1 = greatest / most",bottomLabel:"N = least / lowest"}:l(["lowest","smallest","shortest","slowest","weakest","least","fewest"])?{topLabel:"1 = least / lowest",bottomLabel:"N = greatest / most"}:{topLabel:"1 = best fit for the prompt",bottomLabel:"N = least fit for the prompt"}})(_),[_]),L=(0,a.useMemo)(()=>q.topLabel.replace(/\bN\b/g,String(A.length||1)),[q.topLabel,A.length]),R=(0,a.useMemo)(()=>q.bottomLabel.replace(/\bN\b/g,String(A.length||1)),[q.bottomLabel,A.length]);return((0,a.useEffect)(()=>{b(c(k.length?k:A)),u(0),m(!1),o("one_shot"),f(null),v(new Set),N(!1),S(!1)},[null==r?void 0:r.id,null==r?void 0:r.question,k,A]),r)?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:[(0,s.jsx)("div",{className:"font-bold text-gray-200",children:_}),(0,s.jsx)("div",{children:L}),(0,s.jsx)("div",{children:R})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>o("one_shot"),disabled:d>0,className:"px-3 py-1 rounded ".concat("one_shot"===n?"bg-purple-600":"bg-gray-700"," disabled:opacity-50"),children:"One-Shot"}),(0,s.jsx)("button",{onClick:()=>o("anchor_adjust"),disabled:d>0,className:"px-3 py-1 rounded ".concat("anchor_adjust"===n?"bg-purple-600":"bg-gray-700"," disabled:opacity-50"),children:"Anchor/Adjust"})]}),(0,s.jsx)("div",{className:"space-y-2",children:h.map((e,t)=>{let l=y.has(t),a=g&&e===A[t],r=g&&e!==A[t];return(0,s.jsxs)("button",{draggable:!g&&!l,onDragStart:()=>f(t),onDragOver:e=>e.preventDefault(),onDrop:()=>{var e;return e=t,void(null!=x&&x!==e&&(y.has(x)||y.has(e)||(b(t=>{let l=[...t],[s]=l.splice(x,1);return l.splice(e,0,s),l}),f(null))))},className:"w-full text-left p-2 rounded border cursor-grab active:cursor-grabbing ".concat(l?"bg-green-900 border-green-500":a?"bg-green-800 border-green-500":r?"bg-red-800 border-red-500":"bg-gray-700 border-gray-600"),children:[t+1,". ",e," ",l&&"anchor_adjust"===n?"\uD83D\uDD12":"↕"]},"".concat(e,"-").concat(t))})}),!g&&(0,s.jsx)("button",{onClick:function(){let e=h.reduce((e,t,l)=>t===A[l]?e+1:e,0),s=d+1;if(u(s),"one_shot"===n){let s=Math.round(C*e/Math.max(1,A.length));m(!0),N(!0),p(w,S,l,t,s,C,e===A.length);return}let a=new Set;if(h.forEach((e,t)=>{e===A[t]&&a.add(t)}),v(a),a.size===A.length){let e=Math.max(0,C-(s-1));m(!0),N(!0),p(w,S,l,t,e,C,!0)}},className:"w-full bg-purple-600 hover:bg-purple-500 py-2 rounded-lg font-bold",children:"Submit Ranking"}),"anchor_adjust"===n&&(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:["Attempts: ",d," • Locked: ",y.size,"/",A.length," • Current score: ",Math.max(0,C-Math.max(0,d-1))]}),(j||g)&&(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-sm text-gray-300 mb-1",children:"Correct order:"}),(0,s.jsx)("div",{className:"space-y-1 text-sm",children:A.map((e,t)=>{var l;let a=null==(l=M[t])?void 0:l.value;return(0,s.jsxs)("div",{children:[t+1,". ",e,a?" (".concat(a,")"):""]},"".concat(e,"-").concat(t))})})]})]}):null}function j(e){let{question:t,onAnswer:l}=e,n="media"===t.type?t:null,[o,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(!1),[h,b]=(0,a.useState)(!1),[x,f]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),j=i(t);if((0,a.useEffect)(()=>{c(""),u(!1),b(!1),f(!1),v(!1)},[null==n?void 0:n.id,null==n?void 0:n.question]),!n)return null;let N=[n.answer||"",...n.acceptedAnswers||[]].filter(Boolean),w=n.mediaUrl||"",S=function(e){try{let t=new URL(e);if(t.pathname.startsWith("/clip/"))return null;if(t.hostname.includes("youtu.be")){let e=t.pathname.replace("/","").split("?")[0],l=t.searchParams.get("t")||t.searchParams.get("start"),s=t.searchParams.get("end"),a=l?l.replace(/s$/,""):"";return e?"https://www.youtube.com/embed/".concat(e,"?rel=0&modestbranding=1").concat(a?"&start=".concat(encodeURIComponent(a)):"").concat(s?"&end=".concat(encodeURIComponent(s)):""):null}if(t.hostname.includes("youtube.com")||t.hostname.includes("youtube-nocookie.com")){if(t.pathname.startsWith("/shorts/")){let e=t.pathname.replace("/shorts/","").split("/")[0];return e?"https://www.youtube.com/embed/".concat(e,"?rel=0&modestbranding=1"):null}if(t.pathname.startsWith("/embed/")){let e=t.pathname.replace("/embed/","").split("/")[0],l=t.searchParams.get("start"),s=t.searchParams.get("end");return e?"https://www.youtube.com/embed/".concat(e,"?rel=0&modestbranding=1").concat(l?"&start=".concat(encodeURIComponent(l)):"").concat(s?"&end=".concat(encodeURIComponent(s)):""):null}let e=t.searchParams.get("v"),l=t.searchParams.get("t")||t.searchParams.get("start"),s=t.searchParams.get("end"),a=l?l.replace(/s$/,""):"";return e?"https://www.youtube.com/embed/".concat(e,"?rel=0&modestbranding=1").concat(a?"&start=".concat(encodeURIComponent(a)):"").concat(s?"&end=".concat(encodeURIComponent(s)):""):null}return null}catch(e){return null}}(w),C="image"===(n.mediaType||"").toLowerCase()||/\.(png|jpg|jpeg|gif|webp)(\?|$)/i.test(w),k=/\.(mp4|webm|ogg)(\?|$)/i.test(w),M="video"===(n.mediaType||"").toLowerCase()||!!S||k;return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"rounded-lg bg-black aspect-video flex items-center justify-center overflow-hidden relative",children:[C&&w&&(0,s.jsx)(r.default,{loader:m,unoptimized:!0,src:w,alt:"Question media",width:1280,height:720,className:"max-w-full max-h-full object-contain ".concat(x?"opacity-30":"")}),M&&S&&(0,s.jsx)("iframe",{src:S,title:"Question media video",className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0}),M&&!S&&w&&k&&(0,s.jsx)("video",{src:w,controls:!0,className:"w-full h-full object-contain"}),x&&(0,s.jsx)("div",{className:"absolute inset-0 bg-black/85 pointer-events-none"}),!w&&(0,s.jsx)("div",{className:"text-gray-400",children:"No media URL found."})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)("input",{type:"checkbox",checked:x,onChange:e=>f(e.target.checked)}),"Obscure media"]}),(0,s.jsx)("input",{value:o,onChange:e=>c(e.target.value),disabled:d,placeholder:"Type your answer",className:"w-full bg-gray-700 rounded-lg p-3"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("button",{disabled:!o.trim()||d,onClick:()=>{let e=N.some(e=>g(o,e));u(!0),p(y,v,l,t,e?j:0,j,e)},className:"bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 py-2 rounded-lg font-bold",children:"Submit"}),(0,s.jsx)("button",{onClick:()=>{b(!0),d||p(y,v,l,t,0,j,!1)},className:"bg-blue-700 hover:bg-blue-600 py-2 rounded-lg font-bold",children:"Reveal Answer"})]}),h&&(0,s.jsxs)("div",{className:"text-yellow-300 font-bold",children:["Answer: ",n.answer]})]})}function N(e){let{question:t,onAnswer:l,onRerollPrompt:r}=e,n="prompt"===t.type?t:null,[o,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),[b,x]=(0,a.useState)(!1),f=i(t);if((0,a.useEffect)(()=>{c(""),u(!1),h(!1),x(!1)},[null==n?void 0:n.id,null==n?void 0:n.question,null==n?void 0:n.prompt]),!n)return null;let y=[n.answer||"",...n.acceptedAnswers||[]].filter(Boolean);return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-xs text-gray-300 uppercase mb-1",children:"Prompt"}),(0,s.jsx)("div",{className:"text-lg",children:n.prompt||"No prompt available."})]}),(0,s.jsx)("input",{value:o,onChange:e=>c(e.target.value),disabled:d,placeholder:"Type your answer",className:"w-full bg-gray-700 rounded-lg p-3"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsx)("button",{disabled:!o.trim()||d,onClick:()=>{let e=y.some(e=>g(o,e));u(!0),p(b,x,l,t,e?f:0,f,e)},className:"bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 py-2 rounded-lg font-bold",children:"Submit"}),(0,s.jsx)("button",{onClick:()=>{h(!0),d||p(b,x,l,t,0,f,!1)},className:"bg-blue-700 hover:bg-blue-600 py-2 rounded-lg font-bold",children:"Reveal"}),(0,s.jsx)("button",{onClick:()=>n.prompt&&(null==r?void 0:r(n.prompt)),disabled:!n.prompt||!r,className:"bg-indigo-700 hover:bg-indigo-600 disabled:bg-gray-600 py-2 rounded-lg font-bold",children:"Reroll Prompt"})]}),m&&(0,s.jsxs)("div",{className:"text-yellow-300 font-bold",children:["Answer: ",n.answer]})]})}function w(e){return"multiple_choice"===e.question.type?(0,s.jsx)(h,{...e}):"open_ended"===e.question.type?(0,s.jsx)(b,{...e}):"list"===e.question.type?(0,s.jsx)(x,{...e}):"grouping"===e.question.type?(0,s.jsx)(f,{...e}):"this_or_that"===e.question.type?(0,s.jsx)(y,{...e}):"ranking"===e.question.type?(0,s.jsx)(v,{...e}):"media"===e.question.type?(0,s.jsx)(j,{...e}):"prompt"===e.question.type?(0,s.jsx)(N,{...e}):(0,s.jsx)("div",{className:"text-gray-400 italic",children:"Unsupported question type."})}}}]);